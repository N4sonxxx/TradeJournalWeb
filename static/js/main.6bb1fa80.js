/*! For license information please see main.6bb1fa80.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,i={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:u,ref:c,props:i,_owner:o.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var s,i={},a=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,s)&&!S.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:a,ref:o,props:i,_owner:_.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===i?"."+C(l,0):i,x(a)?(s="",null!=e&&(s=e.replace(T,"$&/")+"/"),I(a,t,s,"",function(e){return e})):null!=a&&(N(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",x(e))for(var u=0;u<e.length;u++){var c=i+C(o=e[u],u);l+=I(o,t,s,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=I(o=o.value,t,s,c=i+C(o,u++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},R={transition:null},L={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,n){D(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return D(e,function(){t++}),t},toArray:function(e){return D(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=g({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=_.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)k.call(t,u)&&!S.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:a,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>i(l,n))u<s&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<s&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)s(c);else{if(!(t.startTime<=e))break;s(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(m=!1,w(e),!g)if(null!==r(u))g=!0,R(k);else{var t=r(c);null!==t&&L(x,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,v(N),N=-1),p=!0;var i=f;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(u)&&s(u),w(n)}else s(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&L(x,h.startTime-n),l=!1}return l}finally{d=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,E=null,N=-1,T=5,C=-1;function I(){return!(t.unstable_now()-C<T)}function D(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(S=!1,E=null)}}else S=!1}if("function"===typeof b)_=function(){b(D)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,A=j.port2;j.port1.onmessage=D,_=function(){A.postMessage(null)}}else _=function(){y(D,0)};function R(e){E=e,S||(S=!0,_())}function L(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,R(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(c,e),null===r(u)&&e===r(c)&&(m?(v(N),N=-1):m=!0,L(x,i-a))):(e.sortIndex=o,n(u,e),g||p||(g=!0,R(k))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,s,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var O,M=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var V=!1;function U(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var s=u.stack.split("\n"),i=r.stack.split("\n"),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(1!==a||1!==o)do{if(a--,0>--o||s[a]!==i[o]){var l="\n"+s[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case E:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,_e=null,Se=null;function Ee(e){if(e=xs(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=_s(t),ke(e.stateNode,e.type,t))}}function Ne(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Te(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var De=!1;function je(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==_e||null!==Se)&&(Ie(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=_s(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Re=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Re=!1}function Pe(e,t,n,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Oe=!1,Me=null,Fe=!1,Ve=null,Ue={onError:function(e){Oe=!0,Me=e}};function ze(e,t,n,r,s,i,a,o,l){Oe=!1,Me=null,Pe.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(i(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var a=s.alternate;if(null===a){if(null!==(r=s.return)){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return qe(s),e;if(a===r)return qe(s),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Xe=s.unstable_now,Je=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~s;0!==o?r=ht(o):0!==(i&=a)&&(r=ht(i))}else 0!==(a=n&~s)?r=ht(a):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-at(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var wt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,_t,St,Et,Nt,Tt=!1,Ct=[],It=null,Dt=null,jt=null,At=new Map,Rt=new Map,Lt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=xs(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ft(e){var t=ws(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Nt(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xs(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function zt(){Tt=!1,null!==It&&Vt(It)&&(It=null),null!==Dt&&Vt(Dt)&&(Dt=null),null!==jt&&Vt(jt)&&(jt=null),At.forEach(Ut),Rt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,zt)))}function $t(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==Dt&&Bt(Dt,e),null!==jt&&Bt(jt,e),At.forEach(t),Rt.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Lt.shift()}var qt=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var s=wt,i=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=s,qt.transition=i}}function Kt(e,t,n,r){var s=wt,i=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=s,qt.transition=i}}function Gt(e,t,n,r){if(Ht){var s=Yt(e,t,n,r);if(null===s)Wr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return It=Mt(It,e,t,n,r,s),!0;case"dragenter":return Dt=Mt(Dt,e,t,n,r,s),!0;case"mouseover":return jt=Mt(jt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Mt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rt.set(i,Mt(Rt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==s;){var i=xs(s);if(null!==i&&kt(i),null===(i=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=ws(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,s="value"in Zt?Zt.value:Zt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return tn=s.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function an(){return!1}function on(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?sn:an,this.isPropagationStopped=an,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var ln,un,cn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(hn),fn=M({},hn,{view:0,detail:0}),pn=on(fn),gn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(ln=e.screenX-cn.screenX,un=e.screenY-cn.screenY):un=ln=0,cn=e),ln)},movementY:function(e){return"movementY"in e?e.movementY:un}}),mn=on(gn),yn=on(M({},gn,{dataTransfer:0})),vn=on(M({},fn,{relatedTarget:0})),bn=on(M({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=M({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=on(wn),kn=on(M({},hn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return Nn}var Cn=M({},fn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(Cn),Dn=on(M({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),jn=on(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=on(M({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(Rn),Pn=[9,13,27,32],On=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var Fn=c&&"TextEvent"in window&&!Mn,Vn=c&&(!On||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ne(r),0<(t=Gr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Qn=null;function Yn(e){Ur(e,0)}function Xn(e){if(K(ks(e)))return e}function Jn(e,t){if("change"===e)return t}var Zn=!1;if(c){var er;if(c){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Gn&&(Gn.detachEvent("onpropertychange",sr),Qn=Gn=null)}function sr(e){if("value"===e.propertyName&&Xn(Qn)){var t=[];Kn(t,Qn,e,xe(e)),je(Yn,t)}}function ir(e,t,n){"focusin"===e?(rr(),Qn=n,(Gn=t).attachEvent("onpropertychange",sr)):"focusout"===e&&rr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Qn)}function or(e,t){if("click"===e)return Xn(t)}function lr(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h.call(t,s)||!ur(e[s],t[s]))return!1}return!0}function hr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=hr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&gr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=dr(n,i);var a=dr(n,r);s&&a&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,br=null,wr=null,xr=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==vr||vr!==G(r)||("selectionStart"in(r=vr)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&cr(wr,r)||(wr=r,0<(r=Gr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Nr={};function Tr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return Er[e]=n[t];return e}c&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Cr=Tr("animationend"),Ir=Tr("animationiteration"),Dr=Tr("animationstart"),jr=Tr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Lr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Lr(Cr,"onAnimationEnd"),Lr(Ir,"onAnimationIteration"),Lr(Dr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(jr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Vr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,a,o,l,u){if(ze.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var c=Me;Oe=!1,Me=null,Fe||(Fe=!0,Ve=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Vr(s,o,u),i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Vr(s,o,u),i=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function zr(e,t){var n=t[ys];void 0===n&&(n=t[ys]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[$r]){e[$r]=!0,a.forEach(function(t){"selectionchange"!==t&&(Fr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Xt(t)){case 1:var s=Wt;break;case 4:s=Kt;break;default:s=Gt}n=s.bind(null,t,n,e),s=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=ws(o)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}o=o.parentNode}}r=r.return}je(function(){var r=i,s=xe(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var l=dn,u=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=jn;break;case Cr:case Ir:case Dr:l=bn;break;case jr:l=An;break;case"scroll":l=pn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Dn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ae(p,d))&&c.push(Kr(p,g,f)))),h)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,s),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!ws(u)&&!u[ms])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?ws(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=mn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Dn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:ks(l),f=null==u?o:ks(u),(o=new c(g,p+"leave",l,n,s)).target=h,o.relatedTarget=f,g=null,ws(s)===r&&((c=new c(d,p+"enter",u,n,s)).target=f,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Qr(f))p++;for(f=0,g=d;g;g=Qr(g))f++;for(;0<p-f;)c=Qr(c),p--;for(;0<f-p;)d=Qr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Qr(c),d=Qr(d)}c=null}else c=null;null!==l&&Yr(a,o,l,c,!1),null!==u&&null!==h&&Yr(a,h,u,c,!0)}if("select"===(l=(o=r?ks(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Jn;else if(Wn(o))if(Zn)m=lr;else{m=ar;var y=ir}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=or);switch(m&&(m=m(e,r))?Kn(a,m,n,s):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?ks(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(vr=y,br=r,wr=null);break;case"focusout":wr=br=vr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,kr(a,n,s);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":kr(a,n,s)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Vn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(v=nn()):(en="value"in(Zt=s)?Zt.value:Zt.textContent,qn=!0)),0<(y=Gr(r,b)).length&&(b=new kn(b,e,null,n,s),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=$n(n))&&(b.data=v))),(v=Fn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(zn=!0,Un);case"textInput":return(e=t.data)===Un&&zn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Bn(e,t)?(e=nn(),tn=en=Zt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(s=new kn("onBeforeInput","beforeinput",null,n,s),a.push({event:s,listeners:r}),s.data=v))}Ur(a,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Ae(e,n))&&r.unshift(Kr(e,i,s)),null!=(i=Ae(e,t))&&r.push(Kr(e,i,s))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,s?null!=(l=Ae(n,i))&&a.unshift(Kr(n,l,o)):s||null!=(l=Ae(n,i))&&a.push(Kr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Jr,"")}function es(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(i(425))}function ts(){}var ns=null,rs=null;function ss(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var is="function"===typeof setTimeout?setTimeout:void 0,as="function"===typeof clearTimeout?clearTimeout:void 0,os="function"===typeof Promise?Promise:void 0,ls="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof os?function(e){return os.resolve(null).then(e).catch(us)}:is;function us(e){setTimeout(function(){throw e})}function cs(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void $t(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);$t(t)}function hs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fs=Math.random().toString(36).slice(2),ps="__reactFiber$"+fs,gs="__reactProps$"+fs,ms="__reactContainer$"+fs,ys="__reactEvents$"+fs,vs="__reactListeners$"+fs,bs="__reactHandles$"+fs;function ws(e){var t=e[ps];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[ps]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[ps])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function xs(e){return!(e=e[ps]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ks(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function _s(e){return e[gs]||null}var Ss=[],Es=-1;function Ns(e){return{current:e}}function Ts(e){0>Es||(e.current=Ss[Es],Ss[Es]=null,Es--)}function Cs(e,t){Es++,Ss[Es]=e.current,e.current=t}var Is={},Ds=Ns(Is),js=Ns(!1),As=Is;function Rs(e,t){var n=e.type.contextTypes;if(!n)return Is;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ls(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ps(){Ts(js),Ts(Ds)}function Os(e,t,n){if(Ds.current!==Is)throw Error(i(168));Cs(Ds,t),Cs(js,n)}function Ms(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,$(e)||"Unknown",s));return M({},n,r)}function Fs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Is,As=Ds.current,Cs(Ds,e),Cs(js,js.current),!0}function Vs(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ms(e,t,As),r.__reactInternalMemoizedMergedChildContext=e,Ts(js),Ts(Ds),Cs(Ds,e)):Ts(js),Cs(js,n)}var Us=null,zs=!1,Bs=!1;function $s(e){null===Us?Us=[e]:Us.push(e)}function qs(){if(!Bs&&null!==Us){Bs=!0;var e=0,t=wt;try{var n=Us;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Us=null,zs=!1}catch(s){throw null!==Us&&(Us=Us.slice(e+1)),Ke(Ze,qs),s}finally{wt=t,Bs=!1}}return null}var Hs=[],Ws=0,Ks=null,Gs=0,Qs=[],Ys=0,Xs=null,Js=1,Zs="";function ei(e,t){Hs[Ws++]=Gs,Hs[Ws++]=Ks,Ks=e,Gs=t}function ti(e,t,n){Qs[Ys++]=Js,Qs[Ys++]=Zs,Qs[Ys++]=Xs,Xs=e;var r=Js;e=Zs;var s=32-at(r)-1;r&=~(1<<s),n+=1;var i=32-at(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Js=1<<32-at(t)+s|n<<s|r,Zs=i+e}else Js=1<<i|n<<s|r,Zs=e}function ni(e){null!==e.return&&(ei(e,1),ti(e,1,0))}function ri(e){for(;e===Ks;)Ks=Hs[--Ws],Hs[Ws]=null,Gs=Hs[--Ws],Hs[Ws]=null;for(;e===Xs;)Xs=Qs[--Ys],Qs[Ys]=null,Zs=Qs[--Ys],Qs[Ys]=null,Js=Qs[--Ys],Qs[Ys]=null}var si=null,ii=null,ai=!1,oi=null;function li(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ui(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,si=e,ii=hs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,si=e,ii=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xs?{id:Js,overflow:Zs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,si=e,ii=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function hi(e){if(ai){var t=ii;if(t){var n=t;if(!ui(e,t)){if(ci(e))throw Error(i(418));t=hs(n.nextSibling);var r=si;t&&ui(e,t)?li(r,n):(e.flags=-4097&e.flags|2,ai=!1,si=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,si=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;si=e}function fi(e){if(e!==si)return!1;if(!ai)return di(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ss(e.type,e.memoizedProps)),t&&(t=ii)){if(ci(e))throw pi(),Error(i(418));for(;t;)li(e,t),t=hs(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ii=hs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ii=null}}else ii=si?hs(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=ii;e;)e=hs(e.nextSibling)}function gi(){ii=si=null,ai=!1}function mi(e){null===oi?oi=[e]:oi.push(e)}var yi=w.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=s.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wi(e){return(0,e._init)(e._payload)}function xi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Pu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vu(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function u(e,t,n,r){var i=n.type;return i===_?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===A&&wi(i)===t.type)?((r=s(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=Ou(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ou(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case k:return(t=Uu(t,e.mode,n)).return=e,t;case A:return d(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Mu(t,e.mode,n,null)).return=e,t;bi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?u(e,t,n,r):null;case k:return n.key===s?c(e,t,n,r):null;case A:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||P(n))return null!==s?null:h(e,t,n,r,null);bi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case A:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||P(r))return h(t,e=e.get(n)||null,r,s,null);bi(t,r)}return null}function g(s,i,o,l){for(var u=null,c=null,h=i,g=i=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(s,h,o[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(s,h),i=a(y,i,g),null===c?u=y:c.sibling=y,c=y,h=m}if(g===o.length)return n(s,h),ai&&ei(s,g),u;if(null===h){for(;g<o.length;g++)null!==(h=d(s,o[g],l))&&(i=a(h,i,g),null===c?u=h:c.sibling=h,c=h);return ai&&ei(s,g),u}for(h=r(s,h);g<o.length;g++)null!==(m=p(h,s,g,o[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),i=a(m,i,g),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach(function(e){return t(s,e)}),ai&&ei(s,g),u}function m(s,o,l,u){var c=P(l);if("function"!==typeof c)throw Error(i(150));if(null==(l=c.call(l)))throw Error(i(151));for(var h=c=null,g=o,m=o=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(s,g,v.value,u);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(s,g),o=a(b,o,m),null===h?c=b:h.sibling=b,h=b,g=y}if(v.done)return n(s,g),ai&&ei(s,m),c;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(s,v.value,u))&&(o=a(v,o,m),null===h?c=v:h.sibling=v,h=v);return ai&&ei(s,m),c}for(g=r(s,g);!v.done;m++,v=l.next())null!==(v=p(g,s,m,v.value,u))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),o=a(v,o,m),null===h?c=v:h.sibling=v,h=v);return e&&g.forEach(function(e){return t(s,e)}),ai&&ei(s,m),c}return function e(r,i,a,l){if("object"===typeof a&&null!==a&&a.type===_&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var u=a.key,c=i;null!==c;){if(c.key===u){if((u=a.type)===_){if(7===c.tag){n(r,c.sibling),(i=s(c,a.props.children)).return=r,r=i;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===A&&wi(u)===c.type){n(r,c.sibling),(i=s(c,a.props)).ref=vi(r,c,a),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===_?((i=Mu(a.props.children,r.mode,l,a.key)).return=r,r=i):((l=Ou(a.type,a.key,a.props,null,r.mode,l)).ref=vi(r,i,a),l.return=r,r=l)}return o(r);case k:e:{for(c=a.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=s(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Uu(a,r.mode,l)).return=r,r=i}return o(r);case A:return e(r,i,(c=a._init)(a._payload),l)}if(te(a))return g(r,i,a,l);if(P(a))return m(r,i,a,l);bi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,a)).return=r,r=i):(n(r,i),(i=Vu(a,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var ki=xi(!0),_i=xi(!1),Si=Ns(null),Ei=null,Ni=null,Ti=null;function Ci(){Ti=Ni=Ei=null}function Ii(e){var t=Si.current;Ts(Si),e._currentValue=t}function Di(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ji(e,t){Ei=e,Ti=Ni=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ai(e){var t=e._currentValue;if(Ti!==e)if(e={context:e,memoizedValue:t,next:null},null===Ni){if(null===Ei)throw Error(i(308));Ni=e,Ei.dependencies={lanes:0,firstContext:e}}else Ni=Ni.next=e;return t}var Ri=null;function Li(e){null===Ri?Ri=[e]:Ri.push(e)}function Pi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Li(t)):(n.next=s.next,s.next=n),t.interleaved=n,Oi(e,r)}function Oi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mi=!1;function Fi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ui(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Dl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Oi(e,n)}return null===(s=r.interleaved)?(t.next=t,Li(r)):(t.next=s.next,s.next=t),r.interleaved=t,Oi(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function $i(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,r){var s=e.updateQueue;Mi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?i=u:a.next=u,a=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==i){var h=s.baseState;for(a=0,c=u=l=null,o=i;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=M({},h,d);break e;case 2:Mi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,a|=d;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(d=o).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===c&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,null!==(t=s.shared.interleaved)){s=t;do{a|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=h}}function Hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Wi={},Ki=Ns(Wi),Gi=Ns(Wi),Qi=Ns(Wi);function Yi(e){if(e===Wi)throw Error(i(174));return e}function Xi(e,t){switch(Cs(Qi,t),Cs(Gi,e),Cs(Ki,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ts(Ki),Cs(Ki,t)}function Ji(){Ts(Ki),Ts(Gi),Ts(Qi)}function Zi(e){Yi(Qi.current);var t=Yi(Ki.current),n=le(t,e.type);t!==n&&(Cs(Gi,e),Cs(Ki,n))}function ea(e){Gi.current===e&&(Ts(Ki),Ts(Gi))}var ta=Ns(0);function na(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function sa(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var ia=w.ReactCurrentDispatcher,aa=w.ReactCurrentBatchConfig,oa=0,la=null,ua=null,ca=null,ha=!1,da=!1,fa=0,pa=0;function ga(){throw Error(i(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function ya(e,t,n,r,s,a){if(oa=a,la=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?eo:to,e=n(r,s),da){a=0;do{if(da=!1,fa=0,25<=a)throw Error(i(301));a+=1,ca=ua=null,t.updateQueue=null,ia.current=no,e=n(r,s)}while(da)}if(ia.current=Za,t=null!==ua&&null!==ua.next,oa=0,ca=ua=la=null,ha=!1,t)throw Error(i(300));return e}function va(){var e=0!==fa;return fa=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?la.memoizedState=ca=e:ca=ca.next=e,ca}function wa(){if(null===ua){var e=la.alternate;e=null!==e?e.memoizedState:null}else e=ua.next;var t=null===ca?la.memoizedState:ca.next;if(null!==t)ca=t,ua=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ua=e).memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},null===ca?la.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function ka(e){var t=wa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ua,s=r.baseQueue,a=n.pending;if(null!==a){if(null!==s){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(null!==s){a=s.next,r=r.baseState;var l=o=null,u=null,c=a;do{var h=c.lane;if((oa&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,o=r):u=u.next=d,la.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==a);null===u?o=r:u.next=l,ur(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{a=s.lane,la.lanes|=a,Fl|=a,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=wa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{a=e(a,o.action),o=o.next}while(o!==s);ur(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ea(e,t){var n=la,r=wa(),s=t(),a=!ur(r.memoizedState,s);if(a&&(r.memoizedState=s,xo=!0),r=r.queue,Ma(Ca.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Aa(9,Ta.bind(null,n,r,s,t),void 0,null),null===jl)throw Error(i(349));0!==(30&oa)||Na(n,t,s)}return s}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ta(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Da(e)}function Ca(e,t,n){return n(function(){Ia(t)&&Da(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Da(e){var t=Oi(e,1);null!==t&&su(t,e,1,-1)}function ja(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,la,e),[t.memoizedState,e]}function Aa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return wa().memoizedState}function La(e,t,n,r){var s=ba();la.flags|=e,s.memoizedState=Aa(1|t,n,void 0,void 0===r?null:r)}function Pa(e,t,n,r){var s=wa();r=void 0===r?null:r;var i=void 0;if(null!==ua){var a=ua.memoizedState;if(i=a.destroy,null!==r&&ma(r,a.deps))return void(s.memoizedState=Aa(t,n,i,r))}la.flags|=e,s.memoizedState=Aa(1|t,n,i,r)}function Oa(e,t){return La(8390656,8,e,t)}function Ma(e,t){return Pa(2048,8,e,t)}function Fa(e,t){return Pa(4,2,e,t)}function Va(e,t){return Pa(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function za(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4,4,Ua.bind(null,t,e),n)}function Ba(){}function $a(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&oa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(ur(n,t)||(n=gt(),la.lanes|=n,Fl|=n,e.baseState=!0),t)}function Wa(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=aa.transition;aa.transition={};try{e(!1),t()}finally{wt=n,aa.transition=r}}function Ka(){return wa().memoizedState}function Ga(e,t,n){var r=ru(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Xa(t,n);else if(null!==(n=Pi(e,t,n,r))){su(n,e,r,nu()),Ja(n,t,r)}}function Qa(e,t,n){var r=ru(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Xa(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,ur(o,a)){var l=t.interleaved;return null===l?(s.next=s,Li(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(u){}null!==(n=Pi(e,t,s,r))&&(su(n,e,r,s=nu()),Ja(n,t,r))}}function Ya(e){var t=e.alternate;return e===la||null!==t&&t===la}function Xa(e,t){da=ha=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Za={readContext:Ai,useCallback:ga,useContext:ga,useEffect:ga,useImperativeHandle:ga,useInsertionEffect:ga,useLayoutEffect:ga,useMemo:ga,useReducer:ga,useRef:ga,useState:ga,useDebugValue:ga,useDeferredValue:ga,useTransition:ga,useMutableSource:ga,useSyncExternalStore:ga,useId:ga,unstable_isNewReconciler:!1},eo={readContext:Ai,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Ai,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return La(4194308,4,e,t)},useInsertionEffect:function(e,t){return La(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,la,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:ja,useDebugValue:Ba,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=ja(!1),t=e[0];return e=Wa.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=la,s=ba();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===jl)throw Error(i(349));0!==(30&oa)||Na(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Oa(Ca.bind(null,r,a,e),[e]),r.flags|=2048,Aa(9,Ta.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=jl.identifierPrefix;if(ai){var n=Zs;t=":"+t+"R"+(n=(Js&~(1<<32-at(Js)-1)).toString(32)+n),0<(n=fa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},to={readContext:Ai,useCallback:$a,useContext:Ai,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Va,useMemo:qa,useReducer:ka,useRef:Ra,useState:function(){return ka(xa)},useDebugValue:Ba,useDeferredValue:function(e){return Ha(wa(),ua.memoizedState,e)},useTransition:function(){return[ka(xa)[0],wa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ka,unstable_isNewReconciler:!1},no={readContext:Ai,useCallback:$a,useContext:Ai,useEffect:Ma,useImperativeHandle:za,useInsertionEffect:Fa,useLayoutEffect:Va,useMemo:qa,useReducer:_a,useRef:Ra,useState:function(){return _a(xa)},useDebugValue:Ba,useDeferredValue:function(e){var t=wa();return null===ua?t.memoizedState=e:Ha(t,ua.memoizedState,e)},useTransition:function(){return[_a(xa)[0],wa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ea,useId:Ka,unstable_isNewReconciler:!1};function ro(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function so(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nu(),s=ru(e),i=Ui(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(su(t,e,s,r),Bi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nu(),s=ru(e),i=Ui(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(su(t,e,s,r),Bi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nu(),r=ru(e),s=Ui(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=zi(e,s,r))&&(su(t,e,r,n),Bi(t,e,r))}};function ao(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(s,i))}function oo(e,t,n){var r=!1,s=Is,i=t.contextType;return"object"===typeof i&&null!==i?i=Ai(i):(s=Ls(t)?As:Ds.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Rs(e,s):Is),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function lo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function uo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Fi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=Ai(i):(i=Ls(t)?As:Ds.current,s.context=Rs(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(so(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&io.enqueueReplaceState(s,s.state,null),qi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var po="function"===typeof WeakMap?WeakMap:Map;function go(e,t,n){(n=Ui(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=r),fo(0,t)},n}function mo(e,t,n){(n=Ui(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){fo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){fo(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new po;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function vo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ui(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var wo=w.ReactCurrentOwner,xo=!1;function ko(e,t,n,r){t.child=null===e?_i(t,null,n,r):ki(t,e.child,n,r)}function _o(e,t,n,r,s){n=n.render;var i=t.ref;return ji(t,s),r=ya(e,t,n,r,i,s),n=va(),null===e||xo?(ai&&n&&ni(t),t.flags|=1,ko(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function So(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Lu(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ou(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Eo(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return Wo(e,t,s)}return t.flags|=1,(e=Pu(i,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(cr(i,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Wo(e,t,s);0!==(131072&e.flags)&&(xo=!0)}}return Co(e,t,n,r,s)}function No(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(Pl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cs(Pl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Cs(Pl,Ll),Ll|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Cs(Pl,Ll),Ll|=r;return ko(e,t,s,n),t.child}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,s){var i=Ls(n)?As:Ds.current;return i=Rs(t,i),ji(t,s),n=ya(e,t,n,r,i,s),r=va(),null===e||xo?(ai&&r&&ni(t),t.flags|=1,ko(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wo(e,t,s))}function Io(e,t,n,r,s){if(Ls(n)){var i=!0;Fs(t)}else i=!1;if(ji(t,s),null===t.stateNode)Ho(e,t),oo(t,n,r),uo(t,n,r,s),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ai(u):u=Rs(t,u=Ls(n)?As:Ds.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==u)&&lo(t,a,r,u),Mi=!1;var d=t.memoizedState;a.state=d,qi(t,r,a,s),l=t.memoizedState,o!==r||d!==l||js.current||Mi?("function"===typeof c&&(so(t,n,c,r),l=t.memoizedState),(o=Mi||ao(t,n,o,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Vi(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:ro(t.type,o),a.props=u,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ai(l):l=Rs(t,l=Ls(n)?As:Ds.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&lo(t,a,r,l),Mi=!1,d=t.memoizedState,a.state=d,qi(t,r,a,s);var p=t.memoizedState;o!==h||d!==p||js.current||Mi?("function"===typeof f&&(so(t,n,f,r),p=t.memoizedState),(u=Mi||ao(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Do(e,t,n,r,i,s)}function Do(e,t,n,r,s,i){To(e,t);var a=0!==(128&t.flags);if(!r&&!a)return s&&Vs(t,n,!1),Wo(e,t,i);r=t.stateNode,wo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,o,i)):ko(e,t,o,i),t.memoizedState=r.state,s&&Vs(t,n,!0),t.child}function jo(e){var t=e.stateNode;t.pendingContext?Os(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Os(0,t.context,!1),Xi(e,t.containerInfo)}function Ao(e,t,n,r,s){return gi(),mi(s),t.flags|=256,ko(e,t,n,r),t.child}var Ro,Lo,Po,Oo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vo(e,t,n){var r,s=t.pendingProps,a=ta.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Cs(ta,1&a),null===e)return hi(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fu(l,s,0,null),e=Mu(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Mo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,s,a,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=ho(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Fu({mode:"visible",children:r.children},s,0,null),(a=Mu(a,s,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ki(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=ho(a=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=jl)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|o))?0:s)&&s!==a.retryLane&&(a.retryLane=s,Oi(e,s),su(r,e,s,-1))}return yu(),zo(e,t,o,r=ho(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,ii=hs(s.nextSibling),si=t,ai=!0,oi=null,null!==e&&(Qs[Ys++]=Js,Qs[Ys++]=Zs,Qs[Ys++]=Xs,Js=e.id,Zs=e.overflow,Xs=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,a,n);if(o){o=s.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==a?((s=t.child).childLanes=0,s.pendingProps=u,t.deletions=null):(s=Pu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Pu(r,o):(o=Mu(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,s}return e=(o=e.child).sibling,s=Pu(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Uo(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&mi(r),ki(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Di(e.return,t,n)}function $o(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ko(e,t,r.children,n),0!==(2&(r=ta.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Cs(ta,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===na(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),$o(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===na(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}$o(t,!0,n,null,i);break;case"together":$o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Pu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qo(e,t,n){var r=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Ls(t.type)&&Ps(),Go(t),null;case 3:return r=t.stateNode,Ji(),Ts(js),Ts(Ds),sa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oi&&(lu(oi),oi=null))),Lo(e,t),Go(t),null;case 5:ea(t);var s=Yi(Qi.current);if(n=t.type,null!==e&&null!=t.stateNode)Po(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Go(t),null}if(e=Yi(Ki.current),fi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[ps]=t,r[gs]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(s=0;s<Mr.length;s++)zr(Mr[s],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":se(r,a),zr("invalid",r)}for(var l in ve(n,a),s=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&es(r.textContent,u,e),s=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&es(r.textContent,u,e),s=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ts)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ps]=t,e[gs]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),s=r;break;case"iframe":case"object":case"embed":zr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Mr.length;s++)zr(Mr[s],e);s=r;break;case"source":zr("error",e),s=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),s=r;break;case"details":zr("toggle",e),s=r;break;case"input":Y(e,r),s=Q(e,r),zr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),zr("invalid",e)}for(a in ve(n,s),u=s)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?me(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=c&&"onScroll"===a&&zr("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=ts)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Qi.current),Yi(Ki.current),fi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ps]=t,(a=r.nodeValue!==n)&&null!==(e=si))switch(e.tag){case 3:es(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&es(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ps]=t,t.stateNode=r}return Go(t),null;case 13:if(Ts(ta),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ii&&0!==(1&t.mode)&&0===(128&t.flags))pi(),gi(),t.flags|=98560,a=!1;else if(a=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[ps]=t}else gi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==oi&&(lu(oi),oi=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ta.current)?0===Ol&&(Ol=3):yu())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Ji(),Lo(e,t),null===e&&qr(t.stateNode.containerInfo),Go(t),null;case 10:return Ii(t.type._context),Go(t),null;case 19:if(Ts(ta),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ko(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=na(e))){for(t.flags|=128,Ko(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cs(ta,1&ta.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>ql&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=na(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ai)return Go(t),null}else 2*Xe()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ta.current,Cs(ta,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Yo(e,t){switch(ri(t),t.tag){case 1:return Ls(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),Ts(js),Ts(Ds),sa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ea(t),null;case 13:if(Ts(ta),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));gi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ts(ta),null;case 4:return Ji(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Lo=function(){},Po=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yi(Ki.current);var i,a=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),a=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":s=re(e,s),r=re(e,r),a=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=ts)}for(c in ve(n,r),n=null,s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var l=s[c];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=s?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(i in l)!l.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&l[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Jo=!1,Zo="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Nu(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){Nu(e,t,r)}}var rl=!1;function sl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&nl(t,n,i)}s=s.next}while(s!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ps],delete t[gs],delete t[ys],delete t[vs],delete t[bs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function ul(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ts));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function hl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(hl(e,t,n),e=e.sibling;null!==e;)hl(e,t,n),e=e.sibling}var dl=null,fl=!1;function pl(e,t,n){for(n=n.child;null!==n;)gl(e,t,n),n=n.sibling}function gl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Jo||tl(n,t);case 6:var r=dl,s=fl;dl=null,pl(e,t,n),fl=s,null!==(dl=r)&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?cs(e.parentNode,n):1===e.nodeType&&cs(e,n),$t(e)):cs(dl,n.stateNode));break;case 4:r=dl,s=fl,dl=n.stateNode.containerInfo,fl=!0,pl(e,t,n),dl=r,fl=s;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&nl(n,t,a),s=s.next}while(s!==r)}pl(e,t,n);break;case 1:if(!Jo&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Nu(n,t,o)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,pl(e,t,n),Jo=r):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach(function(t){var r=Du.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,fl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===dl)throw Error(i(160));gl(a,o,s),dl=null,fl=!1;var u=s.alternate;null!==u&&(u.return=null),s.return=null}catch(c){Nu(s,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),bl(e),4&r){try{sl(3,e,e.return),il(3,e)}catch(m){Nu(e,e.return,m)}try{sl(5,e,e.return)}catch(m){Nu(e,e.return,m)}}break;case 1:yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(yl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(m){Nu(e,e.return,m)}}if(4&r&&null!=(s=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(s,a),be(l,o);var c=be(l,a);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];"style"===h?me(s,d):"dangerouslySetInnerHTML"===h?he(s,d):"children"===h?de(s,d):b(s,h,d,c)}switch(l){case"input":J(s,a);break;case"textarea":ie(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(s,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(s,!!a.multiple,a.defaultValue,!0):ne(s,!!a.multiple,a.multiple?[]:"",!1))}s[gs]=a}catch(m){Nu(e,e.return,m)}}break;case 6:if(yl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(m){Nu(e,e.return,m)}}break;case 3:if(yl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(m){Nu(e,e.return,m)}break;case 4:default:yl(t,e),bl(e);break;case 13:yl(t,e),bl(e),8192&(s=e.child).flags&&(a=null!==s.memoizedState,s.stateNode.isHidden=a,!a||null!==s.alternate&&null!==s.alternate.memoizedState||($l=Xe())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(c=Jo)||h,yl(t,e),Jo=c):yl(t,e),bl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(el=e,h=e.child;null!==h;){for(d=el=h;null!==el;){switch(p=(f=el).child,f.tag){case 0:case 11:case 14:case 15:sl(4,f,f.return);break;case 1:tl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Nu(r,n,m)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,el=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,c?"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",o))}catch(m){Nu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Nu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yl(t,e),bl(e),4&r&&ml(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),hl(e,ul(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;cl(e,ul(e),a);break;default:throw Error(i(161))}}catch(Jt){Nu(e,e.return,Jt)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){el=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var s=el,i=s.child;if(22===s.tag&&r){var a=null!==s.memoizedState||Xo;if(!a){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Xo;var u=Jo;if(Xo=a,(Jo=l)&&!u)for(el=s;null!==el;)l=(a=el).child,22===a.tag&&null!==a.memoizedState?Sl(s):null!==l?(l.return=a,el=l):Sl(s);for(;null!==i;)el=i,xl(i,t,n),i=i.sibling;el=s,Xo=o,Jo=u}kl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,el=i):kl(e)}}function kl(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ro(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hi(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&$t(d)}}}break;default:throw Error(i(163))}Jo||512&t.flags&&al(t)}catch(f){Nu(t,t.return,f)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function _l(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function Sl(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(Jt){Nu(t,n,Jt)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(Jt){Nu(t,s,Jt)}}var i=t.return;try{al(t)}catch(Jt){Nu(t,i,Jt)}break;case 5:var a=t.return;try{al(t)}catch(Jt){Nu(t,a,Jt)}}}catch(Jt){Nu(t,t.return,Jt)}if(t===e){el=null;break}var o=t.sibling;if(null!==o){o.return=t.return,el=o;break}el=t.return}}var El,Nl=Math.ceil,Tl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Dl=0,jl=null,Al=null,Rl=0,Ll=0,Pl=Ns(0),Ol=0,Ml=null,Fl=0,Vl=0,Ul=0,zl=null,Bl=null,$l=0,ql=1/0,Hl=null,Wl=!1,Kl=null,Gl=null,Ql=!1,Yl=null,Xl=0,Jl=0,Zl=null,eu=-1,tu=0;function nu(){return 0!==(6&Dl)?Xe():-1!==eu?eu:eu=Xe()}function ru(e){return 0===(1&e.mode)?1:0!==(2&Dl)&&0!==Rl?Rl&-Rl:null!==yi.transition?(0===tu&&(tu=gt()),tu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function su(e,t,n,r){if(50<Jl)throw Jl=0,Zl=null,Error(i(185));yt(e,n,r),0!==(2&Dl)&&e===jl||(e===jl&&(0===(2&Dl)&&(Vl|=n),4===Ol&&uu(e,Rl)),iu(e,r),1===n&&0===Dl&&0===(1&t.mode)&&(ql=Xe()+500,zs&&qs()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=dt(e,e===jl?Rl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){zs=!0,$s(e)}(cu.bind(null,e)):$s(cu.bind(null,e)),ls(function(){0===(6&Dl)&&qs()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=ju(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(eu=-1,tu=0,0!==(6&Dl))throw Error(i(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=dt(e,e===jl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var s=Dl;Dl|=2;var a=mu();for(jl===e&&Rl===t||(Hl=null,ql=Xe()+500,pu(e,t));;)try{wu();break}catch(l){gu(e,l)}Ci(),Tl.current=a,Dl=s,null!==Al?t=0:(jl=null,Rl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=ou(e,s))),1===t)throw n=Ml,pu(e,0),uu(e,r),iu(e,Xe()),n;if(6===t)uu(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ur(i(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=vu(e,r))&&(0!==(a=pt(e))&&(r=a,t=ou(e,a))),1===t))throw n=Ml,pu(e,0),uu(e,r),iu(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:_u(e,Bl,Hl);break;case 3:if(uu(e,r),(130023424&r)===r&&10<(t=$l+500-Xe())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){nu(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=is(_u.bind(null,e,Bl,Hl),t);break}_u(e,Bl,Hl);break;case 4:if(uu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>s&&(s=o),r&=~a}if(r=s,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=is(_u.bind(null,e,Bl,Hl),r);break}_u(e,Bl,Hl);break;default:throw Error(i(329))}}}return iu(e,Xe()),e.callbackNode===n?au.bind(null,e):null}function ou(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Bl,Bl=n,null!==t&&lu(t)),e}function lu(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function uu(e,t){for(t&=~Ul,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cu(e){if(0!==(6&Dl))throw Error(i(327));Su();var t=dt(e,0);if(0===(1&t))return iu(e,Xe()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Ml,pu(e,0),uu(e,t),iu(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_u(e,Bl,Hl),iu(e,Xe()),null}function hu(e,t){var n=Dl;Dl|=1;try{return e(t)}finally{0===(Dl=n)&&(ql=Xe()+500,zs&&qs())}}function du(e){null!==Yl&&0===Yl.tag&&0===(6&Dl)&&Su();var t=Dl;Dl|=1;var n=Il.transition,r=wt;try{if(Il.transition=null,wt=1,e)return e()}finally{wt=r,Il.transition=n,0===(6&(Dl=t))&&qs()}}function fu(){Ll=Pl.current,Ts(Pl)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,as(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ri(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ps();break;case 3:Ji(),Ts(js),Ts(Ds),sa();break;case 5:ea(r);break;case 4:Ji();break;case 13:case 19:Ts(ta);break;case 10:Ii(r.type._context);break;case 22:case 23:fu()}n=n.return}if(jl=e,Al=e=Pu(e.current,null),Rl=Ll=t,Ol=0,Ml=null,Ul=Vl=Fl=0,Bl=zl=null,null!==Ri){for(t=0;t<Ri.length;t++)if(null!==(r=(n=Ri[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=s,r.next=a}n.pending=r}Ri=null}return e}function gu(e,t){for(;;){var n=Al;try{if(Ci(),ia.current=Za,ha){for(var r=la.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}ha=!1}if(oa=0,ca=ua=la=null,da=!1,fa=0,Cl.current=null,null===n||null===n.return){Ol=1,Ml=t,Al=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=vo(o);if(null!==p){p.flags&=-257,bo(p,o,l,0,t),1&p.mode&&yo(a,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){yo(a,c,t),yu();break e}u=Error(i(426))}else if(ai&&1&l.mode){var y=vo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bo(y,o,l,0,t),mi(co(u,l));break e}}a=u=co(u,l),4!==Ol&&(Ol=2),null===zl?zl=[a]:zl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,$i(a,go(0,u,t));break e;case 1:l=u;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,$i(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}ku(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mu(){var e=Tl.current;return Tl.current=Za,null===e?Za:e}function yu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===jl||0===(268435455&Fl)&&0===(268435455&Vl)||uu(jl,Rl)}function vu(e,t){var n=Dl;Dl|=2;var r=mu();for(jl===e&&Rl===t||(Hl=null,pu(e,t));;)try{bu();break}catch(s){gu(e,s)}if(Ci(),Dl=n,Tl.current=r,null!==Al)throw Error(i(261));return jl=null,Rl=0,Ol}function bu(){for(;null!==Al;)xu(Al)}function wu(){for(;null!==Al&&!Qe();)xu(Al)}function xu(e){var t=El(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?ku(e):Al=t,Cl.current=null}function ku(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,Ll)))return void(Al=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function _u(e,t,n){var r=wt,s=Il.transition;try{Il.transition=null,wt=1,function(e,t,n,r){do{Su()}while(null!==Yl);if(0!==(6&Dl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-at(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,a),e===jl&&(Al=jl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,ju(tt,function(){return Su(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var o=wt;wt=1;var l=Dl;Dl|=4,Cl.current=null,function(e,t){if(ns=Ht,gr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(bt){n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==a||0!==r&&3!==d.nodeType||(u=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===s&&(l=o),f===a&&++h===r&&(u=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rs={focusedElem:e,selectionRange:n},Ht=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ro(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(bt){Nu(t,t.return,bt)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}g=rl,rl=!1}(e,n),vl(n,e),mr(rs),Ht=!!ns,rs=ns=null,e.current=n,wl(n,e,s),Ye(),Dl=l,wt=o,Il.transition=a}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Xl=s),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&Xl)&&0!==e.tag&&Su(),a=e.pendingLanes,0!==(1&a)?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,qs()}(e,t,n,r)}finally{Il.transition=s,wt=r}return null}function Su(){if(null!==Yl){var e=xt(Xl),t=Il.transition,n=wt;try{if(Il.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Dl))throw Error(i(331));var s=Dl;for(Dl|=4,el=e.current;null!==el;){var a=el,o=a.child;if(0!==(16&el.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(el=c;null!==el;){var h=el;switch(h.tag){case 0:case 11:case 15:sl(8,h,a)}var d=h.child;if(null!==d)d.return=h,el=d;else for(;null!==el;){var f=(h=el).sibling,p=h.return;if(ol(h),h===c){el=null;break}if(null!==f){f.return=p,el=f;break}el=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}el=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,el=o;else e:for(;null!==el;){if(0!==(2048&(a=el).flags))switch(a.tag){case 0:case 11:case 15:sl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,el=v;break e}el=a.return}}var b=e.current;for(el=b;null!==el;){var w=(o=el).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,el=w;else e:for(o=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){Nu(l,l.return,k)}if(l===o){el=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,el=x;break e}el=l.return}}if(Dl=s,qs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(k){}r=!0}return r}finally{wt=n,Il.transition=t}}return!1}function Eu(e,t,n){e=zi(e,t=go(0,t=co(n,t),1),1),t=nu(),null!==e&&(yt(e,1,t),iu(e,t))}function Nu(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=zi(t,e=mo(t,e=co(n,e),1),1),e=nu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nu(),e.pingedLanes|=e.suspendedLanes&n,jl===e&&(Rl&n)===n&&(4===Ol||3===Ol&&(130023424&Rl)===Rl&&500>Xe()-$l?pu(e,0):Ul|=n),iu(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=nu();null!==(e=Oi(e,t))&&(yt(e,t,n),iu(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Du(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cu(e,n)}function ju(e,t){return Ke(e,t)}function Au(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,t,n,r){return new Au(e,t,n,r)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pu(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ou(e,t,n,r,s,a){var o=2;if(r=e,"function"===typeof e)Lu(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Mu(n.children,s,a,t);case S:o=8,s|=8;break;case E:return(e=Ru(12,n,t,2|s)).elementType=E,e.lanes=a,e;case I:return(e=Ru(13,n,t,s)).elementType=I,e.lanes=a,e;case D:return(e=Ru(19,n,t,s)).elementType=D,e.lanes=a,e;case R:return Fu(n,s,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case T:o=9;break e;case C:o=11;break e;case j:o=14;break e;case A:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ru(o,n,t,s)).elementType=e,t.type=r,t.lanes=a,t}function Mu(e,t,n,r){return(e=Ru(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Ru(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Vu(e,t,n){return(e=Ru(6,e,null,t)).lanes=n,e}function Uu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,s,i,a,o,l){return e=new zu(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ru(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fi(i),e}function $u(e){if(!e)return Is;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ls(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ls(n))return Ms(e,n,t)}return t}function qu(e,t,n,r,s,i,a,o,l){return(e=Bu(n,r,!0,e,0,i,0,o,l)).context=$u(null),n=e.current,(i=Ui(r=nu(),s=ru(n))).callback=void 0!==t&&null!==t?t:null,zi(n,i,s),e.current.lanes=s,yt(e,s,r),iu(e,r),e}function Hu(e,t,n,r){var s=t.current,i=nu(),a=ru(s);return n=$u(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ui(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zi(s,t,a))&&(su(e,s,a,i),Bi(e,s,a)),a}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||js.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:jo(t),gi();break;case 5:Zi(t);break;case 1:Ls(t.type)&&Fs(t);break;case 4:Xi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Cs(Si,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Cs(ta,1&ta.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vo(e,t,n):(Cs(ta,1&ta.current),null!==(e=Wo(e,t,n))?e.sibling:null);Cs(ta,1&ta.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Cs(ta,ta.current),r)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Wo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,ai&&0!==(1048576&t.flags)&&ti(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var s=Rs(t,Ds.current);ji(t,n),s=ya(null,t,r,e,s,n);var a=va();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ls(r)?(a=!0,Fs(t)):a=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Fi(t),s.updater=io,t.stateNode=s,s._reactInternals=t,uo(t,r,e,n),t=Do(null,t,r,!0,a,n)):(t.tag=0,ai&&a&&ni(t),ko(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===j)return 14}return 2}(r),e=ro(r,e),s){case 0:t=Co(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=_o(null,t,r,e,n);break e;case 14:t=So(null,t,r,ro(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Co(e,t,r,s=t.elementType===r?s:ro(r,s),n);case 1:return r=t.type,s=t.pendingProps,Io(e,t,r,s=t.elementType===r?s:ro(r,s),n);case 3:e:{if(jo(t),null===e)throw Error(i(387));r=t.pendingProps,s=(a=t.memoizedState).element,Vi(e,t),qi(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ao(e,t,r,n,s=co(Error(i(423)),t));break e}if(r!==s){t=Ao(e,t,r,n,s=co(Error(i(424)),t));break e}for(ii=hs(t.stateNode.containerInfo.firstChild),si=t,ai=!0,oi=null,n=_i(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(gi(),r===s){t=Wo(e,t,n);break e}ko(e,t,r,n)}t=t.child}return t;case 5:return Zi(t),null===e&&hi(t),r=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,o=s.children,ss(r,s)?o=null:null!==a&&ss(r,a)&&(t.flags|=32),To(e,t),ko(e,t,o,n),t.child;case 6:return null===e&&hi(t),null;case 13:return Vo(e,t,n);case 4:return Xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ki(t,null,r,n):ko(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,_o(e,t,r,s=t.elementType===r?s:ro(r,s),n);case 7:return ko(e,t,t.pendingProps,n),t.child;case 8:case 12:return ko(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Cs(Si,r._currentValue),r._currentValue=o,null!==a)if(ur(a.value,o)){if(a.children===s.children&&!js.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Ui(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Di(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Di(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}ko(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ji(t,n),r=r(s=Ai(s)),t.flags|=1,ko(e,t,r,n),t.child;case 14:return s=ro(r=t.type,t.pendingProps),So(e,t,r,s=ro(r.type,s),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ro(r,s),Ho(e,t),t.tag=1,Ls(r)?(e=!0,Fs(t)):e=!1,ji(t,n),oo(t,r,s),uo(t,r,s,n),Do(null,t,r,!0,e,n);case 19:return qo(e,t,n);case 22:return No(e,t,n)}throw Error(i(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ec(){}function tc(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof s){var o=s;s=function(){var e=Wu(a);o.call(e)}}Hu(t,a,e,s)}else a=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Wu(a);i.call(e)}}var a=qu(t,r,e,0,null,!1,0,"",ec);return e._reactRootContainer=a,e[ms]=a.current,qr(8===e.nodeType?e.parentNode:e),du(),a}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var o=r;r=function(){var e=Wu(l);o.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",ec);return e._reactRootContainer=l,e[ms]=l.current,qr(8===e.nodeType?e.parentNode:e),du(function(){Hu(t,l,n,r)}),l}(n,t,e,s,r);return Wu(a)}Xu.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hu(e,t,null,null)},Xu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du(function(){Hu(null,e,null,null)}),t[ms]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ft(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),iu(t,Xe()),0===(6&Dl)&&(ql=Xe()+500,qs()))}break;case 13:du(function(){var t=Oi(e,1);if(null!==t){var n=nu();su(t,e,1,n)}}),Gu(e,1)}},_t=function(e){if(13===e.tag){var t=Oi(e,134217728);if(null!==t)su(t,e,134217728,nu());Gu(e,134217728)}},St=function(e){if(13===e.tag){var t=ru(e),n=Oi(e,t);if(null!==n)su(n,e,t,nu());Gu(e,t)}},Et=function(){return wt},Nt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=_s(r);if(!s)throw Error(i(90));K(r),J(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=hu,Ie=du;var nc={usingClientEntryPoint:!1,Events:[xs,ks,_s,Ne,Te,hu]},rc={findFiberByHostInstance:ws,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sc={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{st=ic.inject(sc),it=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Ju(e))throw Error(i(299));var n=!1,r="",s=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!Zu(t))throw Error(i(200));return tc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ju(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,a="",o=Qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,s,0,a,o),e[ms]=t.current,qr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Xu(t)},t.render=function(e,t,n){if(!Zu(t))throw Error(i(200));return tc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(i(40));return!!e._reactRootContainer&&(du(function(){tc(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=hu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zu(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return tc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),s=n(391);const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,i||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==l)throw new o;const u=t<<2|i>>4;if(r.push(u),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=i(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const h=()=>{try{return c().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/TradeJournalWeb",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},d=e=>{const t=(e=>h()?.emulatorHosts?.[e])(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>h()?.config;class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function m(e){return(await fetch(e,{credentials:"include"})).ok}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(i)),""].join(".")}const v={};let b=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||v[e]===t||v[e]||b)return;function n(e){return`__firebase__banner__${e}`}v[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(v))v[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),u=n("preprendIcon"),c=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(c,u),t.append(c,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",c.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(c.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function k(){const e=h()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function _(){return!k()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){try{return"object"===typeof indexedDB}catch(e){return!1}}class E extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,E.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(T,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new E(n,i,t)}}const T=/\{\$([^}]+)}/g;function C(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(I(n)&&I(i)){if(!C(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function I(e){return null!==e&&"object"===typeof e}function D(e){return e&&e._delegate?e._delegate:e}class j{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const A="[DEFAULT]";class R{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new p;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:A})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const s=this.instances.get(n);return s&&e(s,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===A?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return this.component?this.component.multipleInstances?e:A:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new R(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const P=[];var O;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(O||(O={}));const M={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},F=O.INFO,V={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},U=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=V[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...i)};class z{constructor(e){this.name=e,this._logLevel=F,this._logHandler=U,this._userLogHandler=null,P.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?M[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...t),this._logHandler(this,O.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...t),this._logHandler(this,O.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.INFO,...t),this._logHandler(this,O.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.WARN,...t),this._logHandler(this,O.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,O.ERROR,...t),this._logHandler(this,O.ERROR,...t)}}let B,$;const q=new WeakMap,H=new WeakMap,W=new WeakMap,K=new WeakMap,G=new WeakMap;let Q={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return H.get(e);if("objectStoreNames"===t)return e.objectStoreNames||W.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return J(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Y(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Z(this),n),J(q.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return J(e.apply(Z(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Z(this),t,...r);return W.set(i,t.sort?t.sort():[t]),J(i)}}function X(e){return"function"===typeof e?Y(e):(e instanceof IDBTransaction&&function(e){if(H.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});H.set(e,t)}(e),t=e,(B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Q):e);var t}function J(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(J(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&q.set(t,e)}).catch(()=>{}),G.set(t,e),t}(e);if(K.has(e))return K.get(e);const t=X(e);return t!==e&&(K.set(e,t),G.set(t,e)),t}const Z=e=>G.get(e);const ee=["get","getKey","getAll","getAllKeys","count"],te=["put","add","delete","clear"],ne=new Map;function re(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ne.get(t))return ne.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=te.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!ee.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return ne.set(t,i),i}Q=(e=>({...e,get:(t,n,r)=>re(t,n)||e.get(t,n,r),has:(t,n)=>!!re(t,n)||e.has(t,n)}))(Q);class se{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const ie="@firebase/app",ae="0.14.0",oe=new z("@firebase/app"),le="@firebase/app-compat",ue="@firebase/analytics-compat",ce="@firebase/analytics",he="@firebase/app-check-compat",de="@firebase/app-check",fe="@firebase/auth",pe="@firebase/auth-compat",ge="@firebase/database",me="@firebase/data-connect",ye="@firebase/database-compat",ve="@firebase/functions",be="@firebase/functions-compat",we="@firebase/installations",xe="@firebase/installations-compat",ke="@firebase/messaging",_e="@firebase/messaging-compat",Se="@firebase/performance",Ee="@firebase/performance-compat",Ne="@firebase/remote-config",Te="@firebase/remote-config-compat",Ce="@firebase/storage",Ie="@firebase/storage-compat",De="@firebase/firestore",je="@firebase/ai",Ae="@firebase/firestore-compat",Re="firebase",Le="[DEFAULT]",Pe={[ie]:"fire-core",[le]:"fire-core-compat",[ce]:"fire-analytics",[ue]:"fire-analytics-compat",[de]:"fire-app-check",[he]:"fire-app-check-compat",[fe]:"fire-auth",[pe]:"fire-auth-compat",[ge]:"fire-rtdb",[me]:"fire-data-connect",[ye]:"fire-rtdb-compat",[ve]:"fire-fn",[be]:"fire-fn-compat",[we]:"fire-iid",[xe]:"fire-iid-compat",[ke]:"fire-fcm",[_e]:"fire-fcm-compat",[Se]:"fire-perf",[Ee]:"fire-perf-compat",[Ne]:"fire-rc",[Te]:"fire-rc-compat",[Ce]:"fire-gcs",[Ie]:"fire-gcs-compat",[De]:"fire-fst",[Ae]:"fire-fst-compat",[je]:"fire-vertex","fire-js":"fire-js",[Re]:"fire-js-all"},Oe=new Map,Me=new Map,Fe=new Map;function Ve(e,t){try{e.container.addComponent(t)}catch(n){oe.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ue(e){const t=e.name;if(Fe.has(t))return oe.debug(`There were multiple attempts to register component ${t}.`),!1;Fe.set(t,e);for(const n of Oe.values())Ve(n,e);for(const n of Me.values())Ve(n,e);return!0}function ze(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Be(e){return null!==e&&void 0!==e&&void 0!==e.settings}const $e=new N("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class qe{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new j("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $e.create("app-deleted",{appName:this._name})}}const He="12.0.0";function We(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r={name:Le,automaticDataCollectionEnabled:!0,...t},s=r.name;if("string"!==typeof s||!s)throw $e.create("bad-app-name",{appName:String(s)});if(n||(n=f()),!n)throw $e.create("no-options");const i=Oe.get(s);if(i){if(C(n,i.options)&&C(r,i.config))return i;throw $e.create("duplicate-app",{appName:s})}const a=new L(s);for(const l of Fe.values())a.addComponent(l);const o=new qe(n,r,a);return Oe.set(s,o),o}function Ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;const t=Oe.get(e);if(!t&&e===Le&&f())return We();if(!t)throw $e.create("no-app",{appName:e});return t}function Ge(e,t,n){let r=Pe[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const e=[`Unable to register library "${r}" with version "${t}":`];return s&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void oe.warn(e.join(" "))}Ue(new j(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Qe="firebase-heartbeat-store";let Ye=null;function Xe(){return Ye||(Ye=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=J(a);return r&&a.addEventListener("upgradeneeded",e=>{r(J(a.result),e.oldVersion,e.newVersion,J(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Qe)}catch(n){console.warn(n)}}}).catch(e=>{throw $e.create("idb-open",{originalErrorMessage:e.message})})),Ye}async function Je(e,t){try{const n=(await Xe()).transaction(Qe,"readwrite"),r=n.objectStore(Qe);await r.put(t,Ze(e)),await n.done}catch(n){if(n instanceof E)oe.warn(n.message);else{const e=$e.create("idb-set",{originalErrorMessage:n?.message});oe.warn(e.message)}}}function Ze(e){return`${e.name}!${e.options.appId}`}class et{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=tt();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){oe.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=tt(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),rt(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),rt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=l(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return oe.warn(e),""}}}function tt(){return(new Date).toISOString().substring(0,10)}class nt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!S()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Xe()).transaction(Qe),n=await t.objectStore(Qe).get(Ze(e));return await t.done,n}catch(t){if(t instanceof E)oe.warn(t.message);else{const e=$e.create("idb-get",{originalErrorMessage:t?.message});oe.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Je(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return Je(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function rt(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var st;st="",Ue(new j("platform-logger",e=>new se(e),"PRIVATE")),Ue(new j("heartbeat",e=>new et(e),"PRIVATE")),Ge(ie,ae,st),Ge(ie,ae,"esm2020"),Ge("fire-js","");Ge("firebase","12.0.0","app");var it,at,ot="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},lt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),u=i(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(c(t))throw Error("division by zero");if(c(e))return new g(o,o);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=i.add(r);0>=u.l(e)&&(s=s.add(n),i=u),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new g(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(i=a(n)).j(t);h(u)||0<u.l(e);)u=(i=a(n-=r)).j(t);c(i)&&(i=l),s=s.add(i),e=f(e,u)}return new g(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=m(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(u)&&0>e.l(u))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),g=e.i(i)>>>16,m=65535&e.i(i);n[2*s+2*i]+=f*m,p(n,2*s+2*i),n[2*s+2*i+1]+=l*m,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*g,p(n,2*s+2*i+1),n[2*s+2*i+2]+=l*g,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,at=lt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),u=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(u))):s=(s=s.j(r)).add(a(u))}return s},it=lt.Integer=r}).apply("undefined"!==typeof ot?ot:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ut,ct,ht,dt,ft,pt,gt,mt,yt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},vt={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof yt&&yt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){s.setTimeout(()=>{throw e},0)}function S(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new N,e=>e.reset());class N{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},D=()=>{const e=s.Promise.resolve(void 0);T=()=>{e.then(j)}};var j=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){_(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function A(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function P(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.aa.h.call(this)}}h(P,R);var O={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=$(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new V(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,s){if(r&&r.once)return G(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)L||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function Q(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(i=e.g[t],n,r,s))&&(U(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,s)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):U(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new P(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;x(t=new R(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,A),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}h(le,A);var ue=[];function ce(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=s.JSON.stringify,de=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){R.call(this,"d")}function be(){R.call(this,"c")}h(ve,R),h(be,R);var we={},xe=null;function ke(){return xe=xe||new ne}function _e(e){R.call(this,we.La,e)}function Se(e){const t=ke();re(t,new _e(t))}function Ee(e,t){R.call(this,we.STAT_EVENT,e),this.stat=t}function Ne(e){const t=ke();re(t,new Ee(t,e))}function Te(e,t){R.call(this,we.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function De(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return he(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",h(_e,R),we.STAT_EVENT="statevent",h(Ee,R),we.Ma="timingevent",h(Te,R),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var je,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Le(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}h(Le,pe),Le.prototype.g=function(){return new XMLHttpRequest},Le.prototype.i=function(){return{}},je=new Le;var Me={},Fe={};function Ve(e,t,n){e.L=1,e.v=xt(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Pt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=_n(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ue[0]=s.toString()),s=ue);for(var i=0;i<s.length;i++){var a=W(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(u(e.ba,e),t)}function He(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||vn(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yn(n),on(n)}pn(n),Ne(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(u(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&yn(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let u=s[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=u[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,wt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),$e(o)),r.g=a}else fn(r);0<n.i.length&&un(n)}else"stop"!=u[0]&&"close"!=u[0]||wn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?wn(n,7):an(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}Se()}catch(c){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const d=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=d||7==t||Se(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=nn(this.g);e="";var i=r.length,a=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Ne(12),Ke(this),We(this);break e}De(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==d&&(this.s=4,Ne(14),n=!1),De(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ne(15),De(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}De(this.i,this.l,e,null),Ge(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Ne(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),gn(h),h.M=!0,Ne(11))}}else De(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),We(this)}else De(this.i,this.l,o,null),Ge(this,o);4==d&&Ke(this),this.o&&!this.J&&(4==d?vn(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=k(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Ke(this),We(this)}}}catch(d){}},Pe.prototype.cancel=function(){this.J=!0,Ke(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Se(),Ne(17)),Ke(this),this.s=2,We(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new jt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bt(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=kt(t[2]||""),this.g=kt(t[3]||"",!0),lt(this,t[4]),this.l=kt(t[5]||"",!0),bt(this,t[6]||"",!0),this.m=kt(t[7]||"")):(this.h=!1,this.i=new jt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function bt(e,t,n){t instanceof jt?(e.i=t,function(e,t){t&&!e.j&&(At(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Rt(this,t),Pt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=_t(t,It)),e.i=new jt(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function xt(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _t(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,St),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function St(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_t(t,Nt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(_t(t,Nt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(_t(n,"/"==n.charAt(0)?Ct:Tt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",_t(n,Dt)),e.join("")};var Et,Nt=/[#\/\?@]/g,Tt=/[#\?:]/g,Ct=/[#\?]/g,It=/[#\?@]/g,Dt=/#/g;function jt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function At(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Rt(e,t){At(e),t=Ot(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Lt(e,t){return At(e),t=Ot(e,t),e.g.has(t)}function Pt(e,t,n){Rt(e,t),0<n.length&&(e.i=null,e.g.set(Ot(e,t),d(n)),e.h+=n.length)}function Ot(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Ft(){this.g=new fe}function Vt(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=he(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Ut(e){this.l=e.Ub||null,this.j=e.eb||!1}function zt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function $t(e){e.readyState=4,e.l=null,e.j=null,e.v=null,qt(e)}function qt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Wt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wt(e,t,n))}function Kt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=jt.prototype).add=function(e,t){At(this),this.i=null,e=Ot(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){At(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){At(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){At(this);let t=[];if("string"===typeof e)Lt(this,e)&&(t=t.concat(this.g.get(Ot(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return At(this),this.i=null,Lt(this,e=Ot(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},h(Ut,pe),Ut.prototype.g=function(){return new zt(this.l,this.j)},Ut.prototype.i=(Et={},function(){return Et}),h(zt,ne),(e=zt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,qt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$t(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qt(this)),this.g&&(this.readyState=3,qt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?$t(this):qt(this),3==this.readyState&&Bt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,$t(this))},e.Qa=function(e){this.g&&(this.response=e,$t(this))},e.ga=function(){this.g&&$t(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Kt,ne);var Gt=/^https?$/i,Qt=["POST","PUT"];function Yt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),Zt(e)}function Xt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Gt.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<tn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Xt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function en(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Ft,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function an(e){if(ln(e),3==e.G){var t=e.U++,n=at(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),hn(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=xt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=_n(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}xn(e)}function on(e){e.g&&(gn(e),e.g.cancel(),e.g=null)}function ln(e){on(e),e.u&&(s.clearTimeout(e.u),e.u=null),yn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function un(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||D(),C||(T(),C=!0),I.add(t,e),e.B=0}}function cn(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.T),hn(e,r),e.m&&e.o&&Wt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=dn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function hn(e,t){e.H&&v(e.H,function(e,n){wt(t,n,e)}),e.l&&rt({},function(e,n){wt(t,n,e)})}function dn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{Vt(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||D(),C||(T(),C=!0),I.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(u(e.Fa,e),bn(e,e.v)),e.v++,!0)}function gn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function mn(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.T),wt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&wt(t,"TO",e.ja),wt(t,"TYPE","xmlhttp"),hn(e,t),e.m&&e.o&&Wt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=xt(at(t)),n.m=null,n.P=!0,Ue(n,e)}function yn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function vn(e,t){var n=null;if(e.g==t){yn(e),gn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=ke(),new Te(r,n)),un(e)}else fn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(u(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),xt(r),t?function(e,t){const n=new Ie;if(s.Image){const r=new Image;r.onload=c(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Mt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Mt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Mt(0,0,!1,t)})}(r.toString(),n)}else Ne(2);e.G=0,e.l&&e.l.sa(t),xn(e),ln(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&wt(r,n,t),wt(r,"VER",e.la),hn(e,r),r}function _n(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Kt(new Ut({eb:n})):new Kt(e.pa)).Ha(e.J),t}function Sn(){}function En(){}function Nn(e,t){ne.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function Tn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cn(){be.call(this),this.status=1}function In(e){this.g=e}(e=Kt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?ge(this.o):ge(je),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Yt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Qt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Yt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Et){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Et){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ne(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),un(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Pe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),x(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=dn(this,s,t),wt(n=at(this.I),"RID",e),wt(n,"CVER",22),this.D&&wt(n,"X-HTTP-Session-Id",this.D),hn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ht(i)))+"&"+t:this.m&&Wt(n,this.m,i)),et(this.h,s),this.Ua&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),s.T=!0,Ve(s,n,null)):Ve(s,n,t),this.G=2}}else 3==this.G&&(e?cn(this,e):0==this.i.length||Xe(this.h)||cn(this))},e.Fa=function(){if(this.u=null,mn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),on(this),mn(this))},e.Za=function(){null!=this.C&&(this.C=null,on(this),pn(this),Ne(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Sn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},En.prototype.g=function(e,t){return new Nn(e,t)},h(Nn,ne),Nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){an(this.g)},Nn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&un(t)},Nn.prototype.N=function(){this.g.l=null,delete this.j,an(this.g),delete this.g,Nn.aa.N.call(this)},h(Tn,ve),h(Cn,be),h(In,Sn),In.prototype.ua=function(){re(this.g,"a")},In.prototype.ta=function(e){re(this.g,new Tn(e))},In.prototype.sa=function(e){re(this.g,new Cn)},In.prototype.ra=function(){re(this.g,"b")},En.prototype.createWebChannel=En.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,mt=vt.createWebChannelTransport=function(){return new En},gt=vt.getStatEventTarget=function(){return ke()},pt=vt.Event=we,ft=vt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,dt=vt.ErrorCode=Ae,Re.COMPLETE="complete",ht=vt.EventType=Re,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ct=vt.WebChannel=me,vt.FetchXmlHttpFactory=Ut,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,ut=vt.XhrIo=Kt}).apply("undefined"!==typeof yt?yt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const bt="@firebase/firestore",wt="4.9.0";class xt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");let kt="12.0.0";const _t=new z("@firebase/firestore");function St(){return _t.logLevel}function Et(e){if(_t.logLevel<=O.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Ct);_t.debug(`Firestore (${kt}): ${e}`,...s)}}function Nt(e){if(_t.logLevel<=O.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Ct);_t.error(`Firestore (${kt}): ${e}`,...s)}}function Tt(e){if(_t.logLevel<=O.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Ct);_t.warn(`Firestore (${kt}): ${e}`,...s)}}function Ct(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function It(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Dt(e,r,n)}function Dt(e,t,n){let r=`FIRESTORE (${kt}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Nt(r),new Error(r)}function jt(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||Dt(t,s,r)}function At(e,t){return e}const Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lt extends E{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ot{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Mt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}}class Ft{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Vt{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){jt(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pt,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Et("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pt)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(jt("string"==typeof t.accessToken,31837,{l:t}),new Ot(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jt(null===e||"string"==typeof e,2055,{h:e}),new xt(e)}}class Ut{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zt{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Ut(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Bt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $t{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Be(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){jt(void 0===this.o,3512);const n=e=>{null!=e.error&&Et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Et("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Bt(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(jt("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Bt(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function qt(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ht{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=qt(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Wt(e,t){return e<t?-1:e>t?1:0}function Kt(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return Yt(n)===Yt(s)?Wt(n,s):Yt(n)?1:-1}return Wt(e.length,t.length)}const Gt=55296,Qt=57343;function Yt(e){const t=e.charCodeAt(0);return t>=Gt&&t<=Qt}function Xt(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Jt="__name__";class Zt{constructor(e,t,n){void 0===t?t=0:t>e.length&&It(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&It(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Zt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zt?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Zt.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Wt(e.length,t.length)}static compareSegments(e,t){const n=Zt.isNumericId(e),r=Zt.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Zt.extractNumericId(e).compare(Zt.extractNumericId(t)):Kt(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return it.fromString(e.substring(4,e.length-2))}}class en extends Zt{construct(e,t,n){return new en(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Lt(Rt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new en(e)}static emptyPath(){return new en([])}}const tn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends Zt{construct(e,t,n){return new nn(e,t,n)}static isValidIdentifier(e){return tn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Jt}static keyField(){return new nn([Jt])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Lt(Rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Lt(Rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Lt(Rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Lt(Rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}class rn{constructor(e){this.path=e}static fromPath(e){return new rn(en.fromString(e))}static fromName(e){return new rn(en.fromString(e).popFirst(5))}static empty(){return new rn(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===en.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return en.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rn(new en(e.slice()))}}function sn(e,t,n){if(!n)throw new Lt(Rt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function an(e){if(!rn.isDocumentKey(e))throw new Lt(Rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function on(e){if(rn.isDocumentKey(e))throw new Lt(Rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ln(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function un(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":It(12329,{type:typeof e})}function cn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lt(Rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=un(e);throw new Lt(Rt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function hn(e,t){const n={typeString:e};return t&&(n.value=t),n}function dn(e,t){if(!ln(e))throw new Lt(Rt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(void 0!==i&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Lt(Rt.INVALID_ARGUMENT,n);return!0}const fn=-62135596800,pn=1e6;class gn{static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*pn);return new gn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Lt(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Lt(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<fn)throw new Lt(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lt(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pn}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dn(e,gn._jsonSchema))return new gn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-fn;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gn._jsonSchemaVersion="firestore/timestamp/1.0",gn._jsonSchema={type:hn("string",gn._jsonSchemaVersion),seconds:hn("number"),nanoseconds:hn("number")};class mn{static fromTimestamp(e){return new mn(e)}static min(){return new mn(new gn(0,0))}static max(){return new mn(new gn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const yn=-1;class vn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}vn.UNKNOWN_ID=-1;function bn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=mn.fromTimestamp(1e9===r?new gn(n+1,0):new gn(n,r));return new xn(s,rn.empty(),t)}function wn(e){return new xn(e.readTime,e.key,yn)}class xn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new xn(mn.min(),rn.empty(),yn)}static max(){return new xn(mn.max(),rn.empty(),yn)}}function kn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=rn.comparator(e.documentKey,t.documentKey),0!==n?n:Wt(e.largestBatchId,t.largestBatchId))}const _n="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function En(e){if(e.code!==Rt.FAILED_PRECONDITION||e.message!==_n)throw e;Et("LocalStore","Unexpectedly lost primary lease")}class Nn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&It(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Nn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Nn?t:Nn.resolve(t)}catch(e){return Nn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Nn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Nn.reject(t)}static resolve(e){return new Nn((t,n)=>{t(e)})}static reject(e){return new Nn((t,n)=>{n(e)})}static waitFor(e){return new Nn((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Nn.resolve(!1);for(const n of e)t=t.next(e=>e?Nn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Nn((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Nn((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Tn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cn(e){return"IndexedDbTransactionError"===e.name}class In{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}In.ce=-1;const Dn=-1;function jn(e){return null==e}function An(e){return 0===e&&1/e==-1/0}function Rn(e){return"number"==typeof e&&Number.isInteger(e)&&!An(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ln="\x01";function Pn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Mn(t)),t=On(e.get(n),t);return Mn(t)}function On(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Ln:n+="\x01\x11";break;default:n+=t}}return n}function Mn(e){return e+Ln+"\x01"}const Fn="remoteDocuments",Vn="owner",Un="mutationQueues",zn="mutations";const Bn="documentMutations",$n="remoteDocumentsV14",qn="remoteDocumentGlobal",Hn="targets",Wn="targetDocuments",Kn="targetGlobal",Gn="collectionParents",Qn="clientMetadata",Yn="bundles",Xn="namedQueries",Jn="indexConfiguration",Zn="indexState",er="indexEntries",tr="documentOverlays",nr="globals",rr=[Un,zn,Bn,Fn,Hn,Vn,Kn,Wn,Qn,qn,Gn,Yn,Xn],sr=[Un,zn,Bn,$n,Hn,Vn,Kn,Wn,Qn,qn,Gn,Yn,Xn,tr],ir=sr,ar=[...ir,Jn,Zn,er];function or(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function lr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ur(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class cr{constructor(e,t){this.comparator=e,this.root=t||dr.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dr.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hr(this.root,e,this.comparator,!1)}getReverseIterator(){return new hr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hr(this.root,e,this.comparator,!0)}}class hr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dr{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:dr.RED,this.left=null!=r?r:dr.EMPTY,this.right=null!=s?s:dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new dr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return dr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw It(43730,{key:this.key,value:this.value});if(this.right.isRed())throw It(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw It(27949);return e+(this.isRed()?0:1)}}dr.EMPTY=null,dr.RED=!0,dr.BLACK=!1,dr.EMPTY=new class{constructor(){this.size=0}get key(){throw It(57766)}get value(){throw It(16141)}get color(){throw It(16727)}get left(){throw It(29726)}get right(){throw It(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new dr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pr(this.data.getIterator())}getIteratorFrom(e){return new pr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof fr))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fr(this.comparator);return t.data=e,t}}class pr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gr{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new gr([])}unionWith(e){let t=new fr(nn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new gr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xt(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class mr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new mr("Invalid base64 string: "+e):e}}(e);return new yr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const vr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function br(e){if(jt(!!e,39018),"string"==typeof e){let t=0;const n=vr.exec(e);if(jt(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:wr(e.seconds),nanos:wr(e.nanos)}}function wr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xr(e){return"string"==typeof e?yr.fromBase64String(e):yr.fromUint8Array(e)}const kr="server_timestamp",_r="__type__",Sr="__previous_value__",Er="__local_write_time__";function Nr(e){const t=(e?.mapValue?.fields||{})[_r]?.stringValue;return t===kr}function Tr(e){const t=e.mapValue.fields[Sr];return Nr(t)?Tr(t):t}function Cr(e){const t=br(e.mapValue.fields[Er].timestampValue);return new gn(t.seconds,t.nanos)}class Ir{constructor(e,t,n,r,s,i,a,o,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=u}}const Dr="(default)";class jr{constructor(e,t){this.projectId=e,this.database=t||Dr}static empty(){return new jr("","")}get isDefaultDatabase(){return this.database===Dr}isEqual(e){return e instanceof jr&&e.projectId===this.projectId&&e.database===this.database}}const Ar="__type__",Rr="__max__",Lr={mapValue:{fields:{__type__:{stringValue:Rr}}}},Pr="__vector__",Or="value";function Mr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nr(e)?4:es(e)?9007199254740991:Jr(e)?10:11:It(28295,{value:e})}function Fr(e,t){if(e===t)return!0;const n=Mr(e);if(n!==Mr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Cr(e).isEqual(Cr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=br(e.timestampValue),r=br(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xr(e.bytesValue).isEqual(xr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wr(e.geoPointValue.latitude)===wr(t.geoPointValue.latitude)&&wr(e.geoPointValue.longitude)===wr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wr(e.integerValue)===wr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=wr(e.doubleValue),r=wr(t.doubleValue);return n===r?An(n)===An(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Xt(e.arrayValue.values||[],t.arrayValue.values||[],Fr);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(or(n)!==or(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Fr(n[s],r[s])))return!1;return!0}(e,t);default:return It(52216,{left:e})}}function Vr(e,t){return void 0!==(e.values||[]).find(e=>Fr(e,t))}function Ur(e,t){if(e===t)return 0;const n=Mr(e),r=Mr(t);if(n!==r)return Wt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=wr(e.integerValue||e.doubleValue),r=wr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zr(e.timestampValue,t.timestampValue);case 4:return zr(Cr(e),Cr(t));case 5:return Kt(e.stringValue,t.stringValue);case 6:return function(e,t){const n=xr(e),r=xr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Wt(n[s],r[s]);if(0!==e)return e}return Wt(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wt(wr(e.latitude),wr(t.latitude));return 0!==n?n:Wt(wr(e.longitude),wr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Br(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},s=n[Or]?.arrayValue,i=r[Or]?.arrayValue,a=Wt(s?.values?.length||0,i?.values?.length||0);return 0!==a?a:Br(s,i)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Lr.mapValue&&t===Lr.mapValue)return 0;if(e===Lr.mapValue)return 1;if(t===Lr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Kt(r[a],i[a]);if(0!==e)return e;const t=Ur(n[r[a]],s[i[a]]);if(0!==t)return t}return Wt(r.length,i.length)}(e.mapValue,t.mapValue);default:throw It(23264,{he:n})}}function zr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wt(e,t);const n=br(e),r=br(t),s=Wt(n.seconds,r.seconds);return 0!==s?s:Wt(n.nanos,r.nanos)}function Br(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Ur(n[s],r[s]);if(e)return e}return Wt(n.length,r.length)}function $r(e){return qr(e)}function qr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=br(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return xr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return rn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=qr(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${qr(e.fields[s])}`;return n+"}"}(e.mapValue):It(61005,{value:e})}function Hr(e){switch(Mr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Tr(e);return t?16+Hr(t):16;case 5:return 2*e.stringValue.length;case 6:return xr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Hr(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return lr(e.fields,(e,n)=>{t+=e.length+Hr(n)}),t}(e.mapValue);default:throw It(13486,{value:e})}}function Wr(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Kr(e){return!!e&&"integerValue"in e}function Gr(e){return!!e&&"arrayValue"in e}function Qr(e){return!!e&&"nullValue"in e}function Yr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xr(e){return!!e&&"mapValue"in e}function Jr(e){const t=(e?.mapValue?.fields||{})[Ar]?.stringValue;return t===Pr}function Zr(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return lr(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Zr(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Zr(e.arrayValue.values[n]);return t}return{...e}}function es(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Rr}class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Xr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zr(t)}setAll(e){let t=nn.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Zr(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Xr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Xr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){lr(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ts(Zr(this.value))}}function ns(e){const t=[];return lr(e.fields,(e,n)=>{const r=new nn([e]);if(Xr(n)){const e=ns(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new gr(t)}class rs{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new rs(e,0,mn.min(),mn.min(),mn.min(),ts.empty(),0)}static newFoundDocument(e,t,n,r){return new rs(e,1,t,mn.min(),n,r,0)}static newNoDocument(e,t){return new rs(e,2,t,mn.min(),mn.min(),ts.empty(),0)}static newUnknownDocument(e,t){return new rs(e,3,t,mn.min(),mn.min(),ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ss{constructor(e,t){this.position=e,this.inclusive=t}}function is(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?rn.comparator(rn.fromName(a.referenceValue),n.key):Ur(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function as(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Fr(e.position[n],t.position[n]))return!1;return!0}class os{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ls(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class us{}class cs extends us{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vs(e,t,n):"array-contains"===t?new ks(e,n):"in"===t?new _s(e,n):"not-in"===t?new Ss(e,n):"array-contains-any"===t?new Es(e,n):new cs(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new bs(e,n):new ws(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Ur(t,this.value)):null!==t&&Mr(this.value)===Mr(t)&&this.matchesComparison(Ur(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return It(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hs extends us{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hs(e,t)}matches(e){return ds(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ds(e){return"and"===e.op}function fs(e){return ps(e)&&ds(e)}function ps(e){for(const t of e.filters)if(t instanceof hs)return!1;return!0}function gs(e){if(e instanceof cs)return e.field.canonicalString()+e.op.toString()+$r(e.value);if(fs(e))return e.filters.map(e=>gs(e)).join(",");{const t=e.filters.map(e=>gs(e)).join(",");return`${e.op}(${t})`}}function ms(e,t){return e instanceof cs?function(e,t){return t instanceof cs&&e.op===t.op&&e.field.isEqual(t.field)&&Fr(e.value,t.value)}(e,t):e instanceof hs?function(e,t){return t instanceof hs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ms(n,t.filters[r]),!0)}(e,t):void It(19439)}function ys(e){return e instanceof cs?function(e){return`${e.field.canonicalString()} ${e.op} ${$r(e.value)}`}(e):e instanceof hs?function(e){return e.op.toString()+" {"+e.getFilters().map(ys).join(" ,")+"}"}(e):"Filter"}class vs extends cs{constructor(e,t,n){super(e,t,n),this.key=rn.fromName(n.referenceValue)}matches(e){const t=rn.comparator(e.key,this.key);return this.matchesComparison(t)}}class bs extends cs{constructor(e,t){super(e,"in",t),this.keys=xs("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ws extends cs{constructor(e,t){super(e,"not-in",t),this.keys=xs("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xs(e,t){return(t.arrayValue?.values||[]).map(e=>rn.fromName(e.referenceValue))}class ks extends cs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gr(t)&&Vr(t.arrayValue,this.value)}}class _s extends cs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vr(this.value.arrayValue,t)}}class Ss extends cs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Vr(this.value.arrayValue,t)}}class Es extends cs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Vr(this.value.arrayValue,e))}}class Ns{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Te=null}}function Ts(e){return new Ns(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Cs(e){const t=At(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>gs(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),jn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>$r(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>$r(e)).join(",")),t.Te=e}return t.Te}function Is(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ls(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ms(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!as(e.startAt,t.startAt)&&as(e.endAt,t.endAt)}function Ds(e){return rn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class js{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function As(e,t,n,r,s,i,a,o){return new js(e,t,n,r,s,i,a,o)}function Rs(e){return new js(e)}function Ls(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ps(e){return null!==e.collectionGroup}function Os(e){const t=At(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new fr(nn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new os(r,n))}),e.has(nn.keyField().canonicalString())||t.Ie.push(new os(nn.keyField(),n))}return t.Ie}function Ms(e){const t=At(e);return t.Ee||(t.Ee=Fs(t,Os(e))),t.Ee}function Fs(e,t){if("F"===e.limitType)return Ts(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new os(e.field,t)});const n=e.endAt?new ss(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ss(e.startAt.position,e.startAt.inclusive):null;return Ts(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Vs(e,t){const n=e.filters.concat([t]);return new js(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Us(e,t,n){return new js(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zs(e,t){return Is(Ms(e),Ms(t))&&e.limitType===t.limitType}function Bs(e){return`${Cs(Ms(e))}|lt:${e.limitType}`}function $s(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>ys(e)).join(", ")}]`),jn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>$r(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>$r(e)).join(",")),`Target(${t})`}(Ms(e))}; limitType=${e.limitType})`}function qs(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):rn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Os(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=is(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Os(e),t))&&!(e.endAt&&!function(e,t,n){const r=is(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Os(e),t))}(e,t)}function Hs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ws(e){return(t,n)=>{let r=!1;for(const s of Os(e)){const e=Ks(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Ks(e,t,n){const r=e.field.isKeyField()?rn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Ur(r,s):It(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return It(19790,{direction:e.dir})}}class Gs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lr(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return ur(this.inner)}size(){return this.innerSize}}const Qs=new cr(rn.comparator);function Ys(){return Qs}const Xs=new cr(rn.comparator);function Js(){let e=Xs;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Zs(e){let t=Xs;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ei(){return ni()}function ti(){return ni()}function ni(){return new Gs(e=>e.toString(),(e,t)=>e.isEqual(t))}const ri=new cr(rn.comparator),si=new fr(rn.comparator);function ii(){let e=si;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const ai=new fr(Wt);function oi(){return ai}function li(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:An(t)?"-0":t}}function ui(e){return{integerValue:""+e}}function ci(e,t){return Rn(t)?ui(t):li(e,t)}class hi{constructor(){this._=void 0}}function di(e,t,n){return e instanceof gi?function(e,t){const n={fields:{[_r]:{stringValue:kr},[Er]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Nr(t)&&(t=Tr(t)),t&&(n.fields[Sr]=t),{mapValue:n}}(n,t):e instanceof mi?yi(e,t):e instanceof vi?bi(e,t):function(e,t){const n=pi(e,t),r=xi(n)+xi(e.Ae);return Kr(n)&&Kr(e.Ae)?ui(r):li(e.serializer,r)}(e,t)}function fi(e,t,n){return e instanceof mi?yi(e,t):e instanceof vi?bi(e,t):n}function pi(e,t){return e instanceof wi?function(e){return Kr(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class gi extends hi{}class mi extends hi{constructor(e){super(),this.elements=e}}function yi(e,t){const n=ki(t);for(const r of e.elements)n.some(e=>Fr(e,r))||n.push(r);return{arrayValue:{values:n}}}class vi extends hi{constructor(e){super(),this.elements=e}}function bi(e,t){let n=ki(t);for(const r of e.elements)n=n.filter(e=>!Fr(e,r));return{arrayValue:{values:n}}}class wi extends hi{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function xi(e){return wr(e.integerValue||e.doubleValue)}function ki(e){return Gr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class _i{constructor(e,t){this.version=e,this.transformResults=t}}class Si{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Si}static exists(e){return new Si(void 0,e)}static updateTime(e){return new Si(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ei(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ni{}function Ti(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Mi(e.key,Si.none()):new Ai(e.key,e.data,Si.none());{const n=e.data,r=ts.empty();let s=new fr(nn.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Ri(e.key,r,new gr(s.toArray()),Si.none())}}function Ci(e,t,n){e instanceof Ai?function(e,t,n){const r=e.value.clone(),s=Pi(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ri?function(e,t,n){if(!Ei(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Pi(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Li(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ii(e,t,n,r){return e instanceof Ai?function(e,t,n,r){if(!Ei(e.precondition,t))return n;const s=e.value.clone(),i=Oi(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ri?function(e,t,n,r){if(!Ei(e.precondition,t))return n;const s=Oi(e.fieldTransforms,r,t),i=t.data;return i.setAll(Li(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ei(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Di(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=pi(r.transform,e||null);null!=s&&(null===n&&(n=ts.empty()),n.set(r.field,s))}return n||null}function ji(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Xt(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof mi&&t instanceof mi||e instanceof vi&&t instanceof vi?Xt(e.elements,t.elements,Fr):e instanceof wi&&t instanceof wi?Fr(e.Ae,t.Ae):e instanceof gi&&t instanceof gi}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ai extends Ni{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ri extends Ni{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Li(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Pi(e,t,n){const r=new Map;jt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,fi(a,o,n[s]))}return r}function Oi(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,di(e,i,t))}return r}class Mi extends Ni{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fi extends Ni{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vi{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ci(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ii(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ii(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ti();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Ti(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(mn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ii())}isEqual(e){return this.batchId===e.batchId&&Xt(this.mutations,e.mutations,(e,t)=>ji(e,t))&&Xt(this.baseMutations,e.baseMutations,(e,t)=>ji(e,t))}}class Ui{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){jt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ri;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Ui(e,t,n,r)}}class zi{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bi{constructor(e,t){this.count=e,this.unchangedNames=t}}var $i,qi;function Hi(e){switch(e){case Rt.OK:return It(64938);case Rt.CANCELLED:case Rt.UNKNOWN:case Rt.DEADLINE_EXCEEDED:case Rt.RESOURCE_EXHAUSTED:case Rt.INTERNAL:case Rt.UNAVAILABLE:case Rt.UNAUTHENTICATED:return!1;case Rt.INVALID_ARGUMENT:case Rt.NOT_FOUND:case Rt.ALREADY_EXISTS:case Rt.PERMISSION_DENIED:case Rt.FAILED_PRECONDITION:case Rt.ABORTED:case Rt.OUT_OF_RANGE:case Rt.UNIMPLEMENTED:case Rt.DATA_LOSS:return!0;default:return It(15467,{code:e})}}function Wi(e){if(void 0===e)return Nt("GRPC error has no .code"),Rt.UNKNOWN;switch(e){case $i.OK:return Rt.OK;case $i.CANCELLED:return Rt.CANCELLED;case $i.UNKNOWN:return Rt.UNKNOWN;case $i.DEADLINE_EXCEEDED:return Rt.DEADLINE_EXCEEDED;case $i.RESOURCE_EXHAUSTED:return Rt.RESOURCE_EXHAUSTED;case $i.INTERNAL:return Rt.INTERNAL;case $i.UNAVAILABLE:return Rt.UNAVAILABLE;case $i.UNAUTHENTICATED:return Rt.UNAUTHENTICATED;case $i.INVALID_ARGUMENT:return Rt.INVALID_ARGUMENT;case $i.NOT_FOUND:return Rt.NOT_FOUND;case $i.ALREADY_EXISTS:return Rt.ALREADY_EXISTS;case $i.PERMISSION_DENIED:return Rt.PERMISSION_DENIED;case $i.FAILED_PRECONDITION:return Rt.FAILED_PRECONDITION;case $i.ABORTED:return Rt.ABORTED;case $i.OUT_OF_RANGE:return Rt.OUT_OF_RANGE;case $i.UNIMPLEMENTED:return Rt.UNIMPLEMENTED;case $i.DATA_LOSS:return Rt.DATA_LOSS;default:return It(39323,{code:e})}}(qi=$i||($i={}))[qi.OK=0]="OK",qi[qi.CANCELLED=1]="CANCELLED",qi[qi.UNKNOWN=2]="UNKNOWN",qi[qi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qi[qi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qi[qi.NOT_FOUND=5]="NOT_FOUND",qi[qi.ALREADY_EXISTS=6]="ALREADY_EXISTS",qi[qi.PERMISSION_DENIED=7]="PERMISSION_DENIED",qi[qi.UNAUTHENTICATED=16]="UNAUTHENTICATED",qi[qi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qi[qi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qi[qi.ABORTED=10]="ABORTED",qi[qi.OUT_OF_RANGE=11]="OUT_OF_RANGE",qi[qi.UNIMPLEMENTED=12]="UNIMPLEMENTED",qi[qi.INTERNAL=13]="INTERNAL",qi[qi.UNAVAILABLE=14]="UNAVAILABLE",qi[qi.DATA_LOSS=15]="DATA_LOSS";let Ki=null;function Gi(){return new TextEncoder}const Qi=new it([4294967295,4294967295],0);function Yi(e){const t=Gi().encode(e),n=new at;return n.update(t),new Uint8Array(n.digest())}function Xi(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new it([n,r],0),new it([s,i],0)]}class Ji{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Zi(`Invalid padding: ${t}`);if(n<0)throw new Zi(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Zi(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Zi(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=it.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(it.fromNumber(n)));return 1===r.compare(Qi)&&(r=new it([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Yi(e),[n,r]=Xi(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Ji(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Yi(e),[n,r]=Xi(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Zi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ea{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ta.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ea(mn.min(),r,new cr(Wt),Ys(),ii())}}class ta{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ta(n,t,ii(),ii(),ii())}}class na{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class ra{constructor(e,t){this.targetId=e,this.Ce=t}}class sa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ia{constructor(){this.ve=0,this.Fe=la(),this.Me=yr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ii(),t=ii(),n=ii();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:It(38017,{changeType:s})}}),new ta(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=la()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,jt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class aa{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ys(),this.Je=oa(),this.He=oa(),this.Ye=new cr(Wt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:It(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Ds(s))if(0===n){const e=new rn(s.path);this.et(t,e,rs.newNoDocument(e,mn.min()))}else jt(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}Ki?.lt(function(e,t,n,r,s){const i={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},a=t.unchangedNames;return a&&(i.bloomFilter={applied:0===s,hashCount:a?.hashCount??0,bitmapLength:a?.bits?.bitmap?.length??0,padding:a?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),i}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=xr(n).toUint8Array()}catch(e){if(e instanceof mr)return Tt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Ji(i,r,s)}catch(e){return Tt(e instanceof Zi?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&Ds(s.target)){const t=new rn(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,rs.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=ii();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ea(e,t,this.Ye,this.je,n);return this.je=Ys(),this.Je=oa(),this.He=oa(),this.Ye=new cr(Wt),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ia,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new fr(Wt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new fr(Wt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Et("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ia),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function oa(){return new cr(rn.comparator)}function la(){return new cr(rn.comparator)}const ua={asc:"ASCENDING",desc:"DESCENDING"},ca={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ha={and:"AND",or:"OR"};class da{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fa(e,t){return e.useProto3Json||jn(t)?t:{value:t}}function pa(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ga(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ma(e,t){return pa(e,t.toTimestamp())}function ya(e){return jt(!!e,49232),mn.fromTimestamp(function(e){const t=br(e);return new gn(t.seconds,t.nanos)}(e))}function va(e,t){return ba(e,t).canonicalString()}function ba(e,t){const n=function(e){return new en(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function wa(e){const t=en.fromString(e);return jt(Ua(t),10190,{key:t.toString()}),t}function xa(e,t){return va(e.databaseId,t.path)}function ka(e,t){const n=wa(t);if(n.get(1)!==e.databaseId.projectId)throw new Lt(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lt(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rn(Na(n))}function _a(e,t){return va(e.databaseId,t)}function Sa(e){const t=wa(e);return 4===t.length?en.emptyPath():Na(t)}function Ea(e){return new en(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Na(e){return jt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ta(e,t,n){return{name:xa(e,t),fields:n.value.mapValue.fields}}function Ca(e,t){let n;if(t instanceof Ai)n={update:Ta(e,t.key,t.value)};else if(t instanceof Mi)n={delete:xa(e,t.key)};else if(t instanceof Ri)n={update:Ta(e,t.key,t.data),updateMask:Va(t.fieldMask)};else{if(!(t instanceof Fi))return It(16599,{Vt:t.type});n={verify:xa(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof gi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mi)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vi)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wi)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw It(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ma(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:It(27497)}(e,t.precondition)),n}function Ia(e,t){return{documents:[_a(e,t.path)]}}function Da(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_a(e,s);const i=function(e){if(0!==e.length)return Fa(hs.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Oa(e.field),direction:Ra(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=fa(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function ja(e){let t=Sa(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){jt(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Aa(e);return t instanceof hs&&fs(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new os(Ma(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,jn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ss(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new ss(n,t)}(n.endAt)),As(t,s,a,i,o,"F",l,u)}function Aa(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ma(e.unaryFilter.field);return cs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ma(e.unaryFilter.field);return cs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ma(e.unaryFilter.field);return cs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ma(e.unaryFilter.field);return cs.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return It(61313);default:return It(60726)}}(e):void 0!==e.fieldFilter?function(e){return cs.create(Ma(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return It(58110);default:return It(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return hs.create(e.compositeFilter.filters.map(e=>Aa(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return It(1026)}}(e.compositeFilter.op))}(e):It(30097,{filter:e})}function Ra(e){return ua[e]}function La(e){return ca[e]}function Pa(e){return ha[e]}function Oa(e){return{fieldPath:e.canonicalString()}}function Ma(e){return nn.fromServerFormat(e.fieldPath)}function Fa(e){return e instanceof cs?function(e){if("=="===e.op){if(Yr(e.value))return{unaryFilter:{field:Oa(e.field),op:"IS_NAN"}};if(Qr(e.value))return{unaryFilter:{field:Oa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Yr(e.value))return{unaryFilter:{field:Oa(e.field),op:"IS_NOT_NAN"}};if(Qr(e.value))return{unaryFilter:{field:Oa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(e.field),op:La(e.op),value:e.value}}}(e):e instanceof hs?function(e){const t=e.getFilters().map(e=>Fa(e));return 1===t.length?t[0]:{compositeFilter:{op:Pa(e.op),filters:t}}}(e):It(54877,{filter:e})}function Va(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ua(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class za{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:mn.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:mn.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yr.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ba{constructor(e){this.yt=e}}function $a(e){const t=ja({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Us(t,t.limit,"L"):t}class qa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(wr(e.integerValue));else if("doubleValue"in e){const n=wr(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),An(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=br(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?es(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Jr(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):It(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=Or,s=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(wr(s)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),rn.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}qa.Kt=new qa;class Ha{constructor(){this.Cn=new Wa}addToCollectionParentIndex(e,t){return this.Cn.add(t),Nn.resolve()}getCollectionParents(e,t){return Nn.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Nn.resolve()}deleteFieldIndex(e,t){return Nn.resolve()}deleteAllFieldIndexes(e){return Nn.resolve()}createTargetIndexes(e,t){return Nn.resolve()}getDocumentsMatchingTarget(e,t){return Nn.resolve(null)}getIndexType(e,t){return Nn.resolve(0)}getFieldIndexes(e,t){return Nn.resolve([])}getNextCollectionGroupToUpdate(e){return Nn.resolve(null)}getMinOffset(e,t){return Nn.resolve(xn.min())}getMinOffsetFromCollectionGroup(e,t){return Nn.resolve(xn.min())}updateCollectionGroup(e,t,n){return Nn.resolve()}updateIndexEntries(e,t){return Nn.resolve()}}class Wa{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fr(en.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fr(en.comparator)).toArray()}}new Uint8Array(0);const Ka={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ga=41943040;class Qa{static withCacheSize(e){return new Qa(e,Qa.DEFAULT_COLLECTION_PERCENTILE,Qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Qa.DEFAULT_COLLECTION_PERCENTILE=10,Qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qa.DEFAULT=new Qa(Ga,Qa.DEFAULT_COLLECTION_PERCENTILE,Qa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qa.DISABLED=new Qa(-1,0,0);class Ya{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ya(0)}static cr(){return new Ya(-1)}}const Xa="LruGarbageCollector",Ja=1048576;function Za(e,t){let[n,r]=e,[s,i]=t;const a=Wt(n,s);return 0===a?Wt(r,i):a}class eo{constructor(e){this.Ir=e,this.buffer=new fr(Za),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Za(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class to{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Et(Xa,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Cn(e)?Et(Xa,"Ignoring IndexedDB error during garbage collection: ",e):await En(e)}await this.Vr(3e5)})}}class no{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Nn.resolve(In.ce);const n=new eo(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector","Garbage collection skipped; disabled"),Nn.resolve(Ka)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Et("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ka):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,a,o,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),St()<=O.DEBUG&&Et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-u}ms\n\tDetermined least recently used ${r} in `+(a-i)+"ms\n"+`\tRemoved ${s} targets in `+(o-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-o)+"ms\n"+`Total Duration: ${l-u}ms`),Nn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function ro(e,t){return new no(e,t)}class so{constructor(){this.changes=new Gs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Nn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class io{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ao{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ii(n.mutation,e,gr.empty(),gn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ii()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ii();const r=ei();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Js();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ei();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ii()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Ys();const i=ni(),a=ni();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Ri)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Ii(a.mutation,t,a.mutation.getFieldMask(),gn.now())):i.set(t.key,gr.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>a.set(e,new io(t,i.get(e)??null))),a))}recalculateAndSaveOverlays(e,t){const n=ni();let r=new cr((e,t)=>e-t),s=ii();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||gr.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||ii()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,u=ti();l.forEach(e=>{if(!s.has(e)){const r=Ti(t.get(e),n.get(e));null!==r&&u.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,u))}return Nn.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return rn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ps(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Nn.resolve(ei());let a=yn,o=s;return i.next(t=>Nn.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Nn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,ii())).next(e=>({batchId:a,changes:Zs(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rn(t)).next(e=>{let t=Js();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=Js();return this.indexManager.getCollectionParents(e,s).next(a=>Nn.forEach(a,a=>{const o=function(e,t){return new js(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,rs.newInvalidDocument(r)))});let n=Js();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Ii(i.mutation,r,gr.empty(),gn.now()),qs(t,r)&&(n=n.insert(e,r))}),n})}}class oo{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Nn.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ya(e.createTime)}}(t)),Nn.resolve()}getNamedQuery(e,t){return Nn.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:$a(e.bundledQuery),readTime:ya(e.readTime)}}(t)),Nn.resolve()}}class lo{constructor(){this.overlays=new cr(rn.comparator),this.qr=new Map}getOverlay(e,t){return Nn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ei();return Nn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Nn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Nn.resolve()}getOverlaysForCollection(e,t,n){const r=ei(),s=t.length+1,i=new rn(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Nn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new cr((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=ei(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ei(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Nn.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new zi(t,n));let s=this.qr.get(t);void 0===s&&(s=ii(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class uo{constructor(){this.sessionToken=yr.EMPTY_BYTE_STRING}getSessionToken(e){return Nn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Nn.resolve()}}class co{constructor(){this.Qr=new fr(ho.$r),this.Ur=new fr(ho.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new ho(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new ho(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new rn(new en([])),n=new ho(t,e),r=new ho(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new rn(new en([])),n=new ho(t,e),r=new ho(t,e+1);let s=ii();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new ho(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ho{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return rn.comparator(e.key,t.key)||Wt(e.Yr,t.Yr)}static Kr(e,t){return Wt(e.Yr,t.Yr)||rn.comparator(e.key,t.key)}}class fo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new fr(ho.$r)}checkEmpty(e){return Nn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Vi(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Zr=this.Zr.add(new ho(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Nn.resolve(i)}lookupMutationBatch(e,t){return Nn.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return Nn.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Nn.resolve(0===this.mutationQueue.length?Dn:this.tr-1)}getAllMutationBatches(e){return Nn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ho(t,0),r=new ho(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),Nn.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fr(Wt);return t.forEach(e=>{const t=new ho(e,0),r=new ho(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Nn.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;rn.isDocumentKey(s)||(s=s.child(""));const i=new ho(new rn(s),0);let a=new fr(Wt);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},i),Nn.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){jt(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Nn.forEach(t.mutations,r=>{const s=new ho(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new ho(t,0),r=this.Zr.firstAfterOrEqual(n);return Nn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Nn.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class po{constructor(e){this.ri=e,this.docs=new cr(rn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Nn.resolve(n?n.document.mutableCopy():rs.newInvalidDocument(t))}getEntries(e,t){let n=Ys();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():rs.newInvalidDocument(e))}),Nn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Ys();const i=t.path,a=new rn(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||kn(wn(a),n)<=0||(r.has(a.key)||qs(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Nn.resolve(s)}getAllFromCollectionGroup(e,t,n,r){It(9500)}ii(e,t){return Nn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new go(this)}getSize(e){return Nn.resolve(this.size)}}class go extends so{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Nn.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class mo{constructor(e){this.persistence=e,this.si=new Gs(e=>Cs(e),Is),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.oi=0,this._i=new co,this.targetCount=0,this.ai=Ya.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Nn.resolve()}getLastRemoteSnapshotVersion(e){return Nn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Nn.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Nn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Nn.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ya(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Nn.resolve()}updateTargetData(e,t){return this.Pr(t),Nn.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Nn.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Nn.waitFor(s).next(()=>r)}getTargetCount(e){return Nn.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Nn.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Nn.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Nn.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Nn.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Nn.resolve(n)}containsKey(e,t){return Nn.resolve(this._i.containsKey(t))}}class yo{constructor(e,t){this.ui={},this.overlays={},this.ci=new In(0),this.li=!1,this.li=!0,this.hi=new uo,this.referenceDelegate=e(this),this.Pi=new mo(this),this.indexManager=new Ha,this.remoteDocumentCache=function(e){return new po(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Ba(t),this.Ii=new oo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new fo(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Et("MemoryPersistence","Starting transaction:",e);const r=new vo(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Nn.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class vo extends Sn{constructor(e){super(),this.currentSequenceNumber=e}}class bo{constructor(e){this.persistence=e,this.Ri=new co,this.Vi=null}static mi(e){return new bo(e)}get fi(){if(this.Vi)return this.Vi;throw It(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Nn.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Nn.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Nn.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Nn.forEach(this.fi,n=>{const r=rn.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,mn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Nn.or([()=>Nn.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wo{constructor(e,t){this.persistence=e,this.pi=new Gs(e=>Pn(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ro(this,t)}static mi(e,t){return new wo(e,t)}Ei(){}di(e){return Nn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Nn.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Nn.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,mn.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Nn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Nn.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Nn.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Nn.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hr(e.data.value)),t}br(e,t,n){return Nn.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Nn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class xo{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=ii(),r=ii();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new xo(e,t.fromCache,n,r)}}class ko{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _o{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=_()?8:Tn(x())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new ko;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(St()<=O.DEBUG&&Et("QueryEngine","SDK will not create cache indexes for query:",$s(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Nn.resolve()):(St()<=O.DEBUG&&Et("QueryEngine","Query:",$s(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(St()<=O.DEBUG&&Et("QueryEngine","The SDK decides to create cache indexes for query:",$s(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ms(t))):Nn.resolve())}ys(e,t){if(Ls(t))return Nn.resolve(null);let n=Ms(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Us(t,null,"F"),n=Ms(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=ii(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,Us(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Ls(t)||r.isEqual(mn.min())?Nn.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?Nn.resolve(null):(St()<=O.DEBUG&&Et("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$s(t)),this.vs(e,i,t,bn(r,yn)).next(e=>e))})}Ds(e,t){let n=new fr(Ws(e));return t.forEach((t,r)=>{qs(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return St()<=O.DEBUG&&Et("QueryEngine","Using full collection scan to execute query:",$s(t)),this.ps.getDocumentsMatchingQuery(e,t,xn.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const So="LocalStore";class Eo{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new cr(Wt),this.xs=new Gs(e=>Cs(e),Is),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ao(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function No(e,t,n,r){return new Eo(e,t,n,r)}async function To(e,t){const n=At(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=ii();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function Co(e){const t=At(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Io(e,t,n){let r=ii(),s=ii();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ys();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(mn.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Et(So,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{ks:r,qs:s}})}function Do(e,t){const n=At(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Dn),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function jo(e,t){const n=At(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,Nn.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new za(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Ao(e,t,n){const r=At(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Cn(e))throw e;Et(So,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Ro(e,t,n){const r=At(e);let s=mn.min(),i=ii();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=At(e),s=r.xs.get(n);return void 0!==s?Nn.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,Ms(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:mn.min(),n?i:ii())).next(e=>(Lo(r,Hs(t),e),{documents:e,Qs:i})))}function Lo(e,t,n){let r=e.Os.get(t)||mn.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Po{constructor(){this.activeTargetIds=oi()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Oo{constructor(){this.Mo=new Po,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Po,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mo{Oo(e){}shutdown(){}}const Fo="ConnectivityMonitor";class Vo{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Et(Fo,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Et(Fo,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Uo=null;function zo(){return null===Uo?Uo=268435456+Math.round(2147483648*Math.random()):Uo++,"0x"+Uo.toString(16)}const Bo="RestConnection",$o={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qo{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Dr?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,s){const i=zo(),a=this.zo(e,t.toUriEncodedString());Et(Bo,`Sending RPC '${e}' ${i}:`,a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,s);const{host:l}=new URL(a),u=g(l);return this.Jo(e,a,o,n,u).then(t=>(Et(Bo,`Received RPC '${e}' ${i}: `,t),t),t=>{throw Tt(Bo,`RPC '${e}' ${i} failed with error: `,t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+kt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=$o[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class Ho{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wo="WebChannelConnection";class Ko extends qo{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=zo();return new Promise((s,a)=>{const o=new ut;o.setWithCredentials(!0),o.listenOnce(ht.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case dt.NO_ERROR:const t=o.getResponseJson();Et(Wo,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case dt.TIMEOUT:Et(Wo,`RPC '${e}' ${i} timed out`),a(new Lt(Rt.DEADLINE_EXCEEDED,"Request time out"));break;case dt.HTTP_ERROR:const n=o.getStatus();if(Et(Wo,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Rt).indexOf(t)>=0?t:Rt.UNKNOWN}(t.status);a(new Lt(e,t.message))}else a(new Lt(Rt.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Lt(Rt.UNAVAILABLE,"Connection failed."));break;default:It(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Et(Wo,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);Et(Wo,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=zo(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=mt(),a=gt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=s.join("");Et(Wo,`Creating RPC '${e}' stream ${r}: ${u}`,o);const c=i.createWebChannel(u,o);this.I_(c);let h=!1,d=!1;const f=new Ho({Yo:t=>{d?Et(Wo,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Et(Wo,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),Et(Wo,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},Zo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,ct.EventType.OPEN,()=>{d||(Et(Wo,`RPC '${e}' stream ${r} transport opened.`),f.o_())}),p(c,ct.EventType.CLOSE,()=>{d||(d=!0,Et(Wo,`RPC '${e}' stream ${r} transport closed`),f.a_(),this.E_(c))}),p(c,ct.EventType.ERROR,t=>{d||(d=!0,Tt(Wo,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new Lt(Rt.UNAVAILABLE,"The operation could not be completed")))}),p(c,ct.EventType.MESSAGE,t=>{if(!d){const n=t.data[0];jt(!!n,16349);const s=n,i=s?.error||s[0]?.error;if(i){Et(Wo,`RPC '${e}' stream ${r} received error:`,i);const t=i.status;let n=function(e){const t=$i[e];if(void 0!==t)return Wi(t)}(t),s=i.message;void 0===n&&(n=Rt.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),d=!0,f.a_(new Lt(n,s)),c.close()}else Et(Wo,`RPC '${e}' stream ${r} received:`,n),f.u_(n)}}),p(a,pt.STAT_EVENT,t=>{t.stat===ft.PROXY?Et(Wo,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ft.NOPROXY&&Et(Wo,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Go(){return"undefined"!=typeof document?document:null}function Qo(e){return new da(e,!0)}class Yo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Et("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Xo="PersistentStream";class Jo{constructor(e,t,n,r,s,i,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yo(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Rt.RESOURCE_EXHAUSTED?(Nt(t.toString()),Nt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Rt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Lt(Rt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Et(Xo,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Et(Xo,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zo extends Jo{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:It(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(jt(void 0===t||"string"==typeof t,58123),yr.fromBase64String(t||"")):(jt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),yr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Rt.UNKNOWN:Wi(e.code);return new Lt(t,e.message||"")}(a);n=new sa(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ka(e,r.document.name),i=ya(r.document.updateTime),a=r.document.createTime?ya(r.document.createTime):mn.min(),o=new ts({mapValue:{fields:r.document.fields}}),l=rs.newFoundDocument(s,i,a,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new na(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ka(e,r.document),i=r.readTime?ya(r.readTime):mn.min(),a=rs.newNoDocument(s,i),o=r.removedTargetIds||[];n=new na([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ka(e,r.document),i=r.removedTargetIds||[];n=new na([],i,s,null)}else{if(!("filter"in t))return It(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Bi(r,s),a=e.targetId;n=new ra(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return mn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?mn.min():t.readTime?ya(t.readTime):mn.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ea(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ds(r)?{documents:Ia(e,r)}:{query:Da(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ga(e,t.resumeToken);const r=fa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(mn.min())>0){n.readTime=pa(e,t.snapshotVersion.toTimestamp());const r=fa(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ea(this.serializer),t.removeTarget=e,this.q_(t)}}class el extends Jo{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return jt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jt(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){jt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(jt(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?ya(e.updateTime):ya(t);return n.isEqual(mn.min())&&(n=ya(t)),new _i(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ya(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ea(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ca(this.serializer,e))};this.q_(t)}}class tl{}class nl extends tl{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Lt(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Go(e,ba(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Lt(Rt.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Ho(e,ba(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Lt(Rt.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class rl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nt(t),this.aa=!1):Et("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const sl="RemoteStore";class il{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{pl(this)&&(Et(sl,"Restarting streams for network reachability change."),await async function(e){const t=At(e);t.Ea.add(4),await ol(t),t.Ra.set("Unknown"),t.Ea.delete(4),await al(t)}(this))})}),this.Ra=new rl(n,r)}}async function al(e){if(pl(e))for(const t of e.da)await t(!0)}async function ol(e){for(const t of e.da)await t(!1)}function ll(e,t){const n=At(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),fl(n)?dl(n):Rl(n).O_()&&cl(n,t))}function ul(e,t){const n=At(e),r=Rl(n);n.Ia.delete(t),r.O_()&&hl(n,t),0===n.Ia.size&&(r.O_()?r.L_():pl(n)&&n.Ra.set("Unknown"))}function cl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(mn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Rl(e).Y_(t)}function hl(e,t){e.Va.Ue(t),Rl(e).Z_(t)}function dl(e){e.Va=new aa({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Rl(e).start(),e.Ra.ua()}function fl(e){return pl(e)&&!Rl(e).x_()&&e.Ia.size>0}function pl(e){return 0===At(e).Ea.size}function gl(e){e.Va=void 0}async function ml(e){e.Ra.set("Online")}async function yl(e){e.Ia.forEach((t,n)=>{cl(e,t)})}async function vl(e,t){gl(e),fl(e)?(e.Ra.ha(t),dl(e)):e.Ra.set("Unknown")}async function bl(e,t,n){if(e.Ra.set("Online"),t instanceof sa&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Et(sl,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wl(e,n)}else if(t instanceof na?e.Va.Ze(t):t instanceof ra?e.Va.st(t):e.Va.tt(t),!n.isEqual(mn.min()))try{const t=await Co(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(yr.EMPTY_BYTE_STRING,r.snapshotVersion)),hl(e,t);const s=new za(r.target,t,n,r.sequenceNumber);cl(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Et(sl,"Failed to raise snapshot:",t),await wl(e,t)}}async function wl(e,t,n){if(!Cn(t))throw t;e.Ea.add(1),await ol(e),e.Ra.set("Offline"),n||(n=()=>Co(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Et(sl,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await al(e)})}function xl(e,t){return t().catch(n=>wl(e,n,t))}async function kl(e){const t=At(e),n=Ll(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Dn;for(;_l(t);)try{const e=await Do(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Sl(t,e)}catch(e){await wl(t,e)}El(t)&&Nl(t)}function _l(e){return pl(e)&&e.Ta.length<10}function Sl(e,t){e.Ta.push(t);const n=Ll(e);n.O_()&&n.X_&&n.ea(t.mutations)}function El(e){return pl(e)&&!Ll(e).x_()&&e.Ta.length>0}function Nl(e){Ll(e).start()}async function Tl(e){Ll(e).ra()}async function Cl(e){const t=Ll(e);for(const n of e.Ta)t.ea(n.mutations)}async function Il(e,t,n){const r=e.Ta.shift(),s=Ui.from(r,t,n);await xl(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await kl(e)}async function Dl(e,t){t&&Ll(e).X_&&await async function(e,t){if(function(e){return Hi(e)&&e!==Rt.ABORTED}(t.code)){const n=e.Ta.shift();Ll(e).B_(),await xl(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await kl(e)}}(e,t),El(e)&&Nl(e)}async function jl(e,t){const n=At(e);n.asyncQueue.verifyOperationInProgress(),Et(sl,"RemoteStore received new credentials");const r=pl(n);n.Ea.add(3),await ol(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await al(n)}async function Al(e,t){const n=At(e);t?(n.Ea.delete(2),await al(n)):t||(n.Ea.add(2),await ol(n),n.Ra.set("Unknown"))}function Rl(e){return e.ma||(e.ma=function(e,t,n){const r=At(e);return r.sa(),new Zo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:ml.bind(null,e),t_:yl.bind(null,e),r_:vl.bind(null,e),H_:bl.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),fl(e)?dl(e):e.Ra.set("Unknown")):(await e.ma.stop(),gl(e))})),e.ma}function Ll(e){return e.fa||(e.fa=function(e,t,n){const r=At(e);return r.sa(),new el(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Tl.bind(null,e),r_:Dl.bind(null,e),ta:Cl.bind(null,e),na:Il.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await kl(e)):(await e.fa.stop(),e.Ta.length>0&&(Et(sl,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class Pl{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Pl(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lt(Rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ol(e,t){if(Nt("AsyncQueue",`${t}: ${e}`),Cn(e))return new Lt(Rt.UNAVAILABLE,`${t}: ${e}`);throw e}class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||rn.comparator(t.key,n.key):(e,t)=>rn.comparator(e.key,t.key),this.keyedMap=Js(),this.sortedSet=new cr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ml))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ml;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Fl{constructor(){this.ga=new cr(rn.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):It(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Vl{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Vl(e,t,Ml.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ul{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class zl{constructor(){this.queries=Bl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=At(e),r=n.queries;n.queries=Bl(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Lt(Rt.ABORTED,"Firestore shutting down"))}}function Bl(){return new Gs(e=>Bs(e),zs)}async function $l(e,t){const n=At(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new Ul,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Ol(e,`Initialization of query '${$s(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Kl(n)}async function ql(e,t){const n=At(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Hl(e,t){const n=At(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&Kl(n)}function Wl(e,t,n){const r=At(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Kl(e){e.Ca.forEach(e=>{e.next()})}var Gl,Ql;(Ql=Gl||(Gl={})).Ma="default",Ql.Cache="cache";class Yl{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Vl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gl.Cache}}class Xl{constructor(e){this.key=e}}class Jl{constructor(e){this.key=e}}class Zl{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ii(),this.mutatedKeys=ii(),this.eu=Ws(e),this.tu=new Ml(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Fl,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=qs(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.su(u,c)||(n.track({type:2,doc:c}),f=!0,(o&&this.eu(c,o)>0||l&&this.eu(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(i=i.add(c),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new Vl(this.query,e.tu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ii(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Jl(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Xl(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=ii();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const eu="SyncEngine";class tu{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class nu{constructor(e){this.key=e,this.hu=!1}}class ru{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Gs(e=>Bs(e),zs),this.Iu=new Map,this.Eu=new Set,this.du=new cr(rn.comparator),this.Au=new Map,this.Ru=new co,this.Vu={},this.mu=new Map,this.fu=Ya.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function su(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Eu(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await au(r,t,n,!0),s}async function iu(e,t){const n=Eu(e);await au(n,t,!0,!1)}async function au(e,t,n,r){const s=await jo(e.localStore,Ms(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await ou(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&ll(e.remoteStore,s),o}async function ou(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await Ro(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return bu(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const i=await Ro(e.localStore,t,!0),a=new Zl(t,i.Qs),o=a.ru(i.documents),l=ta.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),u=a.applyChanges(o,e.isPrimaryClient,l);bu(e,n,u.au);const c=new tu(t,n,a);return e.Tu.set(t,c),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function lu(e,t,n){const r=At(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!zs(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ao(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ul(r.remoteStore,s.targetId),yu(r,s.targetId)}).catch(En)):(yu(r,s.targetId),await Ao(r.localStore,s.targetId,!0))}async function uu(e,t){const n=At(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ul(n.remoteStore,r.targetId))}async function cu(e,t){const n=At(e);try{const e=await function(e,t){const n=At(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?u=u.withResumeToken(yr.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):i.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(i.resumeToken,r)),s=s.insert(o,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,i)&&a.push(n.Pi.updateTargetData(e,u))});let o=Ys(),l=ii();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Io(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(mn.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Nn.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(jt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?jt(r.hu,14607):e.removedDocuments.size>0&&(jt(r.hu,42227),r.hu=!1))}),await ku(n,e,t)}catch(e){await En(e)}}function hu(e,t,n){const r=At(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=At(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&Kl(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function du(e,t,n){const r=At(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new cr(rn.comparator);e=e.insert(i,rs.newNoDocument(i,mn.min()));const n=ii().add(i),s=new ea(mn.min(),new Map,new cr(Wt),e,n);await cu(r,s),r.du=r.du.remove(i),r.Au.delete(t),xu(r)}else await Ao(r.localStore,t,!1).then(()=>yu(r,t,n)).catch(En)}async function fu(e,t){const n=At(e),r=t.batch.batchId;try{const e=await function(e,t){const n=At(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Nn.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);jt(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ii();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);mu(n,r,null),gu(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ku(n,e)}catch(e){await En(e)}}async function pu(e,t,n){const r=At(e);try{const e=await function(e,t){const n=At(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(jt(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);mu(r,t,n),gu(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ku(r,e)}catch(n){await En(n)}}function gu(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function mu(e,t,n){const r=At(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function yu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||vu(e,t)})}function vu(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ul(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),xu(e))}function bu(e,t,n){for(const r of n)r instanceof Xl?(e.Ru.addReference(r.key,t),wu(e,r)):r instanceof Jl?(Et(eu,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||vu(e,r.key)):It(19791,{wu:r})}function wu(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Et(eu,"New document in limbo: "+n),e.Eu.add(r),xu(e))}function xu(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new rn(en.fromString(t)),r=e.fu.next();e.Au.set(r,new nu(n)),e.du=e.du.insert(n,r),ll(e.remoteStore,new za(Ms(Rs(n.path)),r,"TargetPurposeLimboResolution",In.ce))}}async function ku(e,t,n){const r=At(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(o.targetId)?.current;r.sharedClientState.updateQueryState(o.targetId,t?"current":"not-current")}if(e){s.push(e);const t=xo.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(e,t){const n=At(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Nn.forEach(t,t=>Nn.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Nn.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Cn(e))throw e;Et(So,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function _u(e,t){const n=At(e);if(!n.currentUser.isEqual(t)){Et(eu,"User change. New user:",t.toKey());const e=await To(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Lt(Rt.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ku(n,e.Ls)}}function Su(e,t){const n=At(e),r=n.Au.get(t);if(r&&r.hu)return ii().add(r.key);{let e=ii();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Eu(e){const t=At(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Su.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=du.bind(null,t),t.Pu.H_=Hl.bind(null,t.eventManager),t.Pu.yu=Wl.bind(null,t.eventManager),t}function Nu(e){const t=At(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pu.bind(null,t),t}class Tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qo(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return No(this.persistence,new _o,e.initialUser,this.serializer)}Cu(e){return new yo(bo.mi,this.serializer)}Du(e){return new Oo}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tu.provider={build:()=>new Tu};class Cu extends Tu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){jt(this.persistence.referenceDelegate instanceof wo,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new to(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Qa.withCacheSize(this.cacheSizeBytes):Qa.DEFAULT;return new yo(e=>wo.mi(e,t),this.serializer)}}class Iu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>hu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=_u.bind(null,this.syncEngine),await Al(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zl}createDatastore(e){const t=Qo(e.databaseInfo.databaseId),n=function(e){return new Ko(e)}(e.databaseInfo);return function(e,t,n,r){return new nl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new il(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>hu(this.syncEngine,e,0),Vo.v()?new Vo:new Mo)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new ru(e,t,n,r,s,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=At(e);Et(sl,"RemoteStore shutting down."),t.Ea.add(5),await ol(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Iu.provider={build:()=>new Iu};class Du{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Nt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const ju="FirestoreClient";class Au{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=xt.UNAUTHENTICATED,this.clientId=Ht.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Et(ju,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Et(ju,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ol(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ru(e,t){e.asyncQueue.verifyOperationInProgress(),Et(ju,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await To(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Lu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Pu(e);Et(ju,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>jl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>jl(t.remoteStore,n)),e._onlineComponents=t}async function Pu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Et(ju,"Using user provided OfflineComponentProvider");try{await Ru(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Rt.FAILED_PRECONDITION||e.code===Rt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Tt("Error using user provided cache. Falling back to memory cache: "+n),await Ru(e,new Tu)}}else Et(ju,"Using default OfflineComponentProvider"),await Ru(e,new Cu(void 0));return e._offlineComponents}async function Ou(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Et(ju,"Using user provided OnlineComponentProvider"),await Lu(e,e._uninitializedComponentsProvider._online)):(Et(ju,"Using default OnlineComponentProvider"),await Lu(e,new Iu))),e._onlineComponents}function Mu(e){return Ou(e).then(e=>e.syncEngine)}async function Fu(e){const t=await Ou(e),n=t.eventManager;return n.onListen=su.bind(null,t.syncEngine),n.onUnlisten=lu.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=iu.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=uu.bind(null,t.syncEngine),n}function Vu(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Uu=new Map,zu="firestore.googleapis.com",Bu=!0;class $u{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Lt(Rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zu,this.ssl=Bu}else this.host=e.host,this.ssl=e.ssl??Bu;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ga;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Ja)throw new Lt(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Lt(Rt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vu(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Lt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Lt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Lt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $u({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Lt(Rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Lt(Rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $u(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Mt;switch(e.type){case"firstParty":return new zt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Lt(Rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Uu.get(e);t&&(Et("ComponentProvider","Removing Datastore"),Uu.delete(e),t.terminate())}(this),Promise.resolve()}}class Hu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hu(this.firestore,e,this._query)}}class Wu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ku(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wu(this.firestore,e,this._key)}toJSON(){return{type:Wu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(dn(t,Wu._jsonSchema))return new Wu(e,n||null,new rn(en.fromString(t.referencePath)))}}Wu._jsonSchemaVersion="firestore/documentReference/1.0",Wu._jsonSchema={type:hn("string",Wu._jsonSchemaVersion),referencePath:hn("string")};class Ku extends Hu{constructor(e,t,n){super(e,t,Rs(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wu(this.firestore,null,new rn(e))}withConverter(e){return new Ku(this.firestore,e,this._path)}}function Gu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=D(e),sn("collection","path",t),e instanceof qu){const n=en.fromString(t,...r);return on(n),new Ku(e,null,n)}{if(!(e instanceof Wu||e instanceof Ku))throw new Lt(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(en.fromString(t,...r));return on(n),new Ku(e.firestore,null,n)}}function Qu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=D(e),1===arguments.length&&(t=Ht.newId()),sn("doc","path",t),e instanceof qu){const n=en.fromString(t,...r);return an(n),new Wu(e,null,new rn(n))}{if(!(e instanceof Wu||e instanceof Ku))throw new Lt(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(en.fromString(t,...r));return an(n),new Wu(e.firestore,e instanceof Ku?e.converter:null,new rn(n))}}const Yu="AsyncQueue";class Xu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yo(this,"async_queue_retry"),this._c=()=>{const e=Go();e&&Et(Yu,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Go();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Go();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Pt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Cn(e))throw e;Et(Yu,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Nt("INTERNAL UNHANDLED ERROR: ",Ju(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Pl.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&It(47125,{Pc:Ju(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ju(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Zu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ec extends qu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Xu,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xu(e),this._firestoreClient=void 0,await e}}}function tc(e){if(e._terminated)throw new Lt(Rt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||nc(e),e._firestoreClient}function nc(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new Ir(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Vu(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Au(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class rc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rc(yr.fromBase64String(e))}catch(e){throw new Lt(Rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new rc(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dn(e,rc._jsonSchema))return rc.fromBase64String(e.bytes)}}rc._jsonSchemaVersion="firestore/bytes/1.0",rc._jsonSchema={type:hn("string",rc._jsonSchemaVersion),bytes:hn("string")};class sc{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Lt(Rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ic{constructor(e){this._methodName=e}}class ac{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Lt(Rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Lt(Rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ac._jsonSchemaVersion}}static fromJSON(e){if(dn(e,ac._jsonSchema))return new ac(e.latitude,e.longitude)}}ac._jsonSchemaVersion="firestore/geoPoint/1.0",ac._jsonSchema={type:hn("string",ac._jsonSchemaVersion),latitude:hn("number"),longitude:hn("number")};class oc{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:oc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dn(e,oc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new oc(e.vectorValues);throw new Lt(Rt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}oc._jsonSchemaVersion="firestore/vectorValue/1.0",oc._jsonSchema={type:hn("string",oc._jsonSchemaVersion),vectorValues:hn("object")};const lc=/^__.*__$/;class uc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ri(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ai(e,this.data,t,this.fieldTransforms)}}class cc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ri(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It(40011,{Ac:e})}}class dc{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(hc(this.Ac)&&lc.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class fc{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Qo(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new dc({Ac:e,methodName:t,Dc:n,path:nn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pc(e){const t=e._freezeSettings(),n=Qo(e._databaseId);return new fc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gc(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);_c("Data must be an object, but it was:",a,r);const o=xc(r,a);let l,u;if(i.merge)l=new gr(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Sc(t,r,n);if(!a.contains(s))throw new Lt(Rt.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Cc(e,s)||e.push(s)}l=new gr(e),u=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=a.fieldTransforms;return new uc(new ts(o),l,u)}class mc extends ic{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mc}}function yc(e,t,n,r){const s=e.Cc(1,t,n);_c("Data must be an object, but it was:",s,r);const i=[],a=ts.empty();lr(r,(e,r)=>{const o=Nc(t,e,n);r=D(r);const l=s.yc(o);if(r instanceof mc)i.push(o);else{const e=wc(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new gr(i);return new cc(a,o,s.fieldTransforms)}function vc(e,t,n,r,s,i){const a=e.Cc(1,t,n),o=[Sc(t,r,n)],l=[s];if(i.length%2!=0)throw new Lt(Rt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)o.push(Sc(t,i[d])),l.push(i[d+1]);const u=[],c=ts.empty();for(let d=o.length-1;d>=0;--d)if(!Cc(u,o[d])){const e=o[d];let t=l[d];t=D(t);const n=a.yc(e);if(t instanceof mc)u.push(e);else{const r=wc(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new gr(u);return new cc(c,h,a.fieldTransforms)}function bc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wc(n,e.Cc(r?4:3,t))}function wc(e,t){if(kc(e=D(e)))return _c("Unsupported field value:",t,e),xc(e,t);if(e instanceof ic)return function(e,t){if(!hc(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=wc(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=D(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ci(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=gn.fromDate(e);return{timestampValue:pa(t.serializer,n)}}if(e instanceof gn){const n=new gn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:pa(t.serializer,n)}}if(e instanceof ac)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof rc)return{bytesValue:ga(t.serializer,e._byteString)};if(e instanceof Wu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:va(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof oc)return function(e,t){return{mapValue:{fields:{[Ar]:{stringValue:Pr},[Or]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return li(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${un(e)}`)}(e,t)}function xc(e,t){const n={};return ur(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lr(e,(e,r)=>{const s=wc(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function kc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof gn||e instanceof ac||e instanceof rc||e instanceof Wu||e instanceof ic||e instanceof oc)}function _c(e,t,n){if(!kc(n)||!ln(n)){const r=un(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Sc(e,t,n){if((t=D(t))instanceof sc)return t._internalPath;if("string"==typeof t)return Nc(e,t);throw Tc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ec=new RegExp("[~\\*/\\[\\]]");function Nc(e,t,n){if(t.search(Ec)>=0)throw Tc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new sc(...t.split("."))._internalPath}catch(r){throw Tc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Tc(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=` in field ${r}`),a&&(l+=` in document ${s}`),l+=")"),new Lt(Rt.INVALID_ARGUMENT,o+e+l)}function Cc(e,t){return e.some(e=>e.isEqual(t))}class Ic{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Dc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Dc extends Ic{data(){return super.data()}}function jc(e,t){return"string"==typeof t?Nc(e,t):t instanceof sc?t._internalPath:t._delegate._internalPath}function Ac(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Lt(Rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rc{}class Lc extends Rc{}function Pc(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Rc&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Mc).length,n=e.filter(e=>e instanceof Oc).length;if(t>1||t>0&&n>0)throw new Lt(Rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Oc extends Lc{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Oc(e,t,n)}_apply(e){const t=this._parse(e);return zc(e._query,t),new Hu(e.firestore,e.converter,Vs(e._query,t))}_parse(e){const t=pc(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Lt(Rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Uc(a,i);const t=[];for(const n of a)t.push(Vc(r,e,n));o={arrayValue:{values:t}}}else o=Vc(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Uc(a,i),o=bc(n,t,a,"in"===i||"not-in"===i);return cs.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Mc extends Rc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mc(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:hs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)zc(n,s),n=Vs(n,s)}(e._query,t),new Hu(e.firestore,e.converter,Vs(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Fc extends Lc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fc(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Lt(Rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Lt(Rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new os(t,n)}(e._query,this._field,this._direction);return new Hu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new js(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Vc(e,t,n){if("string"==typeof(n=D(n))){if(""===n)throw new Lt(Rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ps(t)&&-1!==n.indexOf("/"))throw new Lt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(en.fromString(n));if(!rn.isDocumentKey(r))throw new Lt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wr(e,new rn(r))}if(n instanceof Wu)return Wr(e,n._key);throw new Lt(Rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${un(n)}.`)}function Uc(e,t){if(!Array.isArray(e)||0===e.length)throw new Lt(Rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function zc(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Lt(Rt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Lt(Rt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Bc{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw It(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return lr(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[Or].arrayValue?.values?.map(e=>wr(e.doubleValue));return new oc(t)}convertGeoPoint(e){return new ac(wr(e.latitude),wr(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Tr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Cr(e));default:return null}}convertTimestamp(e){const t=br(e);return new gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=en.fromString(e);jt(Ua(n),9688,{name:e});const r=new jr(n.get(1),n.get(3)),s=new rn(n.popFirst(5));return r.isEqual(t)||Nt(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function $c(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class qc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hc extends Ic{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(jc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Lt(Rt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Hc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hc._jsonSchema={type:hn("string",Hc._jsonSchemaVersion),bundleSource:hn("string","DocumentSnapshot"),bundleName:hn("string"),bundle:hn("string")};class Wc extends Hc{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Kc{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new qc(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Wc(this._firestore,this._userDataWriter,n.key,n,new qc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Lt(Rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Wc(e._firestore,e._userDataWriter,n.doc.key,n.doc,new qc(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Wc(e._firestore,e._userDataWriter,t.doc.key,t.doc,new qc(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Gc(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Lt(Rt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Kc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ht.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Gc(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It(61501,{type:e})}}Kc._jsonSchemaVersion="firestore/querySnapshot/1.0",Kc._jsonSchema={type:hn("string",Kc._jsonSchemaVersion),bundleSource:hn("string","QuerySnapshot"),bundleName:hn("string"),bundle:hn("string")};class Qc extends Bc{constructor(e){super(),this.firestore=e}convertBytes(e){return new rc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wu(this.firestore,null,t)}}function Yc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=D(e);let s={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||Zu(n[i])||(s=n[i++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Zu(n[i])){const e=n[i];n[i]=e.next?.bind(e),n[i+1]=e.error?.bind(e),n[i+2]=e.complete?.bind(e)}let o,l,u;if(e instanceof Wu)l=cn(e.firestore,ec),u=Rs(e._key.path),o={next:t=>{n[i]&&n[i](Jc(l,e,t))},error:n[i+1],complete:n[i+2]};else{const t=cn(e,Hu);l=cn(t.firestore,ec),u=t._query;const r=new Qc(l);o={next:e=>{n[i]&&n[i](new Kc(l,r,t,e))},error:n[i+1],complete:n[i+2]},Ac(e._query)}return function(e,t,n,r){const s=new Du(r),i=new Yl(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>$l(await Fu(e),i)),()=>{s.Nu(),e.asyncQueue.enqueueAndForget(async()=>ql(await Fu(e),i))}}(tc(l),u,a,o)}function Xc(e,t){return function(e,t){const n=new Pt;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Nu(e);try{const e=await function(e,t){const n=At(e),r=gn.now(),s=t.reduce((e,t)=>e.add(t.key),ii());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Ys(),l=ii();return n.Ns.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Di(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Ri(e.key,t,ns(t.value.mapValue),Si.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Zs(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new cr(Wt)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await ku(r,e.changes),await kl(r.remoteStore)}catch(e){const t=Ol(e,"Failed to persist write");n.reject(t)}}(await Mu(e),t,n)),n.promise}(tc(e),t)}function Jc(e,t,n){const r=n.docs.get(t._key),s=new Qc(e);return new Hc(e,s,t._key,r,new qc(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){kt=e}(He),Ue(new j("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new ec(new Vt(e.getProvider("auth-internal")),new $t(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Lt(Rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jr(e.options.projectId,t)}(i,r),i);return s={useFetchStreams:t,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ge(bt,wt,e),Ge(bt,wt,"esm2020")}();const Zc="firebasestorage.googleapis.com",eh="storageBucket";class th extends E{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(sh(e),`Firebase Storage: ${t} (${sh(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,th.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var nh,rh;function sh(e){return"storage/"+e}function ih(){return new th(nh.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ah(){return new th(nh.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oh(){return new th(nh.CANCELED,"User canceled the upload/download.")}function lh(){return new th(nh.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uh(e){return new th(nh.INVALID_ARGUMENT,e)}function ch(){return new th(nh.APP_DELETED,"The Firebase app was deleted.")}function hh(e,t){return new th(nh.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function dh(e){throw new th(nh.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(nh||(nh={}));class fh{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=fh.makeFromUrl(e,t)}catch(s){return new fh(e,"")}if(""===n.path)return n;throw r=e,new th(nh.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${t===Zc?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new fh(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new th(nh.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class ph{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function gh(e){return"string"===typeof e||e instanceof String}function mh(e){return yh()&&e instanceof Blob}function yh(){return"undefined"!==typeof Blob}function vh(e,t,n,r){if(r<t)throw uh(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw uh(`Invalid value for '${e}'. Expected ${n} or less.`)}function bh(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function wh(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function xh(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(rh||(rh={}));class kh{constructor(e,t,n,r,s,i,a,o,l,u,c){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new _h(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===rh.NO_ERROR,s=n.getStatus();if(!t||xh(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===rh.ABORT;return void e(!1,new _h(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new _h(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());void 0!==e?n(e):n()}catch(i){r(i)}else if(null!==s){const e=ih();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?ch():oh())}else{r(ah())}};this.canceled_?t(0,new _h(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,a=!1,o=0;function l(){return 2===o}let u=!1;function c(){if(!u){u=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function d(){i&&clearTimeout(i)}function f(e){if(u)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return d(),void c.call(null,e,...n);if(l()||a)return d(),void c.call(null,e,...n);let i;r<64&&(r*=2),1===o?(o=2,i=0):i=1e3*(r+Math.random()),h(i)}let p=!1;function g(e){p||(p=!0,d(),u||(null!==s?(e||(o=2),clearTimeout(s),h(0)):e||(o=1)))}return h(0),i=setTimeout(()=>{a=!0,g(!0)},n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class _h{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Sh(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Eh(){const e=Sh();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(yh())return new Blob(n);throw new th(nh.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Nh(e){if("undefined"===typeof atob)throw t="base-64",new th(nh.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const Th="raw",Ch="base64",Ih="base64url",Dh="data_url";class jh{constructor(e,t){this.data=e,this.contentType=t||null}}function Ah(e,t){switch(e){case Th:return new jh(Rh(t));case Ch:case Ih:return new jh(Lh(e,t));case Dh:return new jh(function(e){const t=new Ph(e);return t.base64?Lh(Ch,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw hh(Dh,"Malformed data URL.")}return Rh(t)}(t.rest)}(t),new Ph(t).contentType)}throw ih()}function Rh(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Lh(e,t){switch(e){case Ch:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw hh(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Ih:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw hh(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Nh(t)}catch(s){if(s.message.includes("polyfill"))throw s;throw hh(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Ph{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw hh(Dh,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Oh{constructor(e,t){let n=0,r="";mh(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(mh(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Oh(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Oh(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(yh()){const e=t.map(e=>e instanceof Oh?e.data_:e);return new Oh(Eh.apply(null,e))}{const e=t.map(e=>gh(e)?Ah(Th,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new Oh(r,!0)}}uploadData(){return this.data_}}function Mh(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function Fh(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Vh(e,t){return t}class Uh{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Vh}}let zh=null;function Bh(){if(zh)return zh;const e=[];e.push(new Uh("bucket")),e.push(new Uh("generation")),e.push(new Uh("metageneration")),e.push(new Uh("name","fullPath",!0));const t=new Uh("name");t.xform=function(e,t){return function(e){return!gh(e)||e.length<2?e:Fh(e)}(t)},e.push(t);const n=new Uh("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Uh("timeCreated")),e.push(new Uh("updated")),e.push(new Uh("md5Hash",null,!0)),e.push(new Uh("cacheControl",null,!0)),e.push(new Uh("contentDisposition",null,!0)),e.push(new Uh("contentEncoding",null,!0)),e.push(new Uh("contentLanguage",null,!0)),e.push(new Uh("contentType",null,!0)),e.push(new Uh("metadata","customMetadata",!0)),zh=e,zh}function $h(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,s=new fh(n,r);return t._makeStorageReference(s)}})}(r,e),r}function qh(e,t,n){const r=Mh(t);if(null===r)return null;return $h(e,r,n)}function Hh(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Wh{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kh(e){if(!e)throw ih()}function Gh(e,t){return function(n,r){const s=qh(e,r,t);return Kh(null!==s),s}}function Qh(e,t){return function(n,r){const s=qh(e,r,t);return Kh(null!==s),function(e,t,n,r){const s=Mh(t);if(null===s)return null;if(!gh(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const a=encodeURIComponent;return i.split(",").map(t=>{const s=e.bucket,i=e.fullPath;return bh("/b/"+a(s)+"/o/"+a(i),n,r)+wh({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}function Yh(e){return function(t,n){let r;var s,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new th(nh.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new th(nh.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new th(nh.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(s=e.path,r=new th(nh.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Xh(e){const t=Yh(e);return function(n,r){let s=t(n,r);var i;return 404===n.getStatus()&&(i=e.path,s=new th(nh.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function Jh(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Zh(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=Jh(t,r,s),u="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Hh(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",c="\r\n--"+o+"--",h=Oh.getBlob(u,r,c);if(null===h)throw lh();const d={name:l.fullPath},f=bh(i,e.host,e._protocol),p=e.maxUploadRetryTime,g=new Wh(f,"POST",Gh(e,n),p);return g.urlParams=d,g.headers=a,g.body=h.uploadData(),g.errorHandler=Yh(t),g}class ed{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,s){if(this.sent_)throw dh("cannot .send() more than once");if(g(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==s)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dh("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw dh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class td extends ed{initXhr(){this.xhr_.responseType="text"}}function nd(){return new td}class rd{constructor(e,t){this._service=e,this._location=t instanceof fh?t:fh.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new rd(e,t)}get root(){const e=new fh(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fh(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new fh(this._location.bucket,e);return new rd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new th(nh.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function sd(e,t,n){e._throwIfRoot("uploadBytes");const r=Zh(e.storage,e._location,Bh(),new Oh(t,!0),n);return e.storage.makeRequestWithTokens(r,nd).then(t=>({metadata:t,ref:e}))}function id(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=bh(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new Wh(r,"GET",Qh(e,n),s);return i.errorHandler=Xh(t),i}(e.storage,e._location,Bh());return e.storage.makeRequestWithTokens(t,nd).then(e=>{if(null===e)throw new th(nh.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function ad(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=bh(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,s=new Wh(n,"DELETE",function(e,t){},r);return s.successCodes=[200,204],s.errorHandler=Xh(t),s}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,nd)}function od(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new fh(e._location.bucket,n);return new rd(e.storage,r)}function ld(e,t){if(e instanceof hd){const n=e;if(null==n._bucket)throw new th(nh.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eh+"' property when initializing the app?");const r=new rd(n,n._bucket);return null!=t?ld(r,t):r}return void 0!==t?od(e,t):e}function ud(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof hd)return new rd(e,t);throw uh("To use ref(service, url), the first argument must be a Storage instance.")}return ld(e,t)}function cd(e,t){const n=t?.[eh];return null==n?null:fh.makeFromBucketSpec(n,e)}class hd{constructor(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=Zc,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?fh.makeFromBucketSpec(r,this._host):cd(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=fh.makeFromBucketSpec(this._url,e):this._bucket=cd(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vh("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vh("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Be(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rd(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ph(ch());{const i=function(e,t,n,r,s,i){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=wh(e.urlParams),u=e.url+l,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new kh(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a,o)}(e,this._appId,n,r,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const dd="@firebase/storage",fd="0.14.0",pd="storage";function gd(e,t){return ud(e=D(e),t)}function md(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new hd(r,s,i,n,He)}Ue(new j(pd,md,"PUBLIC").setMultipleInstances(!0)),Ge(dd,fd,""),Ge(dd,fd,"esm2020");var yd=n(579);const vd=We({apiKey:"AIzaSyDJTS2-XcoJCIR3OYDTE2-oqsUjorA4P-M",authDomain:"jurnal-trading-saya.firebaseapp.com",projectId:"jurnal-trading-saya",storageBucket:"jurnal-trading-saya.appspot.com",messagingSenderId:"55282716936",appId:"1:55282716936:web:0d631d8ada6f89c7411cbd",measurementId:"G-BZ0D0MZXJV"}),bd=function(e,t){const n="object"==typeof e?e:Ke(),r="string"==typeof e?e:t||Dr,s=ze(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=d("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=cn(e,qu);const s=g(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${n}`;s&&(m(`https://${o}`),w("Firestore",!0)),i.host!==zu&&i.host!==o&&Tt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:o,ssl:s,emulatorOptions:r};if(!C(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=xt.MOCK_USER;else{t=y(r.mockUserToken,e._app?.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Lt(Rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new xt(s)}e._authCredentials=new Ft(new Ot(t,n))}}(s,...e)}return s}(vd),wd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke(),t=arguments.length>1?arguments[1]:void 0;e=D(e);const n=ze(e,pd).getImmediate({identifier:t}),r=d("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`;const s=g(t);s&&(m(`https://${e.host}/b`),w("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:y(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(vd),xd=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),kd=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),(0,yd.jsx)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]})},_d=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,yd.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})},Sd=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,yd.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),(0,yd.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),(0,yd.jsx)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),(0,yd.jsx)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),(0,yd.jsx)("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),(0,yd.jsx)("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),(0,yd.jsx)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),(0,yd.jsx)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})},Ed=e=>{let{className:t}=e;return(0,yd.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:(0,yd.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})},Nd=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,yd.jsx)("circle",{cx:"12",cy:"12",r:"6"}),(0,yd.jsx)("circle",{cx:"12",cy:"12",r:"2"})]})},Td=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("path",{d:"M8 2v4"}),(0,yd.jsx)("path",{d:"M16 2v4"}),(0,yd.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),(0,yd.jsx)("path",{d:"M8 10h.01"}),(0,yd.jsx)("path",{d:"M12 10h.01"}),(0,yd.jsx)("path",{d:"M16 10h.01"}),(0,yd.jsx)("path",{d:"M8 14h.01"}),(0,yd.jsx)("path",{d:"M12 14h.01"}),(0,yd.jsx)("path",{d:"M16 14h.01"})]})},Cd=e=>{let{className:t,filled:n}=e;return(0,yd.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:n?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:(0,yd.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})},Id=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,yd.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})},Dd=e=>{let{className:t}=e;return(0,yd.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:(0,yd.jsx)("polyline",{points:"6 9 12 15 18 9"})})},jd=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,yd.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,yd.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]})},Ad=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,yd.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]})},Rd=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,yd.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,yd.jsx)("polyline",{points:"21 15 16 10 5 21"})]})},Ld=e=>{let{className:t}=e;return(0,yd.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:(0,yd.jsx)("polyline",{points:"15 18 9 12 15 6"})})},Pd=e=>{let{className:t}=e;return(0,yd.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:(0,yd.jsx)("polyline",{points:"9 18 15 12 9 6"})})},Od=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,yd.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})},Md=e=>{let{className:t,style:n}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,style:n,children:[(0,yd.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,yd.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})},Fd=e=>{let{className:t,style:n}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,style:n,children:[(0,yd.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,yd.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,yd.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})},Vd=e=>{let{className:t,style:n}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,style:n,children:[(0,yd.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,yd.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,yd.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})},Ud=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),(0,yd.jsx)("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),(0,yd.jsx)("path",{d:"m9 14 2 2 4-4"})]})},zd=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("line",{x1:"19",y1:"5",x2:"5",y2:"19"}),(0,yd.jsx)("circle",{cx:"6.5",cy:"6.5",r:"2.5"}),(0,yd.jsx)("circle",{cx:"17.5",cy:"17.5",r:"2.5"})]})},Bd=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("path",{d:"M16 8h2a2 2 0 0 1 2 2v2M8 8H6a2 2 0 0 0-2 2v2"}),(0,yd.jsx)("path",{d:"M12 2v4"}),(0,yd.jsx)("path",{d:"M12 18v4"}),(0,yd.jsx)("path",{d:"M12 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}),(0,yd.jsx)("path",{d:"M12 12c2.76 0 5 2.24 5 5s-2.24 5-5 5-5-2.24-5-5 2.24-5 5-5z"})]})},$d=e=>{let{className:t}=e;return(0,yd.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,yd.jsx)("path",{d:"M16 16h2a2 2 0 0 0 2-2v-2M8 16H6a2 2 0 0 1-2-2v-2"}),(0,yd.jsx)("path",{d:"M12 2v4"}),(0,yd.jsx)("path",{d:"M12 18v4"}),(0,yd.jsx)("path",{d:"M12 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"}),(0,yd.jsx)("path",{d:"M12 12c2.76 0 5 2.24 5 5s-2.24 5-5 5-5-2.24-5-5 2.24-5 5-5z"})]})},qd=e=>{let{title:t,value:n,icon:r,valueColor:s,subValue:i}=e;return(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md flex items-center transition-colors duration-300",children:[(0,yd.jsx)("div",{className:"p-3 bg-gray-100 dark:bg-gray-700 rounded-full mr-4",children:r}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t}),(0,yd.jsx)("p",{className:`text-xl font-bold ${s}`,children:n}),i&&(0,yd.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:i})]})]})},Hd=e=>{var t,n;let{transactions:s}=e;const i=(0,r.useRef)(null),[a,o]=(0,r.useState)({width:0,height:0});(0,r.useEffect)(()=>{const e=new ResizeObserver(e=>{if(e&&e.length>0){const{width:t,height:n}=e[0].contentRect;o({width:t,height:n})}});return i.current&&e.observe(i.current),()=>{i.current&&e.unobserve(i.current)}},[]);const l=(0,r.useMemo)(()=>{if(!s||0===s.length)return{points:"",labels:[]};const e=[...s].sort((e,t)=>e.date.toDate()-t.date.toDate());let t=0;const n=[];if(e.forEach(e=>{t+=e.pnl,n.push({equity:t,date:e.date.toDate()})}),n.length<2)return{points:"",labels:[]};const{width:r,height:i}=a,o={top:5,right:5,bottom:20,left:60},l=r-o.left-o.right,u=i-o.top-o.bottom;if(l<=0||u<=0)return{points:"",labels:[]};const c=n.map(e=>e.equity),h=Math.max(...c,0),d=Math.min(...c,0),f=h-d,p=e=>u-(e-d)/(f||1)*u;return{points:n.map((e,t)=>`${(e=>e/(n.length-1)*l)(t)},${p(e.equity)}`).join(" "),labels:[{y:p(h),value:h},{y:p(d),value:d}],margin:o,innerWidth:l,innerHeight:u}},[s,a]);if(s.length<2)return(0,yd.jsx)("div",{ref:i,className:"w-full h-full flex items-center justify-center text-gray-500",children:"Requires at least 2 transactions to display the chart."});const u=document.documentElement.classList.contains("dark")?"#4a5568":"#cbd5e1",c=document.documentElement.classList.contains("dark")?"#a0aec0":"#4a5568";return(0,yd.jsx)("div",{ref:i,className:"w-full h-full",children:(0,yd.jsx)("svg",{width:"100%",height:"100%",children:(0,yd.jsxs)("g",{transform:`translate(${(null===(t=l.margin)||void 0===t?void 0:t.left)||0}, ${(null===(n=l.margin)||void 0===n?void 0:n.top)||0})`,children:[l.labels.map(e=>(0,yd.jsxs)("g",{children:[(0,yd.jsx)("line",{x1:"0",y1:e.y,x2:l.innerWidth,y2:e.y,stroke:u,strokeDasharray:"2,2"}),(0,yd.jsx)("text",{x:-10,y:e.y,dy:"0.32em",textAnchor:"end",fill:c,className:"text-xs",children:xd(e.value)})]},e.value)),(0,yd.jsx)("polyline",{fill:"none",stroke:"#4299e1",strokeWidth:"2",points:l.points})]})})})},Wd=e=>{let{onAddTransaction:t,disabled:n}=e;const[s,i]=(0,r.useState)("Buy"),[a,o]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),c="Buy"===s||"Sell"===s;return(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md transition-colors duration-300 "+(n?"opacity-50":""),children:[(0,yd.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),n)return;let r=parseFloat(a);if(!a||isNaN(r))return void u("Amount must be a number.");let i={type:s,pnl:r};"Withdrawal"===s?i.pnl=-Math.abs(r):"Deposit"===s&&(i.pnl=Math.abs(r)),u(""),t(i),o("")},className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Transaction Type"}),(0,yd.jsxs)("select",{id:"type",value:s,onChange:e=>i(e.target.value),disabled:n,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:cursor-not-allowed",children:[(0,yd.jsx)("option",{children:"Buy"}),(0,yd.jsx)("option",{children:"Sell"}),(0,yd.jsx)("option",{children:"Deposit"}),(0,yd.jsx)("option",{children:"Withdrawal"})]})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:c?"Profit / Loss ($)":"Amount ($)"}),(0,yd.jsx)("input",{id:"amount",type:"number",step:"any",value:a,onChange:e=>o(e.target.value),disabled:n,placeholder:c?"e.g. 150 or -75":"e.g. 1000",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none disabled:cursor-not-allowed"})]}),(0,yd.jsx)("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Save Transaction"})]}),l&&(0,yd.jsx)("p",{className:"text-red-500 text-sm mt-2",children:l})]})},Kd=e=>{let{trade:t,onSave:n,onCancel:s}=e;const[i,a]=(0,r.useState)(new Date(t.date.toDate()).toISOString().split("T")[0]),[o,l]=(0,r.useState)(t.type),[u,c]=(0,r.useState)(t.pnl),[h,d]=(0,r.useState)(t.notes||""),[f,p]=(0,r.useState)(t.tags?t.tags.join(", "):""),[g,m]=(0,r.useState)(t.rating||0),[y,v]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),[x,k]=(0,r.useState)(t.imageUrl||""),_=r.useRef(null),S="Buy"===o||"Sell"===o;return(0,yd.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-full overflow-y-auto",children:[(0,yd.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,yd.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Transaction Details & Edit"}),(0,yd.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:(0,yd.jsx)(Id,{className:"w-6 h-6"})})]}),(0,yd.jsxs)("div",{className:"space-y-6",children:[(0,yd.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{htmlFor:"edit-date",className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Date"}),(0,yd.jsx)("input",{id:"edit-date",type:"date",value:i,onChange:e=>a(e.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{htmlFor:"edit-type",className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Type"}),(0,yd.jsxs)("select",{id:"edit-type",value:o,onChange:e=>l(e.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[(0,yd.jsx)("option",{children:"Buy"}),(0,yd.jsx)("option",{children:"Sell"}),(0,yd.jsx)("option",{children:"Deposit"}),(0,yd.jsx)("option",{children:"Withdrawal"})]})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{htmlFor:"edit-pnl",className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:S?"P&L ($)":"Amount ($)"}),(0,yd.jsx)("input",{id:"edit-pnl",type:"number",step:"any",value:u,onChange:e=>c(e.target.value),className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),S&&(0,yd.jsxs)(yd.Fragment,{children:[(0,yd.jsx)("hr",{className:"border-gray-200 dark:border-gray-700"}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Chart Screenshot"}),(0,yd.jsxs)("div",{className:"w-full p-4 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-center",children:[x&&!y&&(0,yd.jsx)("img",{src:x,alt:"Trade Screenshot",className:"max-h-64 mx-auto rounded-md"}),y&&(0,yd.jsx)("img",{src:URL.createObjectURL(y),alt:"Preview",className:"max-h-64 mx-auto rounded-md"}),!x&&!y&&(0,yd.jsxs)("div",{className:"text-gray-400 flex flex-col items-center justify-center h-48",children:[(0,yd.jsx)(Rd,{className:"w-16 h-16 mb-2"}),(0,yd.jsx)("p",{children:"No image uploaded"})]}),(0,yd.jsx)("button",{onClick:()=>_.current.click(),className:"mt-4 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-white font-bold py-2 px-4 rounded-md transition",children:x?"Change Image":"Select Image"}),(0,yd.jsx)("input",{type:"file",accept:"image/*",ref:_,onChange:e=>v(e.target.files[0]),className:"hidden"})]})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{htmlFor:"notes",className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Notes & Trade Rationale"}),(0,yd.jsx)("textarea",{id:"notes",value:h,onChange:e=>d(e.target.value),rows:"5",placeholder:"Write your analysis, entry reasons, and lessons learned...",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{htmlFor:"tags",className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Tags (comma separated)"}),(0,yd.jsx)("input",{id:"tags",type:"text",value:f,onChange:e=>p(e.target.value),placeholder:"e.g. breakout, fomo, discipline",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Execution Rating"}),(0,yd.jsx)("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(e=>(0,yd.jsx)("button",{onClick:()=>m(e),className:"text-yellow-400 hover:text-yellow-500 transition",children:(0,yd.jsx)(Cd,{className:"w-8 h-8",filled:e<=g})},e))})]})]})]}),(0,yd.jsx)("div",{className:"mt-8 flex justify-end",children:(0,yd.jsx)("button",{onClick:async()=>{w(!0);try{let e=x;if(y){const n=gd(wd,`screenshots/${t.id}/${y.name}`),r=await function(e,t,n){return sd(e=D(e),t,n)}(n,y);e=await function(e){return id(e=D(e))}(r.ref)}let r=parseFloat(u);if(isNaN(r))throw new Error("P&L must be a number.");if(!i)throw new Error("Date cannot be empty.");"Withdrawal"===o?r=-Math.abs(r):"Deposit"===o&&(r=Math.abs(r));const a=f.split(",").map(e=>e.trim()).filter(e=>e),l=S?r>=0?"Win":"Loss":null;await n({...t,date:gn.fromDate(new Date(i)),type:o,pnl:r,status:l,notes:h,tags:a,rating:g,imageUrl:e}),s()}catch(e){console.error("Failed to save transaction details:",e),alert(`Failed to save: ${e.message}`)}finally{w(!1)}},disabled:b,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md transition disabled:opacity-50",children:b?"Saving...":"Save Changes"})})]})})},Gd=e=>{let{currentPage:t,totalPages:n,onPageChange:r}=e;const s=Array.from({length:n},(e,t)=>t+1);return n<=1?null:(0,yd.jsxs)("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[(0,yd.jsx)("button",{onClick:()=>r(t-1),disabled:1===t,className:"px-3 py-1 rounded-md bg-gray-200 dark:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"\xab"}),s.map(e=>(0,yd.jsx)("button",{onClick:()=>r(e),className:"px-3 py-1 rounded-md "+(t===e?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700"),children:e},e)),(0,yd.jsx)("button",{onClick:()=>r(t+1),disabled:t===n,className:"px-3 py-1 rounded-md bg-gray-200 dark:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"\xbb"})]})},Qd=e=>{let{data:t}=e;const n=t.reduce((e,t)=>e+t.value,0);if(0===n)return(0,yd.jsx)("div",{className:"flex items-center justify-center h-full w-full text-gray-500",children:"No data"});const r=2*Math.PI*40;let s=0;return(0,yd.jsx)("svg",{viewBox:"0 0 100 100",className:"w-full h-full transform -rotate-90",children:t.map(e=>{const t=r-e.value/n*r,i=(0,yd.jsx)("circle",{cx:"50",cy:"50",r:40,fill:"transparent",stroke:e.color,strokeWidth:10,strokeDasharray:r,strokeDashoffset:t,transform:`rotate(${s/n*360} 50 50)`},e.label);return s+=e.value,i})})},Yd=e=>{let{status:t}=e;const n={className:"w-3 h-3 absolute top-1 left-1"};switch(t){case"PROFIT_TARGET_HIT":case"DISCIPLINED_WIN":case"DISCIPLINED_LOSS":return(0,yd.jsx)(Md,{...n,style:{color:"#48bb78"}});case"OVERTRADED_WIN":case"OVERTRADED_LOSS":return(0,yd.jsx)(Fd,{...n,style:{color:"#f59e0b"}});case"LOSS_LIMIT_HIT":return(0,yd.jsx)(Vd,{...n,style:{color:"#ef4444"}});default:return null}},Xd=e=>{let{transactions:t,currentDate:n,setCurrentDate:s,onDayClick:i,dailyJournals:a,consistencyByDay:o}=e;const l=n.getFullYear(),u=n.getMonth(),c=(0,r.useMemo)(()=>{const e={};return t.forEach(t=>{if("Buy"===t.type||"Sell"===t.type){const n=t.date.toDate(),r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`;e[r]||(e[r]={pnl:0,count:0}),e[r].pnl+=t.pnl,e[r].count++}}),e},[t]),h=(0,r.useMemo)(()=>{const e=[],t=new Date(l,u,1);t.setDate(t.getDate()-t.getDay());for(let n=0;n<42;n++)e.push(new Date(t)),t.setDate(t.getDate()+1);return e},[l,u]),d=(0,r.useMemo)(()=>{const e=[];for(let t=0;t<h.length;t+=7)e.push(h.slice(t,t+7));return e},[h]),f=e=>s(new Date(l,u+e,1));return(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,yd.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,yd.jsx)("button",{onClick:()=>f(-1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,yd.jsx)(Ld,{className:"w-6 h-6"})}),(0,yd.jsxs)("h2",{className:"text-xl font-bold",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][u]," ",l]}),(0,yd.jsx)("button",{onClick:()=>f(1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:(0,yd.jsx)(Pd,{className:"w-6 h-6"})})]}),(0,yd.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center text-xs font-semibold text-gray-500 dark:text-gray-400",children:["Sun","Mon","Tue","Wed","Thu","Fri","Weekly"].map(e=>(0,yd.jsx)("div",{children:e},e))}),(0,yd.jsx)("div",{className:"mt-2 space-y-1",children:d.map((e,t)=>{const n=e.reduce((e,t)=>{var n;const r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;return e+((null===(n=c[r])||void 0===n?void 0:n.pnl)||0)},0);return(0,yd.jsx)("div",{className:"grid grid-cols-7 gap-1",children:e.map((e,r)=>{if(6===r){const e=n>=0?"bg-green-500/10 dark:bg-green-900/30":"bg-red-500/10 dark:bg-red-900/30",r=n>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400";return(0,yd.jsxs)("div",{className:`p-1 rounded-lg text-center h-20 flex flex-col justify-center items-center transition-colors ${e}`,children:[(0,yd.jsx)("span",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:"Weekly P&L"}),(0,yd.jsx)("span",{className:`mt-1 text-sm font-bold ${r}`,children:xd(n)})]},`weekly-${t}`)}const s=e.getDate(),l=e.getMonth()===u,h=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(s).padStart(2,"0")}`,d=c[h],f=a[h]&&(a[h].notes||a[h].rating>0||a[h].bias),p=o[h],g=(new Date).toDateString()===e.toDateString();let m="hover:bg-gray-100 dark:hover:bg-gray-700/50";d&&(m=d.pnl>=0?"bg-green-500/20 hover:bg-green-500/30":"bg-red-500/20 hover:bg-red-500/30");const y=l?"text-gray-800 dark:text-white":"text-gray-400 dark:text-gray-500";return(0,yd.jsxs)("div",{className:`p-1 rounded-lg text-center h-20 flex flex-col justify-start items-center transition-colors cursor-pointer relative ${m}`,onClick:()=>i(e),children:[(0,yd.jsx)(Yd,{status:p}),f&&(0,yd.jsx)(Td,{className:"w-3 h-3 text-blue-500 absolute top-1 right-1"}),(0,yd.jsx)("span",{className:`w-6 h-6 flex items-center justify-center rounded-full text-sm ${g?"bg-blue-600 text-white":y}`,children:s}),d&&(0,yd.jsxs)("div",{className:"text-center mt-1",children:[(0,yd.jsx)("span",{className:"text-xs font-bold "+(d.pnl>=0?"text-green-500":"text-red-500"),children:xd(d.pnl).replace(/\..*/,"")}),(0,yd.jsxs)("span",{className:"block text-gray-400 text-[10px]",children:[d.count," trade",d.count>1?"s":""]})]})]},e.toISOString())})},t)})}),(0,yd.jsxs)("div",{className:"mt-4 flex justify-center items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[(0,yd.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yd.jsx)(Md,{className:"w-4 h-4 text-green-500"}),(0,yd.jsx)("span",{children:"Disciplined"})]}),(0,yd.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yd.jsx)(Fd,{className:"w-4 h-4 text-yellow-500"}),(0,yd.jsx)("span",{children:"Overtraded"})]}),(0,yd.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,yd.jsx)(Vd,{className:"w-4 h-4 text-red-500"}),(0,yd.jsx)("span",{children:"Loss Exceeded"})]})]})]})},Jd=e=>{let{dayPerformance:t}=e;const n=e=>{let{label:t,value:n,maxValue:r,color:s}=e;const i=r>0?Math.abs(n)/r*100:0;return(0,yd.jsxs)("div",{className:"flex flex-col items-center",children:[(0,yd.jsx)("div",{className:"w-full h-32 flex items-end justify-center",children:(0,yd.jsx)("div",{className:`w-10 rounded-t-md transition-all duration-500 ${s}`,style:{height:`${i}%`}})}),(0,yd.jsx)("span",{className:"text-xs mt-1",children:t})]})},r=Math.max(.01,...Object.values(t).map(e=>Math.abs(e.pnl)));return(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,yd.jsx)("h3",{className:"font-bold text-lg mb-4 text-center",children:"Performance by Day"}),(0,yd.jsx)("div",{className:"grid grid-cols-7 gap-2",children:Object.entries(t).map(e=>{let[t,s]=e;return(0,yd.jsx)(n,{label:t.substring(0,3),value:s.pnl,maxValue:r,color:s.pnl>=0?"bg-green-500":"bg-red-500"},t)})})]})},Zd=e=>{let{stats:t}=e;const{tagPerformance:n,streaks:r,avgWinLossRatio:s,ratingPerformance:i,drawdown:a,expectancy:o}=t;return(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,yd.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Advanced Analytics Dashboard"}),(0,yd.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[(0,yd.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[(0,yd.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Tag Performance Analysis"}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("h4",{className:"font-semibold text-green-500 mb-2",children:"Best Strategies (Top 3)"}),(0,yd.jsx)("ul",{className:"space-y-2 text-sm",children:n.top3.length>0?n.top3.map(e=>(0,yd.jsxs)("li",{className:"flex justify-between",children:[(0,yd.jsx)("span",{className:"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 px-2 py-1 rounded",children:e.name}),(0,yd.jsx)("span",{className:"font-mono",children:xd(e.pnl)})]},e.name)):(0,yd.jsx)("li",{children:"No data"})})]}),(0,yd.jsx)("hr",{className:"my-4 border-gray-200 dark:border-gray-700"}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("h4",{className:"font-semibold text-red-500 mb-2",children:"Biggest Mistakes (Top 3)"}),(0,yd.jsx)("ul",{className:"space-y-2 text-sm",children:n.bottom3.length>0?n.bottom3.map(e=>(0,yd.jsxs)("li",{className:"flex justify-between",children:[(0,yd.jsx)("span",{className:"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 px-2 py-1 rounded",children:e.name}),(0,yd.jsx)("span",{className:"font-mono",children:xd(e.pnl)})]},e.name)):(0,yd.jsx)("li",{children:"No data"})})]})]}),(0,yd.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[(0,yd.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Risk & Psychology Analysis"}),(0,yd.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,yd.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yd.jsx)("span",{children:"Max Win Streak"}),(0,yd.jsx)("span",{className:"font-bold text-2xl text-green-500",children:r.maxWinStreak})]}),(0,yd.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yd.jsx)("span",{children:"Max Loss Streak"}),(0,yd.jsx)("span",{className:"font-bold text-2xl text-red-500",children:r.maxLossStreak})]}),(0,yd.jsx)("hr",{className:"my-2 border-gray-200 dark:border-gray-700"}),(0,yd.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yd.jsx)("span",{children:"Average Win/Loss Ratio"}),(0,yd.jsxs)("span",{className:"font-bold text-2xl "+(s>=1.5?"text-green-500":"text-yellow-500"),children:[s.toFixed(2)," : 1"]})]})]})]}),(0,yd.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[(0,yd.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Execution & Drawdown"}),(0,yd.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,yd.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yd.jsx)("span",{children:"P&L on 5-Star Trades"}),(0,yd.jsx)("span",{className:"font-semibold "+(i.pnlByRating5>=0?"text-green-500":"text-red-500"),children:xd(i.pnlByRating5)})]}),(0,yd.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yd.jsx)("span",{children:"P&L on 1-Star Trades"}),(0,yd.jsx)("span",{className:"font-semibold "+(i.pnlByRating1>=0?"text-green-500":"text-red-500"),children:xd(i.pnlByRating1)})]}),(0,yd.jsx)("hr",{className:"my-2 border-gray-200 dark:border-gray-700"}),(0,yd.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yd.jsx)("span",{children:"Maximum Drawdown"}),(0,yd.jsx)("span",{className:"font-semibold text-red-500",children:xd(a.maxDrawdownValue)})]}),(0,yd.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,yd.jsx)("span",{}),(0,yd.jsxs)("span",{children:["(",a.maxDrawdownPercent.toFixed(2),"%)"]})]}),(0,yd.jsxs)("div",{className:"flex justify-between items-center",children:[(0,yd.jsx)("span",{children:"Longest Drawdown Period"}),(0,yd.jsxs)("span",{className:"font-semibold",children:[a.longestDrawdownDuration," trades"]})]})]})]}),(0,yd.jsxs)("div",{className:"lg:col-span-2 xl:col-span-3 p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[(0,yd.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Expectancy & R:R Suggestion"}),(0,yd.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,yd.jsxs)("div",{children:[(0,yd.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Expectancy per Trade"}),(0,yd.jsx)("p",{className:"font-bold text-2xl "+(o.expectancyValue>=0?"text-green-500":"text-red-500"),children:xd(o.expectancyValue)})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Breakeven R:R (Min.)"}),(0,yd.jsxs)("p",{className:"font-bold text-2xl",children:["1 : ",o.breakEvenRRR.toFixed(2)]})]}),(0,yd.jsxs)("div",{className:"md:col-span-3 xl:col-span-1 bg-blue-100 dark:bg-blue-900/50 p-3 rounded-lg",children:[(0,yd.jsx)("p",{className:"text-sm font-bold text-blue-800 dark:text-blue-300",children:"Suggestion"}),(0,yd.jsx)("p",{className:"text-xs mt-1 text-blue-700 dark:text-blue-400",children:o.suggestion})]})]})]})]})]})},ef=e=>{var t,n,s,i,a;let{date:o,transactions:l,onClose:u,onTradeClick:c,dailyJournals:h,onSaveJournal:d}=e;const f=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`,[p,g]=(0,r.useState)((null===(t=h[f])||void 0===t?void 0:t.notes)||""),[m,y]=(0,r.useState)((null===(n=h[f])||void 0===n?void 0:n.rating)||0),[v,b]=(0,r.useState)((null===(s=h[f])||void 0===s?void 0:s.biasOutcome)||null),w=(0,r.useMemo)(()=>o?l.filter(e=>{const t=e.date.toDate();return t.getFullYear()===o.getFullYear()&&t.getMonth()===o.getMonth()&&t.getDate()===o.getDate()}).sort((e,t)=>e.date.toDate()-t.date.toDate()):[],[l,o]),x=new Intl.DateTimeFormat("en-US",{dateStyle:"full"}).format(o),k=null===(i=h[f])||void 0===i?void 0:i.bias,_=null===(a=h[f])||void 0===a?void 0:a.reason;return(0,yd.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-full overflow-y-auto",children:[(0,yd.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,yd.jsxs)("div",{children:[(0,yd.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Daily Details"}),(0,yd.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:x})]}),(0,yd.jsx)("button",{onClick:u,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:(0,yd.jsx)(Id,{className:"w-6 h-6"})})]}),(0,yd.jsxs)("div",{className:"space-y-6",children:[(0,yd.jsxs)("div",{children:[(0,yd.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Today's Transaction History"}),(0,yd.jsx)("div",{className:"space-y-2",children:w.length>0?w.map(e=>(0,yd.jsxs)("div",{onClick:()=>c(e),className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[(0,yd.jsxs)("div",{children:[(0,yd.jsx)("span",{className:"font-semibold "+("Buy"===e.type?"text-green-500":"Sell"===e.type?"text-red-500":"Deposit"===e.type?"text-blue-500":"text-orange-500"),children:e.type}),(0,yd.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:e.date.toDate().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),(0,yd.jsxs)("div",{className:"flex items-center",children:[(0,yd.jsx)("span",{className:"font-semibold "+(e.pnl>=0?"text-green-500":"text-red-500"),children:xd(e.pnl)}),(e.notes||e.tags&&e.tags.length>0||e.rating>0)&&(0,yd.jsx)(Td,{className:"w-4 h-4 text-blue-500 ml-3"})]})]},e.id)):(0,yd.jsx)("p",{className:"text-center text-gray-500 py-4",children:"No transactions on this day."})})]}),(0,yd.jsx)("hr",{className:"border-gray-200 dark:border-gray-700"}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Daily Journal & Bias"}),k&&(0,yd.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,yd.jsxs)("p",{className:"text-sm font-bold text-gray-600 dark:text-gray-400",children:["Daily Bias: ",(0,yd.jsx)("span",{className:"bullish"===k?"text-green-500":"text-red-500",children:k.charAt(0).toUpperCase()+k.slice(1)})]}),(0,yd.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-300 mt-1",children:["Reason: ",_||"No reason provided."]}),(0,yd.jsxs)("div",{className:"mt-2",children:[(0,yd.jsx)("span",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 mr-3",children:"Bias Outcome:"}),(0,yd.jsx)("button",{onClick:()=>b("correct"),className:"px-2 py-1 text-xs rounded "+("correct"===v?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-600"),children:"Correct"}),(0,yd.jsx)("button",{onClick:()=>b("incorrect"),className:"ml-2 px-2 py-1 text-xs rounded "+("incorrect"===v?"bg-red-500 text-white":"bg-gray-200 dark:bg-gray-600"),children:"Incorrect"})]})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{htmlFor:"daily-notes",className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Today's Evaluation Notes"}),(0,yd.jsx)("textarea",{id:"daily-notes",value:p,onChange:e=>g(e.target.value),rows:"5",placeholder:"How was your trading performance today? What went well? What could be improved?",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),(0,yd.jsxs)("div",{className:"mt-4",children:[(0,yd.jsx)("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Rate Today's Performance"}),(0,yd.jsx)("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(e=>(0,yd.jsx)("button",{onClick:()=>y(e),className:"text-yellow-400 hover:text-yellow-500 transition",children:(0,yd.jsx)(Cd,{className:"w-8 h-8",filled:e<=m})},e))})]})]})]}),(0,yd.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[(0,yd.jsx)("button",{onClick:u,className:"bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-white font-bold py-2 px-4 rounded-md transition",children:"Cancel"}),(0,yd.jsx)("button",{onClick:()=>{const e=h[f]||{};d(f,{...e,notes:p,rating:m,biasOutcome:v}),u()},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md transition",children:"Save Journal"})]})]})})},tf=e=>{let{winRate:t,avgTradesPerDay:n}=e;const[s,i]=(0,r.useState)({equity:"10000",target:"12000",risk:"1"}),[a,o]=(0,r.useState)(null),[l,u]=(0,r.useState)(""),c=e=>i(t=>({...t,[e.target.name]:e.target.value}));return(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,yd.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Initial Equity ($)"}),(0,yd.jsx)("input",{name:"equity",type:"number",value:s.equity,onChange:c,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Target Equity ($)"}),(0,yd.jsx)("input",{name:"target",type:"number",value:s.target,onChange:c,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Risk per Trade (%)"}),(0,yd.jsx)("input",{name:"risk",type:"number",value:s.risk,onChange:c,className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,yd.jsx)("button",{onClick:()=>{const e=parseFloat(s.equity),r=parseFloat(s.target),i=parseFloat(s.risk);if(isNaN(e)||isNaN(r)||isNaN(i)||e<=0||r<=e||i<=0)return u("Invalid input. Please ensure all numbers are positive and target > initial equity."),o(null);if(0===t)return u("Your win rate is 0%. Projections cannot be calculated."),o(null);u("");const a=[1,2,3].map(s=>{let a=e,o=0;if(t*(a*(i/100)*s)-a*(i/100)*(1-t)<=0)return{rr:s,trades:1/0,days:1/0};for(;a<r&&o<5e3;)a+=t*(a*(i/100)*s)-a*(i/100)*(1-t),o++;return{rr:s,trades:o>=5e3?1/0:o,days:n>0?Math.ceil(o/n):1/0}});o(a)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition",children:"Calculate Projection"})]}),l&&(0,yd.jsx)("p",{className:"text-red-500 text-center mt-4",children:l}),a&&(0,yd.jsxs)("div",{className:"mt-6",children:[(0,yd.jsxs)("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Based on your historical win rate of ",(0,yd.jsxs)("span",{className:"font-bold text-blue-500",children:[(100*t).toFixed(1),"%"]})," and an average of ",(0,yd.jsx)("span",{className:"font-bold text-blue-500",children:n.toFixed(1)})," trades per day:"]}),(0,yd.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:a.map(e=>(0,yd.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:[(0,yd.jsxs)("h4",{className:"font-bold text-lg",children:["R:R 1:",e.rr]}),e.trades===1/0?(0,yd.jsx)("p",{className:"text-red-500 mt-2",children:"Not achievable with this scenario."}):(0,yd.jsxs)(yd.Fragment,{children:[(0,yd.jsx)("p",{className:"text-3xl font-bold text-blue-500 my-2",children:e.trades}),(0,yd.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Trades"}),(0,yd.jsx)("p",{className:"text-xl font-semibold mt-3",children:e.days}),(0,yd.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Estimated Days"})]})]},e.rr))})]})]})},nf=e=>{let{settings:t,onSave:n,onCancel:s}=e;const[i,a]=(0,r.useState)(t),o=e=>{const{name:t,value:n}=e.target;a(e=>({...e,[t]:n}))};return(0,yd.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,yd.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,yd.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Daily Target Settings"}),(0,yd.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:(0,yd.jsx)(Id,{className:"w-6 h-6"})})]}),(0,yd.jsxs)("div",{className:"space-y-4",children:[(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Starting Equity ($)"}),(0,yd.jsx)("input",{type:"number",name:"startingEquity",value:i.startingEquity,onChange:o,className:"w-full bg-gray-50 dark:bg-gray-700 border rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Daily Profit Target (%)"}),(0,yd.jsx)("input",{type:"number",name:"dailyProfitTarget",value:i.dailyProfitTarget,onChange:o,className:"w-full bg-gray-50 dark:bg-gray-700 border rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Daily Loss Limit (%)"}),(0,yd.jsx)("input",{type:"number",name:"dailyLossLimit",value:i.dailyLossLimit,onChange:o,className:"w-full bg-gray-50 dark:bg-gray-700 border rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-bold text-gray-600 dark:text-gray-400 mb-2",children:"Max Trades Per Day"}),(0,yd.jsx)("input",{type:"number",name:"maxTradesPerDay",value:i.maxTradesPerDay,onChange:o,className:"w-full bg-gray-50 dark:bg-gray-700 border rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,yd.jsx)("div",{className:"mt-8 flex justify-end",children:(0,yd.jsx)("button",{onClick:()=>{n({startingEquity:Number(i.startingEquity),dailyProfitTarget:Number(i.dailyProfitTarget),dailyLossLimit:Number(i.dailyLossLimit),maxTradesPerDay:Number(i.maxTradesPerDay)})},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md transition",children:"Save Settings"})})]})})},rf=e=>{let{dailyStats:t,settings:n}=e;const{pnl:r,tradeCount:s,profitTargetHit:i,lossLimitHit:a,maxTradesHit:o}=t,{dailyProfitTarget:l,dailyLossLimit:u,startingEquity:c}=n,h=c*l/100,d=-Math.abs(c*u/100),f=h>0?Math.min(r/h*100,100):0,p=d<0?Math.min(r/d*100,100):0,g=i||a||o;let m="";return i?m="Profit Target Reached!":a?m="Loss Limit Reached!":o&&(m="Max Trades Reached!"),(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,yd.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Consistency Tracker"}),(0,yd.jsxs)("div",{className:"space-y-4",children:[(0,yd.jsxs)("div",{className:"text-center",children:[(0,yd.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today's P&L"}),(0,yd.jsx)("p",{className:"text-3xl font-bold "+(r>=0?"text-green-500":"text-red-500"),children:xd(r)})]}),g&&(0,yd.jsxs)("div",{className:"p-3 rounded-md text-center bg-red-500/20 text-red-500 dark:text-red-400 font-bold",children:[(0,yd.jsx)("p",{children:"STOP TRADING"}),(0,yd.jsx)("p",{className:"text-sm font-normal",children:m})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,yd.jsxs)("span",{className:"font-semibold text-gray-600 dark:text-gray-300",children:["Profit Target (",xd(h),")"]}),(0,yd.jsxs)("span",{className:"font-semibold text-green-500",children:[f.toFixed(0),"%"]})]}),(0,yd.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:(0,yd.jsx)("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${f}%`}})})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,yd.jsxs)("span",{className:"font-semibold text-gray-600 dark:text-gray-300",children:["Loss Limit (",xd(d),")"]}),(0,yd.jsxs)("span",{className:"font-semibold text-red-500",children:[p.toFixed(0),"%"]})]}),(0,yd.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:(0,yd.jsx)("div",{className:"bg-red-500 h-2.5 rounded-full",style:{width:`${p}%`}})})]}),(0,yd.jsxs)("div",{className:"text-center pt-2",children:[(0,yd.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Trades Today"}),(0,yd.jsxs)("p",{className:"text-2xl font-bold",children:[s," ",(0,yd.jsxs)("span",{className:"text-base font-normal text-gray-400",children:["/ ",n.maxTradesPerDay]})]})]})]})]})},sf=e=>{let{onCancel:t}=e;const[n,s]=(0,r.useState)(1),[i,a]=(0,r.useState)({}),[o,l]=(0,r.useState)(null),u=(e,t)=>{const r={...i,[e]:t};a(r),1===n?s("yes"===t?1.1:2):1.1===n?"yes"===t?s(2):l({text:"Use SNR (Support and Resistance)",color:"text-yellow-500"}):2===n?s("choch"===t?3.1:3.2):3.1===n?l("yes"===t?{text:"Enter on OTE (Optimal Trade Entry)",color:"text-green-500"}:{text:"Enter on Golden Zone",color:"text-green-500"}):3.2===n&&l("yes"===t?{text:"Proceed with Trade",color:"text-green-500"}:{text:"Do Not Enter Trade",color:"text-red-500"})},c=()=>{s(1),a({}),l(null)},h=e=>{let{title:t,onAnswer:n,options:r}=e;return(0,yd.jsxs)("div",{children:[(0,yd.jsx)("h3",{className:"text-lg font-semibold mb-4 text-center",children:t}),(0,yd.jsx)("div",{className:"flex justify-center space-x-4",children:r.map(e=>{const t="object"===typeof e?e.value:e.toLowerCase(),r="object"===typeof e?e.label:e;return(0,yd.jsx)("button",{onClick:()=>n(t),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-md transition",children:r},t)})})]})};return(0,yd.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-lg",children:[(0,yd.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,yd.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Trade Confirmation"}),(0,yd.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:(0,yd.jsx)(Id,{className:"w-6 h-6"})})]}),(()=>{if(o)return(0,yd.jsxs)("div",{className:"text-center",children:[(0,yd.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Recommendation"}),(0,yd.jsx)("p",{className:`text-2xl font-bold ${o.color}`,children:o.text}),(0,yd.jsx)("button",{onClick:c,className:"mt-6 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-white font-bold py-2 px-4 rounded-md transition",children:"Start Over"})]});switch(n){case 1:return(0,yd.jsx)(h,{title:"1. Is there any major news today/tomorrow?",onAnswer:e=>u(1,e),options:["Yes","No"]});case 1.1:return(0,yd.jsx)(h,{title:"Is the market structure good?",onAnswer:e=>u(1.1,e),options:["Yes","No"]});case 2:return(0,yd.jsx)(h,{title:"2. Why are you taking this trade?",onAnswer:e=>u(2,e),options:[{label:"Change of Character",value:"choch"},{label:"Imbalance/FVG",value:"ifvg"}]});case 3.1:return(0,yd.jsx)(h,{title:"For Choch: Did price sweep any liquidity?",onAnswer:e=>u(3.1,e),options:["Yes","No"]});case 3.2:return(0,yd.jsx)(h,{title:"For iFVG: Did price sweep liquidity?",onAnswer:e=>u(3.2,e),options:["Yes","No"]});default:return null}})()]})})},af=e=>{let{todayBias:t,onSaveBias:n}=e;const[s,i]=(0,r.useState)(t.reason||"");(0,r.useEffect)(()=>{i(t.reason||"")},[t.reason]);return(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,yd.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Daily Bias Setter"}),(0,yd.jsxs)("div",{className:"space-y-4",children:[(0,yd.jsxs)("div",{className:"flex justify-around",children:[(0,yd.jsxs)("button",{onClick:()=>n({...t,bias:"bullish"}),className:"p-4 rounded-lg w-full mr-2 transition "+("bullish"===t.bias?"bg-green-500 text-white":"bg-gray-200 dark:bg-gray-700"),children:[(0,yd.jsx)(Bd,{className:"w-8 h-8 mx-auto"}),(0,yd.jsx)("span",{className:"text-sm font-semibold",children:"Bullish"})]}),(0,yd.jsxs)("button",{onClick:()=>n({...t,bias:"bearish"}),className:"p-4 rounded-lg w-full ml-2 transition "+("bearish"===t.bias?"bg-red-500 text-white":"bg-gray-200 dark:bg-gray-700"),children:[(0,yd.jsx)($d,{className:"w-8 h-8 mx-auto"}),(0,yd.jsx)("span",{className:"text-sm font-semibold",children:"Bearish"})]})]}),(0,yd.jsxs)("div",{children:[(0,yd.jsx)("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Reason for Bias"}),(0,yd.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),onBlur:()=>{n({...t,reason:s})},rows:"3",placeholder:"Why this bias?",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md py-2 px-3 focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]})]})};function of(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)({}),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)(()=>"undefined"!==typeof window&&localStorage.getItem("themeV12")||"dark"),[u,c]=(0,r.useState)({startingEquity:1e4,dailyProfitTarget:2,dailyLossLimit:1,maxTradesPerDay:5}),[h,d]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)(null),[y,v]=(0,r.useState)(null),[b,w]=(0,r.useState)("all"),[x,k]=(0,r.useState)("all"),[_,S]=(0,r.useState)({key:"date",direction:"descending"}),[E,N]=(0,r.useState)(1),[T,C]=(0,r.useState)(!0),[I,j]=(0,r.useState)(!1),[A,R]=(0,r.useState)(!1),[L,P]=(0,r.useState)(new Date);(0,r.useEffect)(()=>{const e=localStorage.getItem("tradingJournalSettings");if(e)try{c(JSON.parse(e))}catch(o){console.error("Could not parse settings from localStorage",o)}a(!0);const n=Pc(Gu(bd,"trades"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=jc("orderBy",e);return Fc._create(n,t)}("date","desc")),r=Yc(n,e=>{const n=[];e.forEach(e=>{n.push({...e.data(),id:e.id})}),t(n),a(!1)},e=>{console.error("Error fetching trades:",e),a(!1)}),i=Yc(Pc(Gu(bd,"dailyJournals")),e=>{const t={};e.forEach(e=>{t[e.id]=e.data()}),s(t)},e=>{console.error("Error fetching daily journals:",e)});return()=>{r(),i()}},[]),(0,r.useEffect)(()=>{"dark"===o?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("themeV12",o)},[o]);const O=async(e,t)=>{try{if(await(n=Qu(bd,"trades",e),Xc(cn(n.firestore,ec),[new Mi(n._key,Si.none())])),t){const e=gd(wd,t);await function(e){return ad(e=D(e))}(e)}}catch(r){console.error("Error deleting transaction: ",r)}var n},M=async(e,t)=>{const n=Qu(bd,"dailyJournals",e);try{await function(e,t,n){e=cn(e,Wu);const r=cn(e.firestore,ec),s=$c(e.converter,t,n);return Xc(r,[gc(pc(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Si.none())])}(n,t,{merge:!0})}catch(r){console.error("Error saving daily journal: ",r)}},{trades:F,dashboardStats:V,advancedStats:U,dailyStats:z,consistencyByDay:B}=(0,r.useMemo)(()=>{const t=e.filter(e=>"Buy"===e.type||"Sell"===e.type),n=e.filter(e=>"Deposit"===e.type).reduce((e,t)=>e+t.pnl,0),r=e.filter(e=>"Withdrawal"===e.type).reduce((e,t)=>e+t.pnl,0),s=[...e].sort((e,t)=>e.date.toDate()-t.date.toDate());let i=0;s.forEach(e=>{i+=e.pnl});const a=(new Date).toDateString(),o=e.filter(e=>("Buy"===e.type||"Sell"===e.type)&&e.date.toDate().toDateString()===a),l=o.reduce((e,t)=>e+t.pnl,0),c=u.startingEquity*u.dailyProfitTarget/100,h=-Math.abs(u.startingEquity*u.dailyLossLimit/100),d={pnl:l,tradeCount:o.length,profitTargetHit:c>0&&l>=c,lossLimitHit:l<=h,maxTradesHit:o.length>=u.maxTradesPerDay},f=(e,t)=>{if(0===e.length)return"NO_TRADES";const n=e.reduce((e,t)=>e+t.pnl,0),r=t.startingEquity*t.dailyProfitTarget/100;return n<=-Math.abs(t.startingEquity*t.dailyLossLimit/100)?"LOSS_LIMIT_HIT":r>0&&n>=r?"PROFIT_TARGET_HIT":e.length>t.maxTradesPerDay?n>=0?"OVERTRADED_WIN":"OVERTRADED_LOSS":n>=0?"DISCIPLINED_WIN":"DISCIPLINED_LOSS"},p={},g=e.reduce((e,t)=>{const n=t.date.toDate().toISOString().split("T")[0];return e[n]||(e[n]=[]),e[n].push(t),e},{});for(const e in g){const t=g[e].filter(e=>"Buy"===e.type||"Sell"===e.type);p[e]=f(t,u)}const m=t.reduce((e,t)=>e+t.pnl,0),y=t.filter(e=>"Win"===e.status),v=t.filter(e=>"Loss"===e.status),b=t.length>0?y.length/t.length:0,w=new Set(t.map(e=>e.date.toDate().toLocaleDateString())).size,x=w>0?t.length/w:0,k={};t.forEach(e=>(e.tags||[]).forEach(t=>{k[t]||(k[t]={pnl:0,count:0}),k[t].pnl+=e.pnl,k[t].count++}));const _=Object.entries(k).map(e=>{let[t,n]=e;return{name:t,...n}}).sort((e,t)=>t.pnl-e.pnl),S=_.filter(e=>e.pnl>0).slice(0,3),E=[..._.filter(e=>e.pnl<0)].reverse().slice(0,3);let N=0,T=0,C=0,I=0;s.filter(e=>"Buy"===e.type||"Sell"===e.type).forEach(e=>{"Win"===e.status?(T++,I=0,T>N&&(N=T)):(I++,T=0,I>C&&(C=I))});const D=y.reduce((e,t)=>e+t.pnl,0)/(y.length||1),j=Math.abs(v.reduce((e,t)=>e+t.pnl,0)/(v.length||1)),A=j>0?D/j:0,R=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],L=R.reduce((e,t)=>({...e,[t]:{pnl:0,count:0}}),{});t.forEach(e=>{const t=R[e.date.toDate().getDay()];L[t].pnl+=e.pnl,L[t].count++});const P=t.filter(e=>1===e.rating).reduce((e,t)=>e+t.pnl,0),O=t.filter(e=>5===e.rating).reduce((e,t)=>e+t.pnl,0);let M=0,F=0,V=0,U=0,z=!1,B=0;s.forEach(e=>{if(B+=e.pnl,B>M)M=B,z&&(V>U&&(U=V),V=0,z=!1);else{const t=M-B;t>F&&(F=t),"Buy"!==e.type&&"Sell"!==e.type||(z||(z=!0),V++)}}),z&&V>U&&(U=V);const $=M>0?F/M*100:0,q=1-b,H=b*D-q*j,W=b>0?q/b:0;let K="Not enough data.";return t.length>=10&&(K=H>0?`Your system is profitable. Aim for trades with an R:R above 1:${(W+.5).toFixed(2)}.`:`Your system is not yet profitable. Focus on increasing Win Rate or aiming for an R:R above 1:${(W+.5).toFixed(2)}.`),{trades:t,dashboardStats:{totalPnl:m,currentEquity:i,totalDeposits:n,totalWithdrawals:r,winRate:b,totalTrades:t.length},advancedStats:{tagPerformance:{top3:S,bottom3:E},streaks:{maxWinStreak:N,maxLossStreak:C},dayPerformance:L,avgWinLossRatio:A,ratingPerformance:{pnlByRating1:P,pnlByRating5:O},drawdown:{maxDrawdownValue:F,maxDrawdownPercent:$,longestDrawdownDuration:U},expectancy:{expectancyValue:H,breakEvenRRR:W,suggestion:K},winRate:b,avgTradesPerDay:x},dailyStats:d,consistencyByDay:p}},[e,u,n]),$=(0,r.useMemo)(()=>[...e].filter(e=>("all"===x||e.type===x)&&("Buy"!==e.type&&"Sell"!==e.type||"all"===b||e.status===b)).sort((e,t)=>{if(!_.key)return 0;const n="date"===_.key?e.date.toDate():e[_.key],r="date"===_.key?t.date.toDate():t[_.key];return n<r?"ascending"===_.direction?-1:1:n>r?"ascending"===_.direction?1:-1:0}),[e,b,x,_]),q=e=>{let t="ascending";_.key===e&&"ascending"===_.direction&&(t="descending"),S({key:e,direction:t})},H=Math.ceil($.length/10),W=$.slice(10*(E-1),10*E),K=(0,r.useMemo)(()=>{const e=F.filter(e=>{const t=e.date.toDate();return t.getFullYear()===L.getFullYear()&&t.getMonth()===L.getMonth()}),t=e.length,r=e.filter(e=>"Win"===e.status).length,s=t-r,i=t>0?r/t*100:0,a=e.filter(e=>e.pnl>0).reduce((e,t)=>e+t.pnl,0),o=e.filter(e=>e.pnl<0).reduce((e,t)=>e+t.pnl,0);let l=0,u=0,c=0,h=0,d=0;return new Set(e.map(e=>e.date.toDate().toISOString().split("T")[0])).forEach(e=>{switch(B[e]){case"PROFIT_TARGET_HIT":case"DISCIPLINED_WIN":case"DISCIPLINED_LOSS":c++;break;case"OVERTRADED_WIN":case"OVERTRADED_LOSS":h++;break;case"LOSS_LIMIT_HIT":d++}}),Object.entries(n).forEach(e=>{let[t,n]=e;const r=new Date(t);r.getFullYear()===L.getFullYear()&&r.getMonth()===L.getMonth()&&("correct"===n.biasOutcome&&l++,"incorrect"===n.biasOutcome&&u++)}),{total:t,wins:r,losses:s,winRate:i,totalProfit:a,totalLoss:o,netPnl:a+o,biasCorrect:l,biasIncorrect:u,disciplinedDays:c,overtradedDays:h,lossExceededDays:d}},[F,L,n,B]),G=z.profitTargetHit||z.lossLimitHit||z.maxTradesHit,Q=(new Date).toISOString().split("T")[0],Y=n[Q]||{};return(0,yd.jsx)("div",{className:"bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white min-h-screen font-sans p-4 sm:p-6 lg:p-8 transition-colors duration-300",children:(0,yd.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,yd.jsxs)("header",{className:"mb-8 flex justify-between items-center",children:[(0,yd.jsxs)("div",{children:[(0,yd.jsx)("h1",{className:"text-4xl font-bold",children:"Trading Journal"}),(0,yd.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Live Mode"})]}),(0,yd.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yd.jsx)("button",{onClick:()=>d(!0),className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:(0,yd.jsx)(Od,{className:"w-6 h-6"})}),(0,yd.jsx)("button",{onClick:()=>l("light"===o?"dark":"light"),className:"p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition",children:"light"===o?(0,yd.jsx)(Ed,{className:"w-6 h-6"}):(0,yd.jsx)(Sd,{className:"w-6 h-6"})})]})]}),(0,yd.jsxs)("main",{children:[(0,yd.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 mb-8",children:[(0,yd.jsxs)("div",{className:"lg:col-span-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:[(0,yd.jsx)(qd,{title:"Current Equity",value:xd(V.currentEquity),valueColor:"text-blue-500",icon:(0,yd.jsx)(Nd,{className:"w-6 h-6 text-blue-500"})}),(0,yd.jsx)(qd,{title:"Total P&L (Trades Only)",value:xd(V.totalPnl),valueColor:V.totalPnl>=0?"text-green-500":"text-red-500",icon:(0,yd.jsx)(kd,{className:"w-6 h-6 text-green-500"})}),(0,yd.jsx)(qd,{title:"Win Rate",value:`${(100*V.winRate).toFixed(1)}%`,valueColor:"text-indigo-500",icon:(0,yd.jsx)(zd,{className:"w-6 h-6 text-indigo-500"}),subValue:`${V.totalTrades} trades`}),(0,yd.jsx)(qd,{title:"Total Deposits",value:xd(V.totalDeposits),valueColor:"text-yellow-500",icon:(0,yd.jsx)(jd,{className:"w-6 h-6 text-yellow-500"})}),(0,yd.jsx)(qd,{title:"Total Withdrawals",value:xd(V.totalWithdrawals),valueColor:"text-orange-500",icon:(0,yd.jsx)(Ad,{className:"w-6 h-6 text-orange-500"})}),(0,yd.jsx)(af,{todayBias:Y,onSaveBias:e=>M(Q,e)})]}),(0,yd.jsx)(rf,{dailyStats:z,settings:u})]}),(0,yd.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[(0,yd.jsxs)("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,yd.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Equity Curve"}),(0,yd.jsx)("div",{className:"h-64",children:(0,yd.jsx)(Hd,{transactions:e})})]}),(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[(0,yd.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Monthly Stats"}),(0,yd.jsx)("div",{className:"w-40 h-40 mx-auto mb-4",children:(0,yd.jsx)(Qd,{data:[{label:"Profit",value:K.totalProfit,color:"#48bb78"},{label:"Loss",value:Math.abs(K.totalLoss),color:"#f56565"}]})}),(0,yd.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Profit:"})," ",(0,yd.jsx)("span",{className:"font-semibold text-green-500",children:xd(K.totalProfit)})]}),(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Loss:"})," ",(0,yd.jsx)("span",{className:"font-semibold text-red-500",children:xd(K.totalLoss)})]}),(0,yd.jsxs)("p",{className:"flex justify-between font-bold border-t pt-2",children:[(0,yd.jsx)("span",{children:"Net P&L:"})," ",(0,yd.jsx)("span",{className:K.netPnl>=0?"text-green-500":"text-red-500",children:xd(K.netPnl)})]})]}),(0,yd.jsx)("hr",{className:"my-4 border-gray-200 dark:border-gray-700"}),(0,yd.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Total Trades:"})," ",(0,yd.jsx)("span",{className:"font-semibold",children:K.total})]}),(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Winning Trades:"})," ",(0,yd.jsx)("span",{className:"font-semibold",children:K.wins})]}),(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Losing Trades:"})," ",(0,yd.jsx)("span",{className:"font-semibold",children:K.losses})]}),(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Win Rate:"})," ",(0,yd.jsxs)("span",{className:"font-semibold",children:[K.winRate.toFixed(1),"%"]})]})]}),(0,yd.jsx)("hr",{className:"my-4 border-gray-200 dark:border-gray-700"}),(0,yd.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Bias Correct:"})," ",(0,yd.jsx)("span",{className:"font-semibold text-green-500",children:K.biasCorrect})]}),(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Bias Incorrect:"})," ",(0,yd.jsx)("span",{className:"font-semibold text-red-500",children:K.biasIncorrect})]})]}),(0,yd.jsx)("hr",{className:"my-4 border-gray-200 dark:border-gray-700"}),(0,yd.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Disciplined Days:"})," ",(0,yd.jsx)("span",{className:"font-semibold text-green-500",children:K.disciplinedDays})]}),(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Overtraded Days:"})," ",(0,yd.jsx)("span",{className:"font-semibold text-yellow-500",children:K.overtradedDays})]}),(0,yd.jsxs)("p",{className:"flex justify-between",children:[(0,yd.jsx)("span",{children:"Loss Exceeded Days:"})," ",(0,yd.jsx)("span",{className:"font-semibold text-red-500",children:K.lossExceededDays})]})]})]})]}),(0,yd.jsx)("div",{className:"mb-8",children:(0,yd.jsx)(Xd,{transactions:e,currentDate:L,setCurrentDate:P,onDayClick:e=>v(e),dailyJournals:n,consistencyByDay:B})}),(0,yd.jsx)("div",{className:"mb-8",children:(0,yd.jsx)(Jd,{dayPerformance:U.dayPerformance})}),(0,yd.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md mb-8",children:(0,yd.jsxs)("button",{onClick:()=>p(!0),className:"w-full p-4 flex justify-between items-center text-left text-blue-600 dark:text-blue-400 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition",children:[(0,yd.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,yd.jsx)(Ud,{className:"w-6 h-6"}),(0,yd.jsx)("h2",{className:"text-xl font-bold",children:"Should You Take The Trade?"})]}),(0,yd.jsx)(Pd,{className:"w-6 h-6"})]})}),(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md mb-8",children:[(0,yd.jsxs)("button",{onClick:()=>j(!I),className:"w-full p-4 flex justify-between items-center text-left",children:[(0,yd.jsx)("h2",{className:"text-xl font-bold",children:"Show Advanced Analytics"}),(0,yd.jsx)(Dd,{className:"w-6 h-6 transition-transform "+(I?"rotate-180":"")})]}),I&&(0,yd.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700",children:(0,yd.jsx)(Zd,{stats:U})})]}),(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md mb-8",children:[(0,yd.jsxs)("button",{onClick:()=>R(!A),className:"w-full p-4 flex justify-between items-center text-left",children:[(0,yd.jsx)("h2",{className:"text-xl font-bold",children:"Trading Projection Calculator"}),(0,yd.jsx)(Dd,{className:"w-6 h-6 transition-transform "+(A?"rotate-180":"")})]}),A&&(0,yd.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700",children:(0,yd.jsx)(tf,{winRate:U.winRate,avgTradesPerDay:U.avgTradesPerDay})})]}),(0,yd.jsxs)("div",{className:"space-y-8",children:[(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[(0,yd.jsxs)("div",{className:"p-6 flex justify-between items-center",children:[(0,yd.jsx)("h2",{className:"text-xl font-bold",children:"Add New Transaction"}),(0,yd.jsx)("button",{onClick:()=>C(!T),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white",children:T?(0,yd.jsx)(Ad,{className:"w-6 h-6"}):(0,yd.jsx)(jd,{className:"w-6 h-6"})})]}),T&&(0,yd.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700",children:(0,yd.jsx)(Wd,{onAddTransaction:async e=>{const t="Buy"===e.type||"Sell"===e.type?e.pnl>=0?"Win":"Loss":null,n={...e,date:gn.fromDate(new Date),status:t,notes:"",tags:[],rating:0,imageUrl:""};try{await function(e,t){const n=cn(e.firestore,ec),r=Qu(e),s=$c(e.converter,t);return Xc(n,[gc(pc(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Si.exists(!1))]).then(()=>r)}(Gu(bd,"trades"),n)}catch(r){console.error("Error adding transaction: ",r)}},disabled:G})})]}),(0,yd.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md transition-colors duration-300",children:[(0,yd.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[(0,yd.jsxs)("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4 sm:mb-0",children:["Transaction History (",$.length,")"]}),(0,yd.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,yd.jsxs)("select",{onChange:e=>w(e.target.value),value:b,className:"bg-gray-50 dark:bg-gray-700 border rounded-md py-1 px-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[(0,yd.jsx)("option",{value:"all",children:"All Statuses"}),(0,yd.jsx)("option",{value:"Win",children:"Win"}),(0,yd.jsx)("option",{value:"Loss",children:"Loss"})]}),(0,yd.jsxs)("select",{onChange:e=>k(e.target.value),value:x,className:"bg-gray-50 dark:bg-gray-700 border rounded-md py-1 px-2 focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[(0,yd.jsx)("option",{value:"all",children:"All Types"}),(0,yd.jsx)("option",{value:"Buy",children:"Buy"}),(0,yd.jsx)("option",{value:"Sell",children:"Sell"}),(0,yd.jsx)("option",{value:"Deposit",children:"Deposit"}),(0,yd.jsx)("option",{value:"Withdrawal",children:"Withdrawal"})]})]})]}),(0,yd.jsx)("div",{className:"overflow-x-auto",children:(0,yd.jsxs)("table",{className:"w-full text-left",children:[(0,yd.jsx)("thead",{children:(0,yd.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,yd.jsx)("th",{className:"p-3 text-sm font-semibold",children:"Details"}),(0,yd.jsx)("th",{className:"p-3 text-sm font-semibold cursor-pointer",onClick:()=>q("date"),children:"Date \u21c5"}),(0,yd.jsx)("th",{className:"p-3 text-sm font-semibold",children:"Type"}),(0,yd.jsx)("th",{className:"p-3 text-sm font-semibold",children:"Status"}),(0,yd.jsx)("th",{className:"p-3 text-sm font-semibold cursor-pointer",onClick:()=>q("pnl"),children:"Amount \u21c5"}),(0,yd.jsx)("th",{className:"p-3 text-sm font-semibold",children:"Actions"})]})}),(0,yd.jsx)("tbody",{children:i?(0,yd.jsx)("tr",{children:(0,yd.jsx)("td",{colSpan:"6",className:"text-center p-8",children:"Loading data..."})}):W.length>0?W.map(e=>(0,yd.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",onClick:()=>m(e),children:[(0,yd.jsx)("td",{className:"p-3 text-center",children:(e.notes||e.tags&&e.tags.length>0||e.rating>0||e.imageUrl)&&(0,yd.jsx)(Td,{className:"w-5 h-5 text-blue-500 mx-auto"})}),(0,yd.jsx)("td",{className:"p-3",children:e.date.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}),(0,yd.jsx)("td",{className:"p-3 font-semibold "+("Buy"===e.type?"text-green-500":"Sell"===e.type?"text-red-500":"Deposit"===e.type?"text-blue-500":"text-orange-500"),children:e.type}),(0,yd.jsx)("td",{className:"p-3 font-semibold "+("Win"===e.status?"text-green-500":"Loss"===e.status?"text-red-500":""),children:e.status||"-"}),(0,yd.jsx)("td",{className:"p-3 font-semibold "+(e.pnl>=0?"text-green-500":"text-red-500"),children:xd(e.pnl)}),(0,yd.jsx)("td",{className:"p-3",children:(0,yd.jsx)("button",{onClick:t=>{t.stopPropagation(),O(e.id,e.imageUrl)},className:"text-gray-500 hover:text-red-500 transition",children:(0,yd.jsx)(_d,{className:"w-5 h-5"})})})]},e.id)):(0,yd.jsx)("tr",{children:(0,yd.jsx)("td",{colSpan:"6",className:"text-center p-8",children:"No matching data found."})})})]})}),H>1&&(0,yd.jsx)(Gd,{currentPage:E,totalPages:H,onPageChange:N})]})]})]}),g&&(0,yd.jsx)(Kd,{trade:g,onSave:async e=>{const t=Qu(bd,"trades",e.id),{id:n,...r}=e;try{await function(e,t,n){e=cn(e,Wu);const r=cn(e.firestore,ec),s=pc(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=D(t))||t instanceof sc?vc(s,"updateDoc",e._key,t,n,o):yc(s,"updateDoc",e._key,t),Xc(r,[i.toMutation(e._key,Si.exists(!0))])}(t,r)}catch(s){console.error("Error updating transaction: ",s)}},onCancel:()=>m(null)}),y&&(0,yd.jsx)(ef,{date:y,transactions:e,dailyJournals:n,onSaveJournal:M,onClose:()=>v(null),onTradeClick:e=>{v(null),m(e)}}),h&&(0,yd.jsx)(nf,{settings:u,onSave:e=>{c(e),localStorage.setItem("tradingJournalSettings",JSON.stringify(e)),d(!1)},onCancel:()=>d(!1)}),f&&(0,yd.jsx)(sf,{onCancel:()=>p(!1)})]})})}s.createRoot(document.getElementById("root")).render((0,yd.jsx)(r.StrictMode,{children:(0,yd.jsx)(of,{})}))})();
//# sourceMappingURL=main.6bb1fa80.js.map